<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>nand2tetris å¸ƒå°”è¿ç®—å’Œé€»è¾‘é—¨</title>
    <url>/2019/11/03/nand2tetris_week1/</url>
    <content><![CDATA[<h3 id="å¸ƒå°”å€¼1-0-çš„æ“ä½œ"><a href="#å¸ƒå°”å€¼1-0-çš„æ“ä½œ" class="headerlink" title="å¸ƒå°”å€¼1 0 çš„æ“ä½œ"></a>å¸ƒå°”å€¼1 0 çš„æ“ä½œ</h3><p><code>and</code> <code>or</code> <code>not</code><br>algebra function  è¾“å…¥æ˜¯å¸ƒå°”å€¼ï¼Œä¸»ä½“å¯¹å…¶è¿›è¡Œå„ç§æ“ä½œå†è¿”å›å¸ƒå°”å€¼çš„è¿‡ç¨‹ã€‚<br>ä¸¤ç§å¸ƒå°”å‡½æ•°çš„</p>
<ol>
<li>expression.ï¼ˆå°±æ˜¯ç”¨å„ç§and or not ç»„åˆè¡¨ç¤ºï¼‰å¯ä»¥æ ¹æ®äº¤æ¢å¾‹ï¼Œç›¸ç­‰å¾‹ï¼Œå¾·Â·æ‘©æ ¹å®šå¾‹ ç®€åŒ–ã€‚æ‰¾åˆ°ä¸€ä¸ªæœ€ç®€å•çš„è¡¨è¾¾å¼ç­‰äºåŸè¡¨è¾¾å¼çš„ç®—æ³•æ˜¯N-Pé—®é¢˜å¾ˆå›°éš¾ã€‚</li>
<li>true table. åˆ©ç”¨å¸ƒå°”çš„å–å€¼åªæœ‰1 0 çš„ç‰¹æ€§ï¼Œè¾“å…¥è¾ƒå°‘çš„æƒ…å†µä¸‹å¯ä»¥åˆ©ç”¨true table, å³åˆ—å‡ºæ‰€æœ‰ç»“æœï¼Œè§‚å¯Ÿå¾—å‡ºæ›´ç®€å•çš„è¡¨è¾¾å¼<br>truth table å¦‚ä¸‹ è¡¨ç¤º <code>f(x,y,z) =( x or y ) and  not(z)</code></li>
</ol>
<img src="/2019/11/03/nand2tetris_week1/99EC1021-6CCA-4843-B624-A824E61380FB.png">
<p>æ€ä¹ˆæ ¹æ®truth tableå¦‚ä¸Šï¼Œå¾—å‡ºå¸ƒå°”è¡¨è¾¾å¼çš„å…¬å¼å‘¢<br>æ ¹æ®ç»“æœæ˜¯1çš„é‚£è¡Œå†™ä¸€ä¸ªå…¬å¼ä½¿å¾—é™¤äº†è¿™è¡Œæ˜¯1å¤–ï¼Œå…¶ä»–è¡Œéƒ½æ˜¯0ï¼Œæ¯”å¦‚ä¸Šé¢é‚£ä¸ªtruth tableå†™å‡ºä¸‰ä¸ªï¼Œå†å°†è¿™ä¸‰ä¸ªå…¬å¼oræ“ä½œåˆ™å¾—å‡ºæœ€ç»ˆçš„å…¬å¼å³æ»¡è¶³è¿™ä¸ªtruth table.</p>
<p>ç†è®ºï¼š<br>ä»»ä½•çš„å¸ƒå°”æ–¹ç¨‹éƒ½å¯ä»¥é€šè¿‡not, and , or è¡¨è¾¾å‡ºæ¥ã€‚å…¶ä¸­or å¯ä»¥é€šè¿‡not and ç»„åˆè¡¨è¾¾å‡ºæ¥ï¼Œåˆ©ç”¨ de morgan lawã€‚å†ç®€åŒ–ç‚¹NANDæ“ä½œå¯ä»¥è¡¨è¾¾å‡ºnot and orï¼Œæ‰€æœ‰å•ç‹¬åˆ©ç”¨NANDæ“ä½œå°±å¯ä»¥è¡¨ç¤ºå‡ºæ‰€æœ‰çš„å¸ƒå°”æ–¹ç¨‹ã€‚è®¡ç®—æœºå°±æ˜¯ç”±ä¸€ä¸ªä¸€ä¸ªNANDèŠ¯ç‰‡ç»„æˆçš„ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨and or ç»„åˆï¼Œä½†åœ¨ç°å®ä¸­ï¼ŒNANDçš„ç‰©ç†æ„æˆæ¯”è¾ƒç»æµï¼Œæ‰€ä»¥é€šå¸¸é‡‡ç”¨å®ƒã€‚<br><em>NANDçš„truth table</em><br>a b Nand(a,b)<br>0 0 1<br>0 1 1<br>1 0 1<br>1 1 0</p>
<h3 id="é€»è¾‘é—¨-logic-gate"><a href="#é€»è¾‘é—¨-logic-gate" class="headerlink" title="é€»è¾‘é—¨ logic gate"></a>é€»è¾‘é—¨ logic gate</h3><p>è®¡ç®—æœºç§‘å­¦èŒƒç•´å†…çš„é€»è¾‘é—¨ä¸æ¶‰åŠåˆ°ç¡¬ä»¶é‚£å±‚ï¼Œå³é€»è¾‘é—¨çš„å…·ä½“ç”µè·¯å®ç°ï¼ˆcircuit implementationï¼‰ç”±ç›¸å…³çš„ç”µå­å·¥ç¨‹ä¸“ä¸šçš„è´Ÿè´£ã€‚ å¯ä»¥å‚è€ƒâ€™logic designâ€™æˆ–è€…â€™digital designâ€™ ç±»çš„ä¹¦ã€‚é€»è¾‘é—¨çš„å®ç°æœ‰ç”µå­çš„è¿˜æœ‰ç”Ÿç‰©çš„ï¼Œç£åŠ›ç­‰ã€‚é€»è¾‘é—¨æ˜¯ä¸€ç³»åˆ—å¸ƒå°”æ–¹ç¨‹çš„æŠ½è±¡ã€‚è¿™é‡Œæ¶‰åŠåˆ°ç»å…¸çš„æ¥å£interfaceå’Œå®ç°implementçš„å…³ç³»ã€‚ä½¿ç”¨è€…å…³å¿ƒçš„æ˜¯æ¥å£ï¼Œæ˜¯è¿™ä¸ªé€»è¾‘é—¨çš„ä½œç”¨ï¼Œæ˜¯whatçš„æ–¹é¢ï¼Œå®ç°å…³æ³¨çš„æ˜¯howçš„æ–¹é¢ã€‚æ¥å£é€šå¸¸åªæœ‰ä¸€ç§ï¼Œè€Œå®ç°å„å¼‚ï¼Œå¥½çš„å®ç°å¯ä»¥èŠ‚çœæ›´å¤šçš„èƒ½æºï¼Œè¿ç®—æ›´å¿«ç­‰ã€‚é€»è¾‘é—¨åˆ†åŸºç¡€é€»è¾‘é—¨(elementary gate)(æ¯”å¦‚Nand,And) å’Œå¤åˆé€»è¾‘é—¨ (composite gate)(æ¯”å¦‚Adder). åœ¨è¿™ä¸ªè¯¾ç¨‹é‡Œå¯ä»¥å°†NANDçœ‹æˆåŸºç¡€çš„ï¼Œå…¶ä»–çš„éƒ½æ˜¯ç»„åˆè€Œæˆã€‚å…¶ä¸­Multiplexor<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Chip name: Mux</span><br><span class="line">Inputs: a, b, sel</span><br><span class="line">Outputs: out</span><br><span class="line">Function: If sel=0 then out=a else out=b.</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥ç”¨äºå°†å¤šä¸ªè¾“å…¥â€åºåˆ—åŒ–â€œæˆå•æ¡ä¿¡æ¯ã€‚</p>
<h3 id="ç¡¬ä»¶æè¿°è¯­è¨€-hardware-description-language-HDL"><a href="#ç¡¬ä»¶æè¿°è¯­è¨€-hardware-description-language-HDL" class="headerlink" title="ç¡¬ä»¶æè¿°è¯­è¨€ hardware description language (HDL)"></a>ç¡¬ä»¶æè¿°è¯­è¨€ hardware description language (HDL)</h3><p>ç°åœ¨ä¸šç•Œï¼Œç¡¬ä»¶å¤§å¤šå…ˆæ˜¯åœ¨ç”µè„‘è½¯ä»¶ä¸Šå®Œæˆè®¾è®¡ï¼Œåˆ©ç”¨ç¡¬ä»¶æ¨¡æ‹Ÿç­‰è½¯ä»¶å®Œæˆæµ‹è¯•ï¼Œæœ€åå†è¿›å…¥ç¡¬ä»¶åˆ¶ä½œè¿‡ç¨‹(å…¶å®å’Œå»ºç­‘é‡Œçš„CADå¾ˆåƒï¼ŒåŒºåˆ«å°±æ˜¯CADé‡Œä¸èƒ½æ¨¡æ‹Ÿå»ºç­‘çš„ä¸€ç³»åˆ—æµ‹è¯•ï¼Œä½†æ˜¯HDLåœ¨ç¡¬ä»¶æ¨¡æ‹Ÿè½¯ä»¶ä¸Šå¯ä»¥å¾—å‡ºå®ƒçš„åŠŸè€—ï¼Œé€Ÿåº¦ç­‰)ã€‚è¿™é‡Œå°±æ¶‰åŠåˆ°HDLï¼Œå®ƒä¹Ÿæ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œä¸”æ˜¯å‘½ä»¤å‹çš„ã€‚<br>è¿™é‡Œä»¥Xoré€»è¾‘é—¨ä¸¾ä¾‹ã€‚å…·ä½“æ€ä¹ˆè®¾è®¡å†…éƒ¨éœ€è¦ç»éªŒï¼Œå°±å’Œç®—æ³•ä¸€æ ·ï¼ˆè¯¾ç¨‹ä¸­çš„hdlæ˜¯è¯¾ç¨‹å¼€å‘çš„æ•™æˆåœ¨vhdlçš„åŸºç¡€ä¸Šå¼€å‘çš„æ–¹è¨€ï¼ŒåŠŸèƒ½æ²¡æœ‰é‚£ä¹ˆå¤æ‚ï¼Œæ–¹ä¾¿å¿«é€Ÿå­¦ä¹ ï¼‰<br>åŒä¸€ä¸ªinputè¿æ¥åˆ°ä¸åŒçš„æ¥å£å¤„æ˜¯åŒæ—¶çš„ï¼Œä¸ç®¡åˆ†æˆå‡ ä»½ã€‚</p>
<img src="/2019/11/03/nand2tetris_week1/FC594A86-3296-41BC-B25D-8C1AE36A478B.png">
<figure class="highlight vhdl"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* Xor (exclusive or) gate: If a&lt;&gt;b out=1 else out=0. */</span></span><br><span class="line">CHIP Xor &#123;</span><br><span class="line">	<span class="keyword">IN</span> a, b;</span><br><span class="line">	<span class="keyword">OUT</span> <span class="keyword">out</span>;</span><br><span class="line">	PARTS:</span><br><span class="line">	<span class="keyword">Not</span>(<span class="keyword">in</span>=a, <span class="keyword">out</span>=nota);</span><br><span class="line">	<span class="keyword">Not</span>(<span class="keyword">in</span>=b, <span class="keyword">out</span>=notb);</span><br><span class="line">	<span class="keyword">And</span>(a=a, b=notb, <span class="keyword">out</span>=w1);</span><br><span class="line">	<span class="keyword">And</span>(a=nota, b=b, <span class="keyword">out</span>=w2);</span><br><span class="line">	<span class="keyword">Or</span>(a=w1, b=w2, <span class="keyword">out</span>=<span class="keyword">out</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„nota, notb å¯ä»¥çœ‹æˆè¿æ¥åˆ°Not chipçš„ç”µçº¿</p>
<p>ä»£ç ä¸­è¿™ä¸ªéƒ¨åˆ†è¡¨ç¤ºå½“å‰chipèŠ¯ç‰‡çš„æ¥å£ã€‚æŒ‡å‡ºäº†è¿™ä¸ªèŠ¯ç‰‡çš„åå­—ï¼Œå¹¶ä¸”ç»™å‡ºäº†input pin å’Œ output pinçš„åå­—<br><figure class="highlight vhdl"><table><tr><td class="code"><pre><span class="line">CHIP Xor &#123;</span><br><span class="line">	<span class="keyword">IN</span> a, b;</span><br><span class="line">	<span class="keyword">OUT</span> <span class="keyword">out</span>;</span><br></pre></td></tr></table></figure></p>
<p>æ¯æ¡æè¿°éƒ½æ˜¯åœ¨æè¿°æŸä¸ªèŠ¯ç‰‡ä¸Šçš„è¾“å…¥è¾“å‡ºã€‚<br><code>Not</code>, <code>And</code>, <code>Or</code> ç­‰è¡¨ç¤ºå·²æœ‰çš„é€»è¾‘é—¨ï¼Œgateå¯ä»¥å’Œchipè¿™ä¸¤ä¸ªåå­—äº’ç›¸ä½¿ç”¨ã€‚æ‹¬å·å†…çš„æ˜¯å®ƒçš„è¾“å…¥è¾“å‡ºçš„èµ‹å€¼ï¼Œä¹ æƒ¯æ€§çš„ä¸¤ä¸ªè¾“å…¥ä¸€èˆ¬éƒ½å‘½åä¸ºa, bè¿™ç§ã€‚</p>
<h3 id="ç¡¬ä»¶æ¨¡æ‹Ÿ-hardware-simulation"><a href="#ç¡¬ä»¶æ¨¡æ‹Ÿ-hardware-simulation" class="headerlink" title="ç¡¬ä»¶æ¨¡æ‹Ÿ hardware simulation"></a>ç¡¬ä»¶æ¨¡æ‹Ÿ hardware simulation</h3><p>åˆ©ç”¨è¯¾ç¨‹æä¾›çš„æ„è§æ¨¡æ‹Ÿè½¯ä»¶ï¼Œå¯ä»¥è¯»å–hdlæ–‡ä»¶ï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®ä¸åŒçš„è¾“å…¥è¾“å‡ºå€¼è§‚å¯Ÿäº§ç”Ÿçš„ç»“æœï¼Œå¯ä»¥æŸ¥çœ‹åˆ°å†…éƒ¨èŠ¯ç‰‡å†…çš„æ¯ä¸ªé€»è¾‘é—¨çš„è¾“å…¥è¾“å‡ºã€‚å’Œå¸¸è§çš„ç¼–ç¨‹è½¯ä»¶çš„debuggerå¾ˆåƒã€‚å¦å¤–å¦‚æœæ˜¯ä¸ºäº†æµ‹è¯•çš„è¯ï¼Œå¯ä»¥åˆ©ç”¨è„šæœ¬æ¥å®ç°éæ‰‹åŠ¨æ“ä½œã€‚</p>
<h4 id="tst-æµ‹è¯•æ–‡ä»¶"><a href="#tst-æµ‹è¯•æ–‡ä»¶" class="headerlink" title="tst æµ‹è¯•æ–‡ä»¶"></a>tst æµ‹è¯•æ–‡ä»¶</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">load Xor.hdl,</span><br><span class="line">output-list a, b, out;</span><br><span class="line">set a 0, set b 0, eval, output;</span><br><span class="line">set a 0, set b 1, eval, output;</span><br><span class="line">set a 1, set b 0, eval, output;</span><br><span class="line">set a 1, set b 1, eval, output;</span><br></pre></td></tr></table></figure>
<p>åŠ è½½hdlï¼ŒæŒ‡å®šè¾“å‡ºæ ¼å¼ï¼Œä¹‹åçš„æ¯ä¸€è¡Œåˆ†å·ç»“å°¾çš„éƒ½æ˜¯ä¸€ç³»åˆ—å‘½ä»¤ã€‚<br>å¯ä»¥æŒ‡å®šå°†ç»“æœè¾“å‡ºåˆ°æŸä¸ªæ–‡ä»¶ä¸­<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">output-file Xor.out</span><br></pre></td></tr></table></figure></p>
<p>é¿å…æ‰‹åŠ¨å¯¹æ¯”ï¼Œå¯ä»¥åˆ©ç”¨ä¸€ä¸‹çš„å‘½ä»¤ä¼šåœ¨æ¯æ¡æµ‹è¯•æ–‡ä»¶é‡Œçš„å‘½ä»¤æ‰§è¡Œå®Œå’Œ<code>.cmp</code>é‡Œçš„æ–‡ä»¶å¯¹åº”è¡Œæ•°è¿›è¡Œæ¯”è¾ƒï¼Œå‡ºé”™åˆ™æŠ›é”™<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">compare-to Xor.cmp</span><br></pre></td></tr></table></figure></p>
<p>å…¶ä¸­cmpæ–‡ä»¶å¯ä»¥æ˜¯å…¶ä»–æ–¹å¼ç”Ÿæˆçš„<code>.out</code>æ–‡ä»¶ï¼Œåªæ˜¯å°†åç¼€æ”¹æˆ<code>cmp</code>å³å¯ï¼Œæ¯”å¦‚ä¸€äº›high-level è¯­è¨€ã€‚è¿™ä¸ªè¡Œä¸ºå«behavioral simulation (è¡Œä¸ºæ¨¡ä»¿) ,ä¸ªäººç†è§£å°±æ˜¯å’Œä¼ ç»Ÿçš„æµ‹è¯•ç”¨ä¾‹ä¸€ä¸ªæ ·å­ï¼Œåªä¸è¿‡è¿™äº›æµ‹è¯•ç”¨ä¾‹æ˜¯ç”¨å…¶å®ƒçš„æ–¹å¼ç”Ÿæˆçš„ã€‚</p>
<h3 id="multi-bit-buses"><a href="#multi-bit-buses" class="headerlink" title="multi-bit buses"></a>multi-bit buses</h3><p>ä¸€ç³»åˆ—bitçš„åˆé›†ç§°ä¸ºbusï¼Œåœ¨hdlä¸­ç”¨<code>[]</code>çš„å½¢å¼è¡¨ç¤ºbusesï¼Œå’Œå…¶ä»–è¯­è¨€é‡Œçš„æ•°ç»„ä¸€æ ·ã€‚è·å¾—busesçš„ä¸€éƒ¨åˆ†å¯ä»¥ç”¨<code>a[1..2]</code>è¿™ç§å½¢å¼ï¼ŒåŒ…æ‹¬<code>a[1]</code> , <code>a[2]</code>. </p>
<h4 id="busçš„æ•°ç»„è¡¨ç¤º"><a href="#busçš„æ•°ç»„è¡¨ç¤º" class="headerlink" title="busçš„æ•°ç»„è¡¨ç¤º"></a>busçš„æ•°ç»„è¡¨ç¤º</h4><p>å¯ä»¥åˆ©ç”¨indexæ¥è®¿é—®å…·ä½“çš„biti.<br>ä»å³å‘å·¦ï¼Œ a[16]  a[0] æ˜¯æœ€å³è¾¹çš„bit, the least significant bit LSB, a[15] æ˜¯æœ€å·¦è¾¹çš„bit, the most significant bit ä¹Ÿå«MSB</p>
<blockquote>
<p>é¡¹ç›®å¿ƒå¾—<br>æ³¨æ„hdlé‡Œæ•°ç»„å’Œå¸¸è§„çš„è®¿é—®é¡ºåºæ˜¯å€’ç€çš„ã€‚å¦å¤–æ‰“å¼€æ¨¡æ‹Ÿè½¯ä»¶çš„æ—¶å€™å‘ç°command not found çš„æ—¶å€™ï¼Œæ³¨æ„æ–‡ä»¶æƒé™<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod +x xxx.sh</span><br></pre></td></tr></table></figure></p>
</blockquote>
]]></content>
      <categories>
        <category>computer organization</category>
      </categories>
      <tags>
        <tag>nand2tetris</tag>
      </tags>
  </entry>
  <entry>
    <title>reduxåŸºç¡€</title>
    <url>/2019/06/08/redux-fundamental/</url>
    <content><![CDATA[<h2 id="å¯¹è±¡æ•°ç»„æ“ä½œ"><a href="#å¯¹è±¡æ•°ç»„æ“ä½œ" class="headerlink" title="å¯¹è±¡æ•°ç»„æ“ä½œ"></a>å¯¹è±¡æ•°ç»„æ“ä½œ</h2><p>è¿™éƒ¨åˆ†æ˜¯reduxçš„å…ˆçŸ¥çŸ¥è¯†</p>
<h3 id="å¦‚ä½•ä¿æŒå¯¹è±¡ç±»å‹æ•°æ®ä¸å¯å˜"><a href="#å¦‚ä½•ä¿æŒå¯¹è±¡ç±»å‹æ•°æ®ä¸å¯å˜" class="headerlink" title="å¦‚ä½•ä¿æŒå¯¹è±¡ç±»å‹æ•°æ®ä¸å¯å˜"></a>å¦‚ä½•ä¿æŒå¯¹è±¡ç±»å‹æ•°æ®ä¸å¯å˜</h3><p>reduxé‡Œç”¨äº†å¾ˆå¤šçº¯å‡½æ•°çš„æ¦‚å¿µï¼Œçº¯å‡½æ•°æ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œæ²¡æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œæ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡è¿”å›éƒ½æ˜¯ä¸€æ ·ã€‚</p>
<h4 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h4><h5 id="æ•°ç»„æ·»åŠ å…ƒç´ "><a href="#æ•°ç»„æ·»åŠ å…ƒç´ " class="headerlink" title="æ•°ç»„æ·»åŠ å…ƒç´ "></a>æ•°ç»„æ·»åŠ å…ƒç´ </h5><p><code>push()</code>ä¼šæ›´æ”¹åŸæ•°ç»„ï¼Œé‡‡ç”¨<code>concat</code>æˆ–<code>spread</code>æ“ä½œç¬¦<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> addCounter = <span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// return list.concat([0]); // old way</span></span><br><span class="line">  <span class="keyword">return</span> [...list, <span class="number">0</span>]; <span class="comment">// ES6 way</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testAddCounter = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> listBefore = [];</span><br><span class="line">  <span class="keyword">const</span> listAfter = [<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  deepFreeze(listBefore);</span><br><span class="line"></span><br><span class="line">  expect(</span><br><span class="line">    addCounter(listBefore)</span><br><span class="line">  ).toEqual(listAfter);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">testAddCounter();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'All tests passed'</span>)</span><br></pre></td></tr></table></figure></p>
<p><a href="https://egghead.io/lessons/javascript-redux-avoiding-array-mutations-with-concat-slice-and-spread" target="_blank" rel="noopener">Dan</a>è§†é¢‘é‡Œé‡‡ç”¨äº†<a href="https://github.com/mjackson/expect" target="_blank" rel="noopener">expect</a>å’Œ<a href="https://github.com/substack/deep-freeze" target="_blank" rel="noopener">deepfreeze</a>åº“ï¼Œå‰è€…æ˜¯æ–­è¨€ç”¨ï¼Œdeepfreezeç”¨æ¥å¯¹å¯¹è±¡è¿›è¡Œé€’å½’<code>freeze</code>.<br><a id="more"></a></p>
<h5 id="æ•°ç»„åˆ é™¤å…ƒç´ "><a href="#æ•°ç»„åˆ é™¤å…ƒç´ " class="headerlink" title="æ•°ç»„åˆ é™¤å…ƒç´ "></a>æ•°ç»„åˆ é™¤å…ƒç´ </h5><p><code>splice</code>ä¼šæ›´æ”¹åŸæ•°ç»„ï¼Œ<code>slice</code>ä¸ä¼š<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> removeCounter = <span class="function">(<span class="params">list, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Old way:</span></span><br><span class="line">  <span class="comment">//return list</span></span><br><span class="line">  <span class="comment">//  .slice(0, index)</span></span><br><span class="line">  <span class="comment">//  .concat(list.slice(index + 1));</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ES6 way:</span></span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    ...list.slice(<span class="number">0</span>, index),</span><br><span class="line">    ...list.slice(index + <span class="number">1</span>)</span><br><span class="line">  ];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h5 id="æ›´æ”¹æ•°ç»„å…ƒç´ å€¼"><a href="#æ›´æ”¹æ•°ç»„å…ƒç´ å€¼" class="headerlink" title="æ›´æ”¹æ•°ç»„å…ƒç´ å€¼"></a>æ›´æ”¹æ•°ç»„å…ƒç´ å€¼</h5><p>ä¸èƒ½ç›´æ¥é‡‡ç”¨<code>arr[index]++</code>è¿™ç§å½¢å¼ï¼Œå…¶ä¼šæ›´æ”¹åŸæœ‰æ•°ç»„ï¼Œå¯ä»¥é‡‡ç”¨æ‹¼æ¥<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> incrementCounter = <span class="function">(<span class="params">list, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Old way:</span></span><br><span class="line">  <span class="comment">// return list</span></span><br><span class="line">  <span class="comment">//  .slice(0, index)</span></span><br><span class="line">  <span class="comment">//  .concat([list[index] + 1])</span></span><br><span class="line">  <span class="comment">//  .concat(list.slice(index + 1));</span></span><br><span class="line">  <span class="comment">// ES6 way:</span></span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    ...list.slice(<span class="number">0</span>, index),</span><br><span class="line">    list[index] + <span class="number">1</span>,</span><br><span class="line">    ...list.slice(index + <span class="number">1</span>)</span><br><span class="line">  ];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h4 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h4><p>å½“ç„¶å¯ä»¥é‡‡ç”¨å°†æ¯ä¸ªå€¼è¿›è¡Œå¾ªç¯copyï¼Œä¸è¿‡æ›´ç®€å•çš„æ˜¯é‡‡ç”¨es6çš„<code>Object.assign</code>ï¼Œæ³¨æ„<code>Object.assign</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è¦èµ‹å€¼çš„å¯¹è±¡ï¼Œä¸ºäº†æ›´æ”¹åŸæœ‰å¯¹è±¡ï¼Œæ‰€ä»¥é€šå¸¸é‡‡ç”¨ç©ºå¯¹è±¡åœ¨è¿™é‡Œã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> toggleTodo = <span class="function">(<span class="params">todo</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// es6</span></span><br><span class="line">  <span class="comment">// return Object.assign(&#123;&#125;, todo, &#123;</span></span><br><span class="line">  <span class="comment">//   completed: !todo.completed</span></span><br><span class="line">  <span class="comment">// &#125;);</span></span><br><span class="line">  <span class="comment">// es7</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...todo,</span><br><span class="line">      completed: !todo.completed</span><br><span class="line">  &#125;;  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="redux-ä¸‰ä¸ªåŸåˆ™"><a href="#redux-ä¸‰ä¸ªåŸåˆ™" class="headerlink" title="redux ä¸‰ä¸ªåŸåˆ™"></a>redux ä¸‰ä¸ªåŸåˆ™</h2><ol>
<li>single state tree<br>æ— è®ºåº”ç”¨å¤§å°ï¼Œéƒ½åªæœ‰ä¸€ä¸ªçŠ¶æ€æ ‘è´Ÿè´£è¿™ä¸ªåº”ç”¨ï¼Œä¸€ä¸ªå¯¹è±¡ç®¡ç†å˜åŒ–å¤æ‚åº¦è¾ƒä½ã€‚</li>
<li>state tree is read only<br>stateæ— æ³•ç›´æ¥æ›´æ”¹éœ€è¦é€šè¿‡actionå‘ŠçŸ¥å®ƒå¦‚ä½•æ›´æ”¹ã€‚actionä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å¿…é¡»åŒ…å«ä¸€ä¸ª<code>type</code>çš„key.</li>
<li>reducer pure function<br><code>reducer</code>éœ€è¦æ˜¯çº¯å‡½æ•°ã€‚æ‰€è°“çš„çº¯å‡½æ•°å°±æ˜¯æ— è®ºå‡½æ•°æ‰§è¡Œå¤šå°‘æ¬¡ç»“æœéƒ½ä¸€æ ·ï¼Œä¸”æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆç½‘ç»œè¯·æ±‚ï¼Œæ›´æ”¹dom). åœ¨reactä¸­ï¼Œå‡½æ•°ç»„ä»¶ç”±äºéœ€è¦è¢«æ‰§è¡Œå¾ˆå¤šæ¬¡æ¸²æŸ“ï¼Œæ¨èçš„åšæ³•å°±æ˜¯çº¯å‡½æ•°ã€‚<code>reducer</code>ä¸­ä¹Ÿå¼•å…¥äº†è¿™ä¸ªæ¦‚å¿µï¼Œçº¯å‡½æ•°äº§ç”Ÿçš„çŠ¶æ€ä¹Ÿæ˜¯æœ€å®¹æ˜“è·Ÿè¸ªå’Œæµ‹è¯•ã€‚</li>
</ol>
<h2 id="store"><a href="#store" class="headerlink" title="store"></a>store</h2><h3 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store = Redux.createStore(counter);  <span class="comment">// counter å°±æ˜¯reducer</span></span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><h4 id="dispatch"><a href="#dispatch" class="headerlink" title="dispatch"></a>dispatch</h4><p>storeä¸Šè°ƒç”¨<code>dispatch</code>åreducerä¼šè¿›è¡Œè®¡ç®—ç»§è€Œæ›´æ–°store<br>  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">store.dispatch(&#123;<span class="attr">type</span>:<span class="string">'INCREMENT'</span>&#125;)</span><br></pre></td></tr></table></figure></p>
<h5 id="actionCreator"><a href="#actionCreator" class="headerlink" title="actionCreator"></a>actionCreator</h5><p>è¿”å›ä¸€ä¸ªactionï¼Œå³dispatchçš„å‚æ•°ï¼Œé›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹å¯ä»¥æ–¹ä¾¿çŸ¥é“è¿™ä¸ªåº”ç”¨æœ‰å“ªäº›æ”¹å˜storeçš„è¡Œä¸ºã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> toggleTodo = <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: <span class="string">'TOGGLE_TODO'</span>,</span><br><span class="line">    id</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h4 id="subscribe"><a href="#subscribe" class="headerlink" title="subscribe"></a>subscribe</h4><p>ç›¸å½“äºä¸€ä¸ªé’©å­ï¼Œæ¯æ¬¡æ›´æ–°storeä¹‹åè§¦å‘è®¢é˜…çš„å‡½æ•°</p>
<h4 id="getState"><a href="#getState" class="headerlink" title="getState"></a><code>getState</code></h4><p>è·å–state treeå†…çš„state</p>
<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>ä¸ªäººå®ç°ï¼Œå¸®åŠ©ç†è§£ï¼Œä»¥åå‚è€ƒä¸‹æºç <br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> createStore = <span class="function"><span class="params">reducer</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> state = <span class="string">""</span>,</span><br><span class="line">    callbacks = [];</span><br><span class="line">  <span class="keyword">const</span> store = &#123;</span><br><span class="line">    dispatch: <span class="function"><span class="keyword">function</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">      state = reducer(state,action);</span><br><span class="line">      callbacks.map(<span class="function"><span class="params">callback</span> =&gt;</span> callback());</span><br><span class="line">    &#125;,</span><br><span class="line">    getState: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">    &#125;,</span><br><span class="line">    subscribe: <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">      callbacks.push(callback);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  store.dispatch(&#123;&#125;)</span><br><span class="line">  <span class="keyword">return</span> store;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="reducer"><a href="#reducer" class="headerlink" title="reducer"></a>reducer</h2><p><code>reducer</code>æ¥å—ç°åœ¨çš„state treeä»¥åŠä¼ å¦‚çš„actionå¾—å‡ºæ›´æ”¹åçš„state tree. å’Œæ•°ç»„çš„<code>reduce</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°å¾ˆåƒï¼Œæ¥å—ä¸€ä¸ªåŸå§‹å€¼å’Œä¸€ä¸ªæ“ä½œè¿”å›æ–°çš„å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> counter = <span class="function">(<span class="params">state = <span class="number">0</span>, action</span>)=&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'INCREMENT'</span>:</span><br><span class="line">      <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'DECREMENT'</span>:</span><br><span class="line">      <span class="keyword">return</span> state - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å¦‚ä¸Šæ˜¯ä¸€ä¸ªreducerï¼Œéœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p>
<ol>
<li>è¦è€ƒè™‘åˆ°actionæœªçŸ¥çš„æƒ…å†µæˆ–è€…æ²¡æœ‰ä¼ é€’actionçš„æ—¶å€™è¿”å›åŸå§‹stateï¼Œåˆ©ç”¨default</li>
<li>reduceråˆå§‹çš„æ—¶å€™å°±ä¼šè¢«è°ƒç”¨ï¼Œåˆå§‹çš„stateä¹Ÿåœ¨è¿™é‡Œè¢«å£°æ˜ï¼Œåˆ©ç”¨es6çš„å‡½æ•°é»˜è®¤å€¼ï¼Œå’Œä¸Šé¢å¾—åˆ°storeçš„ä¸ªäººå®ç°ç»“åˆèµ·æ¥å‚è€ƒçœ‹çœ‹æ˜¯ä»€ä¹ˆæ—¶å€™ä¼ å…¥ç©ºå€¼çš„ã€‚</li>
<li><code>createStore()</code>çš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ç”¨æ¥è®¾ç½®åˆå§‹å€¼ï¼Œç”¨æ¥è¦†ç›–reducerçš„é»˜è®¤å€¼ã€‚æ¯”å¦‚å¯ä»¥åˆ©ç”¨localStorageä¿å­˜çŠ¶æ€ï¼Œä¸‹æ¬¡åœ¨è¿›è¡Œè¯»å–ã€‚åˆ©ç”¨store.subscribe(), æ¯æ¬¡storeå˜åŒ–æ—¶å­˜å‚¨state, é¿å…å¤ªé¢‘ç¹è°ƒç”¨å¯ä»¥å¼•å…¥throttle, å¦å¤–localStorageæ³¨æ„try catch å› ä¸ºç”¨æˆ·å¯èƒ½ä¼šç¦æ­¢ã€‚<br><a href="https://redux.js.org/api/createstore#arguments" target="_blank" rel="noopener">arguments</a></li>
</ol>
<h3 id="reducer-composing-with-arrays"><a href="#reducer-composing-with-arrays" class="headerlink" title="reducer composing with arrays"></a>reducer composing with arrays</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> todos = <span class="function">(<span class="params">state = [], action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'ADD_TODO'</span>:</span><br><span class="line">      <span class="keyword">return</span> [</span><br><span class="line">        ...state,</span><br><span class="line">        &#123;</span><br><span class="line">          id: action.id,</span><br><span class="line">          text: action.text,</span><br><span class="line">          completed: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">      ];</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'TOGGLE_TODO'</span>:</span><br><span class="line">      <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (todo.id !== action.id) &#123;</span><br><span class="line">          <span class="keyword">return</span> todo;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          ...todo,</span><br><span class="line">          completed: !todo.completed</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´æ”¹è¿‡å<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> todo = <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'ADD_TODO'</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        id: action.id,</span><br><span class="line">        text: action.text,</span><br><span class="line">        completed: <span class="literal">false</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'TOGGLE_TODO'</span>:</span><br><span class="line">      <span class="keyword">if</span> (state.id !== action.id) &#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        completed: !state.completed</span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> todos = <span class="function">(<span class="params">state = [], action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'ADD_TODO'</span>:</span><br><span class="line">      <span class="keyword">return</span> [</span><br><span class="line">        ...state,</span><br><span class="line">        todo(<span class="literal">undefined</span>, action)</span><br><span class="line">      ];</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'TOGGLE_TODO'</span>:</span><br><span class="line">      <span class="keyword">return</span> state.map(<span class="function"><span class="params">t</span> =&gt;</span> todo(t, action));</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>ç›¸åº”è®¨è®ºå¯ä»¥è§<a href="https://egghead.io/lessons/react-redux-reducer-composition-with-arrays" target="_blank" rel="noopener">è¯„è®ºåŒº</a><br>Dançš„åšæ³•æ˜¯å°†æ•°ç»„å¤„ç†å’Œå•é¡¹å¤„ç†è¿›è¡Œäº†åˆ†ç¦»ï¼Œä»–æåˆ°äº†å¦‚æœä¸åˆ†ç¦»çš„è¯å¢åŠ æ–°çš„actionæ¯”å¦‚ç¼–è¾‘æŸä¸€ä¸ªtodoäº‹é¡¹å°±ä¼šå¯¼è‡´é‡å¤äº†æ›´æ–°æ•°ç»„ä¸­æŸä¸€é¡¹çš„é€»è¾‘ã€‚è¿™å¤„æˆ‘æ˜¯ç†è§£ä¸äº†ï¼Œå› ä¸ºä»–ä¹Ÿé‡å¤äº†switchå£°æ˜å‘¢ï¼Œä¸è¿‡Danä¹Ÿæåˆ°äº†è¿™ä¸ªé¡¹ç›®è¿‡å°ï¼Œä¸èƒ½å¤Ÿå¾ˆæœ‰è¯´æœåŠ›ã€‚</p>
<h3 id="reducer-composing-with-object"><a href="#reducer-composing-with-object" class="headerlink" title="reducer composing with object"></a>reducer composing with object</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> visibilityFilter = (</span><br><span class="line">    state = <span class="string">'SHOW_ALL'</span>,</span><br><span class="line">    action</span><br><span class="line">) =&gt; &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'SET_VISIBILITY_FILTER'</span>:</span><br><span class="line">        <span class="keyword">return</span> action.filter;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> todoApp = <span class="function">(<span class="params">state = &#123;&#125;, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">     <span class="comment">// Call the `todos()` reducer from last section</span></span><br><span class="line">     todos: todos(</span><br><span class="line">      state.todos,</span><br><span class="line">      action</span><br><span class="line">    ),</span><br><span class="line">    visibilityFilter: visibilityFilter(</span><br><span class="line">      state.visibilityFilter,</span><br><span class="line">      action</span><br><span class="line">    )</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ‰€æœ‰çš„stateéƒ½æ˜¯åœ¨ä¸€ä¸ªstateå¯¹è±¡ä¸Šç®¡ç†ã€‚ä¸åŒçš„keyè´Ÿè´£ä¸åŒéƒ¨åˆ†çš„çŠ¶æ€ã€‚æ¯æ¬¡æ‰§è¡Œäº†reduceréƒ½æ˜¯è¿”å›äº†ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚åˆå§‹çš„æ—¶å€™stateæ˜¯ç©ºå¯¹è±¡ï¼Œé‚£ä¹ˆç©ºå¯¹è±¡çš„keyä¹Ÿæ˜¯undefinedã€‚æ­£å¥½æ¯ä¸ªå°çš„reduceré‡Œä¹Ÿæ˜¯å®šä¹‰äº†undefinedçš„æ—¶å€™å¤„ç†ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; combineReducers &#125; = Redux; <span class="comment">// CDN Redux import</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todoApp = combineReducers(&#123;</span><br><span class="line">  todos: todos,</span><br><span class="line">  visibilityFilter: visibilityFilter</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>combineReducersæ˜¯reduxæä¾›çš„åˆæˆreduceræ–¹æ³•çš„helperå‡½æ•°ï¼Œè¿”å›çš„æ˜¯ä¸ªreduceræ–¹æ³•ï¼Œä¸ä»…ä»…å¯ä»¥ç”¨åœ¨æ ¹reducerä¸Šã€‚<br><a href="https://github.com/reduxjs/redux/blob/master/src/combineReducers.js" target="_blank" rel="noopener">source</a></p>
<h2 id="æ¥å…¥react"><a href="#æ¥å…¥react" class="headerlink" title="æ¥å…¥react"></a>æ¥å…¥react</h2><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Counter = <span class="function">(<span class="params">props</span>)=&gt;</span>(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;&#123;props.value&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;button onClick=&#123;props.onIncrement&#125;&gt;INCREMENT&lt;/</span>button&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp">const counter = (state = 1, action)=&gt;&#123;</span></span><br><span class="line"><span class="regexp">  switch(action.type)&#123;</span></span><br><span class="line"><span class="regexp">    case 'INCREMENT':</span></span><br><span class="line"><span class="regexp">      return state +1;</span></span><br><span class="line"><span class="regexp">    default:</span></span><br><span class="line"><span class="regexp">      return state</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">const store = createStore(counter);</span></span><br><span class="line"><span class="regexp">const render = ()=&gt;&#123;</span></span><br><span class="line"><span class="regexp">  reactDom.render(&lt;Counter value=&#123;store.getState()&#125; onIncrement=&#123;()=&gt;store.dispatch(&#123;type:'INCREMENT'&#125;)&#125;&gt;&lt;/</span>Counter&gt;,<span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</span><br><span class="line">&#125;</span><br><span class="line">store.subscribe(render)</span><br><span class="line">render();</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ˜¯æ¯”è¾ƒç®€å•çš„å®ç°ï¼Œstoreæ›´æ–°çš„æ—¶å€™ç»‘å®šäº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå›è°ƒé‡Œè°ƒç”¨äº†<code>ReactDom.render</code>çš„æ–¹æ³•è¿›è¡Œæ¸²æŸ“ã€‚æ¯å½“storeæ›´æ–°çš„æ—¶å€™æ•´ä¸ªappéƒ½è¿›è¡Œäº†é‡æ–°æ¸²æŸ“ã€‚å¯ä»¥åœ¨ç»„ä»¶å†…è®¢é˜…store, æ¯å½“storeæ›´æ–°çš„æ—¶å€™æ›´æ–°ç»„ä»¶ï¼Œåˆ©ç”¨forceUpdate()çš„æ–¹æ³•æ›´æ–°å½“å‰ç»„ä»¶ã€‚é€šå¸¸é‡‡ç”¨ä¸€ä¸ªcontainerç»„ä»¶å’Œreduxè¿›è¡Œè¿æ¥ï¼Œå°†æ•°æ®ä¼ é€’ç»™presentationalç»„ä»¶ã€‚æ¯ä¸ªç»„ä»¶mountçš„æ—¶å€™è¿›è¡Œè®¢é˜…ï¼Œunmountçš„æ—¶å€™è¿›è¡Œå–æ¶ˆè®¢é˜…ã€‚<br><a href="https://github.com/tayiorbeii/egghead.io_redux_course_notes/blob/master/17-Extracting_Container_Components_FilterLink.md" target="_blank" rel="noopener">Extracting_Container_Components</a>ã€‚</p>
<p>æ¯ä¸ªç»„ä»¶å†…çš„storeçš„æ¥æºå¯ä»¥æ˜¯é€šè¿‡propsä¼ é€’ï¼Œè¿™æ ·æ¯”è¾ƒæ˜ç¡®ï¼Œä½†æ˜¯ä¼šå¯¼è‡´å±‚å±‚ä¼ é€’propsçš„é—®é¢˜ã€‚ä¸è¿‡æˆ‘ç›®å‰è§‰å¾—å°±å¥½åƒå…¨å±€å˜é‡åœ¨æ¨¡å—åŒ–çš„æ—¶ä»£å¯ä»¥é€šè¿‡importè¿›æ¥ï¼Œæ¯ä¸ªç»„ä»¶å†…çš„storeå¯ä»¥é€šè¿‡importè¿›æ¥storeçš„å®ä¾‹å°±å¯ä»¥ã€‚å°±ç®—æ–‡ä¸­æåˆ°çš„mock storeçš„æµ‹è¯•é—®é¢˜ï¼Œæˆ‘åªåœ¨ä¸€ä¸ªåœ°æ–¹æ›´æ”¹æˆ‘çš„storeå®ä¾‹ä¸ä¹…å¯ä»¥äº†å˜›ï¼Œæš‚æ—¶ç•™ä¸ªç–‘é—®åœ¨è¿™o(â•¯â–¡â•°)oã€‚<a href="https://github.com/tayiorbeii/egghead.io_redux_course_notes/blob/master/19-Passing_the_Store_Down_Explicitly_via_Props.md" target="_blank" rel="noopener">Passing the Store Down Explicitly via Props</a><br>è¿˜æœ‰ä¸€ç§è¿›è¡Œä¸æ˜ç¡®ä¼ é€’storeçš„æ–¹æ³•å°±æ˜¯åˆ©ç”¨<code>context</code>. <code>react-redux</code>è¯å®æ­£æ˜¯ç”¨äº†<code>context</code>.å¯ä»¥åœ¨æ¯ä¸ªç»„ä»¶å†…è®¿é—®store. </p>
<h2 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h2><p>åˆ©ç”¨<code>react-redux</code>çš„connectæ–¹æ³•ï¼Œå°† <code>mapStateToProps</code>,<code>mapDispatchToProps</code><br><code>mapStateToProps</code>å°†store.stateé‡Œçš„å±æ€§ä¼ é€’ç»™containerç»„ä»¶çš„props, <code>mapDispatchToProps</code>å°†store.dispatchæ–¹æ³•æ˜ å°„åˆ°containerç»„ä»¶çš„props. <code>connect</code>æ–¹æ³•æ¥å—è¿™ä¸¤ä¸ªå‚æ•°å¹¶ä¸”è¿”å›ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ã€‚æœ€åè¿”å›çš„ç»„ä»¶é‡Œä¼šå°†mapé‡Œå®šä¹‰çš„propså’ŒComponentAçš„propsè¿›è¡Œåˆå¹¶ã€‚å¯ä»¥åˆ©ç”¨<code>ownProps</code>è¿›è¡ŒComponentAçš„propsè®¿é—®. mapStateToPropsä¸ºç©ºçš„è¯å°†ä¸ä¼šåœ¨storeä¸Šè®¢é˜…å½“å‰ç»„ä»¶çš„æ›´æ–°ï¼Œå› ä¸ºä¸éœ€è¦æ¥å—stateçš„å€¼ã€‚å¦‚æœ<a href="https://react-redux.js.org/using-react-redux/connect-mapdispatch" target="_blank" rel="noopener">mapDispatchToProps</a>æ˜¯nullæˆ–è€…å…¶ä»–falsy value,ä¼šé»˜è®¤å°†dispatchæ–¹æ³•ä½œä¸ºå‚æ•°ä¼ é€’ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">connect(mapStateToProps,mapDispatchToProps)(ComponentA)</span><br></pre></td></tr></table></figure></p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://github.com/tayiorbeii/egghead.io_redux_course_notes" target="_blank" rel="noopener">redux-notes</a></p>
]]></content>
      <categories>
        <category>frontend</category>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>redux</tag>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>webpack4æ’ä»¶åŠå·¥ä½œæµç¨‹</title>
    <url>/2019/05/06/how-does-webpack4-work/</url>
    <content><![CDATA[<blockquote>
<p>webpackä½œè€…æ˜¯c#å‡ºèº«ï¼Œå¾ˆå¤šä»£ç æ˜¯OOPæ¨¡å¼ï¼Œå¯ä»¥å€Ÿé‰´ä¸‹</p>
</blockquote>
<h2 id="Tapable"><a href="#Tapable" class="headerlink" title="Tapable"></a>Tapable</h2><p>webpack4é‡å†™äº†<a href="https://github.com/webpack/tapable" target="_blank" rel="noopener">Tapable</a>, æ˜¯webpackçš„æ’ä»¶ç»„ç»‡çš„æ ¸å¿ƒã€‚å®ƒæä¾›ç»™å„ä¸ªæ’ä»¶é’©å­ï¼Œåœ¨äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œè¿™äº›æŒ‚è½½çš„æ–¹æ³•ã€‚webapckçš„æ’ä»¶é‡Œå¿…é¡»æœ‰<code>apply()</code>æ–¹æ³•ï¼Œå½“å…¶è¢«è°ƒç”¨çš„æ—¶å€™webpackå°†é’©å­ä¸Šçš„æ–¹æ³•æŒ‚è½½åˆ°å„ä¸ªäº‹ä»¶ä¸‹é¢æœ‰ç‚¹åƒ<code>nodejs</code>é‡Œ<code>EventEmitter</code>çš„<code>$on</code><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>() &#123;</span><br><span class="line">		<span class="keyword">this</span>.hooks = &#123;</span><br><span class="line">			accelerate: <span class="keyword">new</span> SyncHook([<span class="string">"newSpeed"</span>]),</span><br><span class="line">			brake: <span class="keyword">new</span> SyncHook(),</span><br><span class="line">			calculateRoutes: <span class="keyword">new</span> AsyncParallelHook([<span class="string">"source"</span>, <span class="string">"target"</span>, <span class="string">"routesList"</span>])</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;,</span><br><span class="line">    setSpeed(newSpeed) &#123;</span><br><span class="line">		<span class="keyword">this</span>.hooks.accelerate.call(newSpeed);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>å¦‚ä¸Šä»£ç æ‰€ç¤ºå…ˆæ˜¯åœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­æ³¨å†Œäº†ä¸‰ä¸ªé’©å­å‡½æ•°ï¼Œåœ¨å®ä¾‹ä¸Šè°ƒç”¨æ–¹æ³•æ—¶è§¦å‘é’©å­å‡½æ•°ã€‚<br>ä¸‹é¢ä»‹ç»webpacké‡Œä¸»è¦çš„6ä¸ª<code>Tapable</code>çš„å®ä¾‹, å®ƒä»¬éƒ½ç»§æ‰¿äº†<code>Tapable</code>ï¼Œå®šä¹‰äº†ä¸€äº›è‡ªå·±çš„hook</p>
<h2 id="Compiler"><a href="#Compiler" class="headerlink" title="Compiler"></a>Compiler</h2><p>æœ€é«˜å±‚çš„å®ä¾‹ï¼Œåˆå§‹åŒ–é…ç½®ï¼Œæä¾›å…¨å±€æ€§çš„é’©å­æ¯”å¦‚<code>done</code>, <code>compilation</code>ã€‚å…¶ä»–çš„<code>Tapable</code>å®ä¾‹éœ€è¦é€šè¿‡å…¶è®¿é—®ï¼Œå¦‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">compiler.hooks.compilation.tap(</span><br><span class="line">  <span class="string">"myFirstWebpackPlugin"</span>,</span><br><span class="line">  (compilation, params) =&gt; &#123;</span><br><span class="line">    compilation.hooks.seal.tap()</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<h2 id="Compilation"><a href="#Compilation" class="headerlink" title="Compilation"></a>Compilation</h2><p>ç”±<code>Compiler</code>åˆ›å»ºï¼Œæ•´ä¸ªæ„å»ºå°±åœ¨è¿™é‡Œå®Œæˆï¼Œè¿›è¡Œä¾èµ–å›¾æ„å»ºï¼Œä¼˜åŒ–èµ„æºï¼Œæ¸²æŸ“å‡ºruntimeæ—¶çš„ä»£ç ç­‰ã€‚ä¸‹é¢çš„4ä¸ªå®ä¾‹éƒ½æ˜¯å‘ç”Ÿåœ¨è¿™ä¸ªé˜¶æ®µã€‚</p>
<h2 id="Resolver"><a href="#Resolver" class="headerlink" title="Resolver"></a>Resolver</h2><p>å½“ä½ è¯·æ±‚ä¸€ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œä½ å°†æ¨¡å—åæˆ–è€…ç›¸å¯¹åœ°å€å‘ç»™æ¨¡å—è§£æå™¨ï¼Œå®ƒä¼šå»è§£æå‡ºç»å¯¹åœ°å€å»å¯»æ‰¾é‚£ä¸ªæ¨¡å—ï¼Œçœ‹æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›ç›¸åº”çš„æ¨¡å—ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸Šä¸‹æ–‡ç­‰ã€‚è¿™é‡Œçš„è¯·æ±‚å¯ä»¥ç±»ä¼¼ç½‘ç»œè¯·æ±‚ä¸€æ ·æºå¸¦ä¸ŠæŸ¥è¯¢å‚æ•°ä¹‹ç±»çš„ï¼Œ<code>Resolver</code>å°†ä¼šè¿”å›é¢å¤–ä¿¡æ¯ã€‚webpack4é‡Œå°†<code>Resolver</code>è¿™ä¸ªå®ä¾‹æŠ½å‡ºæ¥å•ç‹¬å‘äº†ä¸€ä¸ªåŒ…<code>enhanced-resolve</code>, æŠ½è±¡å‡ºæ¥å¯ä»¥ä¾¿äºç”¨æˆ·å®ç°è‡ªå·±çš„<code>Resolver</code></p>
<h2 id="ModuleFactory"><a href="#ModuleFactory" class="headerlink" title="ModuleFactory"></a>ModuleFactory</h2><p>æ¨¡å—å·¥å‚å°±æ˜¯è´Ÿè´£æ„é€ æ¨¡å—çš„å®ä¾‹ï¼Œä»‹ç»ä¸¤ç§<code>NormalModuleFactory</code>å’Œ<code>ContextModuleFactory</code>ã€‚ä¸¤è€…ä¸åŒçš„åœ°æ–¹åœ¨äºåè€…ç”¨äºè§£æåŠ¨æ€<code>import()</code>. æ¨¡å—å·¥å‚ä¸»è¦æ˜¯ç”¨äºå°†<code>Resolver</code>è§£ææˆåŠŸçš„è¯·æ±‚é‡Œçš„æºç ä»æ–‡ä»¶ä¸­æ‹¿å‡ºï¼Œåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ¨¡å—å¯¹è±¡ï¼ˆNormalModuleï¼‰</p>
<h2 id="Parser"><a href="#Parser" class="headerlink" title="Parser"></a>Parser</h2><p><code>Parser</code>ä¸»è¦ç”¨äºå°†ä»£ç è§£ææˆASTæŠ½è±¡è¯­æ³•ğŸŒ².å¯ä»¥åœ¨<a href="https://astexplorer.net/" target="_blank" rel="noopener">ast</a>æŸ¥çœ‹ä»£ç è½¬æ¢æˆASTåçš„æ ·å­ã€‚webpacké»˜è®¤é‡‡ç”¨<code>acorn</code>è§£æå™¨ï¼Œbabelæ˜¯<code>babylon</code>ã€‚<code>Parser</code>å°†<code>ModuleFactory</code>è¿”å›çš„å¯¹è±¡é‡Œçš„ä»£ç å­—ç¬¦ä¸²è½¬æ¢æˆASTåè¿›è¡Œè§£æï¼Œå‘ç°<code>import</code>æˆ–è€…<code>require</code>æˆ–è€…<code>define</code>ç±»ä¼¼æ¨¡å—å¼•ç”¨æ—¶ä¼šå°†è¿™äº›å¼•ç”¨ä¿¡æ¯ä¹Ÿå°±æ˜¯ä¾èµ–æ·»åŠ åˆ°å½“å‰æ¨¡å—çš„å¯¹è±¡é‡Œï¼Œè¿™æ ·æ¯ä¸ªæ¨¡å—å¯¹è±¡é‡Œä¸ä½†æœ‰è‡ªå·±æ¨¡å—çš„ä¿¡æ¯è¿˜åŒ…å«å®ƒçš„ä¾èµ–ä¿¡æ¯ã€‚webpackä¼šåœ¨ä¸ä»…ä»…ä¼šåœ¨æ¨¡å—å£°æ˜å¤„è§¦å‘äº‹ä»¶ï¼Œå®ƒç”šè‡³ä¼šåœ¨è§£æåˆ°å˜é‡æ—¶ä¹Ÿè§¦å‘äº‹ä»¶ã€‚å¦‚ä¸‹åœ¨<code>webpack/lib/Parser.js</code>é‡Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¸‰ä¸ªé’©å­å‡½æ•°<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">varDeclaration: <span class="keyword">new</span> HookMap(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> SyncBailHook([<span class="string">"declaration"</span>])),</span><br><span class="line">varDeclarationLet: <span class="keyword">new</span> HookMap(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> SyncBailHook([<span class="string">"declaration"</span>])),</span><br><span class="line">varDeclarationConst: <span class="keyword">new</span> HookMap(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> SyncBailHook([<span class="string">"declaration"</span>])),</span><br></pre></td></tr></table></figure></p>
<h2 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h2><p>è´Ÿè´£ç”Ÿæˆè¿è¡Œæ—¶çš„ä»£ç <br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æºç </span></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line">    <span class="keyword">var</span> multiply  = <span class="built_in">require</span>(<span class="string">'./multiply'</span>)</span><br><span class="line">    <span class="keyword">var</span> sum = <span class="function">(<span class="params">a,b</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a+b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">module</span>.exports = sum;</span><br><span class="line"><span class="comment">// multiply.js</span></span><br><span class="line">    <span class="built_in">module</span>.exports = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a*b</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆçš„runtime</span></span><br><span class="line">[</span><br><span class="line"><span class="comment">/* 0 */</span></span><br><span class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> multiply  = __webpack_require__(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">var</span> sum = <span class="function">(<span class="params">a,b</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a+b;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">module</span>.exports = sum;</span><br><span class="line"><span class="comment">/***/</span> &#125;),</span><br><span class="line"><span class="comment">/* 1 */</span></span><br><span class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">module</span>.exports = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a*b</span><br><span class="line"><span class="comment">/***/</span> &#125;)</span><br><span class="line">];</span><br></pre></td></tr></table></figure></p>
<p>å¦‚ä¸Šé¢ä»£ç æ‰€ç¤ºï¼Œé‡Œé¢åŒ…å«ä¸‰ä¸ªæ¨¡æ¿ï¼Œåˆ†åˆ«è´Ÿè´£chunk, module, dependency. chunkæ˜¯åŒ…å«å¤šä¸ªæ¨¡å—çš„æ•°ç»„ï¼Œå°±æ˜¯å¤–é¢æ•°ç»„çš„å½¢å¼ï¼›moduleå°±æ˜¯é‡Œé¢ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°åŒ…å›´çš„éƒ¨åˆ†;dependencyå°±æ˜¯å°†åŸå…ˆ<code>import</code>, <code>require</code>ç­‰å¼•ç”¨æ¨¡å—éƒ¨åˆ†è½¬æ¢æˆ <code>__webpack_require__</code>.</p>
<h2 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h2><blockquote>
<p>ç›®å‰åªçœ‹åˆ°æ¨¡å—æ„å»ºé‚£éƒ¨åˆ†ï¼Œåç»­å†è¡¥å……â•®(â•¯_â•°)â•­ã€‚ã€‚ã€‚å¿ƒå¾—å°±æ˜¯åˆ©ç”¨å¥½vscodeçš„è°ƒè¯•å·¥å…·å¤šæ‰“æ–­ç‚¹~~</p>
</blockquote>
<p>ä»‹ç»å®Œäº†è¿™å…­ä¸ªå®ä¾‹ï¼Œä¸‹é¢å¤§è‡´è®²ä¸‹webpackçš„å·¥ä½œæµç¨‹ï¼Œwebpackåšçš„å·¥ä½œéå¸¸å¤šï¼Œè¿™é‡ŒåªæŒ‘ä¸»è¦çš„è®²ä¸‹ã€‚æ‹¬å·é‡Œçš„æ˜¯æºç æ‰€åœ¨çš„æ–‡ä»¶ä½ç½®ï¼Œä¸Šä¸‹æ–‡æ˜¯<code>node_modules/webpack</code>. æœ¬æµç¨‹åŸºäºwebpack4.30.0ç‰ˆæœ¬ã€‚</p>
<ol>
<li>é¦–å…ˆæ˜¯å°†é…ç½®æ–‡ä»¶è¯»å…¥ï¼Œwebpack4æœ‰é»˜è®¤é…ç½®<code>options = new WebpackOptionsDefaulter().process(options);</code>ä¼šä»¥ç”¨æˆ·çš„é…ç½®ä¸ºå…ˆã€‚Compilerè¿›è¡Œåˆ›å»º<code>compiler = new Compiler(options.context);</code>å°†é…ç½®é‡Œçš„pluginéƒ¨åˆ†è¿›è¡Œç»‘å®šè°ƒç”¨<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> plugin <span class="keyword">of</span> options.plugins) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> plugin === <span class="string">"function"</span>) &#123;</span><br><span class="line">        plugin.call(compiler, compiler);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        plugin.apply(compiler);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>è¿›è¡Œå…¶ä»–é…ç½®è®¾ç½®<code>compiler.options = new WebpackOptionsApply().process(options, compiler);</code><br> (lib/webpack.js)</p>
<ol start="2">
<li>æ¥ç€æ ¹æ®æ‰“åŒ…çš„ç›®æ ‡ï¼ˆweb, node, electronç­‰ï¼‰ç”Ÿæˆä¸åŒçš„æ‰“åŒ…æ¨¡æ¿<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> (options.target) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"web"</span>:</span><br><span class="line">        JsonpTemplatePlugin = <span class="built_in">require</span>(<span class="string">"./web/JsonpTemplatePlugin"</span>);</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"webworker"</span>:</span><br><span class="line">        ...</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>å› ä¸ºæµè§ˆå™¨ç«¯è¯·æ±‚å¼‚æ­¥åŠ è½½çš„æ¨¡å—ä¼šç±»ä¼¼jsonpæ’å…¥domä¸­<code>&lt;script&gt;</code>æ ‡ç­¾ï¼Œè€Œæ¯”å¦‚nodeç«¯æ˜¯æ²¡æœ‰domç»“æ„çš„ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> EntryOptionPlugin().apply(compiler);</span><br><span class="line">compiler.hooks.entryOption.call(options.context, options.entry);</span><br></pre></td></tr></table></figure></p>
<p>è¿™éƒ¨åˆ†æ˜¯å°†å…¥å£å¤„é…ç½®æ·»åŠ è°ƒç”¨<code>entryOption</code>é’©å­ã€‚<br>(lib/WebpackOptionsApply.js)</p>
<ol start="3">
<li>æ ¹æ®ä¸åŒæ¥å£ç±»å‹è°ƒç”¨ä¸åŒçš„ç±»ï¼Œwebpacké‡Œåˆ°å¤„éƒ½æ˜¯ç±»<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// lib/EntryOptionPlugin.js</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> entry === <span class="string">"string"</span> || <span class="built_in">Array</span>.isArray(entry)) &#123;</span><br><span class="line">        itemToPlugin(context, entry, <span class="string">"main"</span>).apply(compiler);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> entry === <span class="string">"object"</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> name <span class="keyword">of</span> <span class="built_in">Object</span>.keys(entry)) &#123;</span><br><span class="line">            itemToPlugin(context, entry[name], name).apply(compiler);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> entry === <span class="string">"function"</span>) &#123;</span><br><span class="line">        <span class="keyword">new</span> DynamicEntryPlugin(context, entry).apply(compiler);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>è¿™é‡Œä¸¾ä¾‹æ˜¯å•æ–‡ä»¶å…¥å£, åœ¨compilationé’©å­ä¸Šç»‘å®šï¼ˆå³<code>Compiler</code>åˆ›å»º<code>compilation</code>åè°ƒç”¨ï¼‰å›è°ƒï¼ŒæŒ‡å®šå½“å‰ä¾èµ–çš„æ¨¡å—ç”Ÿæˆæ–¹æ³•ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">compiler.hooks.compilation.tap(</span><br><span class="line">    <span class="string">"SingleEntryPlugin"</span>,</span><br><span class="line">    (compilation, &#123; normalModuleFactory &#125;) =&gt; &#123;</span><br><span class="line">        compilation.dependencyFactories.set(</span><br><span class="line">            SingleEntryDependency,</span><br><span class="line">            normalModuleFactory</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>(lib/SingleEntryPlugin.js)</p>
<ol start="4">
<li>åˆ›å»º<code>compilation</code> (lib/Compiler.js). <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> compilation = <span class="keyword">this</span>.createCompilation();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// lib/SingleEntryPlugin.js</span></span><br><span class="line">    compiler.hooks.make.tapAsync(</span><br><span class="line">        <span class="string">"SingleEntryPlugin"</span>,</span><br><span class="line">        (compilation, callback) =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; entry, name, context &#125; = <span class="keyword">this</span>;</span><br><span class="line">            <span class="keyword">const</span> dep = SingleEntryPlugin.createDependency(entry, name);</span><br><span class="line">            compilation.addEntry(context, dep, name, callback);</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™æ®µæ˜¯ä¹‹å‰æ³¨å†Œçš„ï¼Œä½†æ˜¯ä¼šåœ¨<code>compilation</code>åˆ›å»ºå®Œæˆå‰è°ƒç”¨ï¼Œæ˜¯ä¸ªå¼‚æ­¥é’©å­ã€‚<code>compilation</code>åˆ›å»ºå¥½åä¼ å…¥ï¼Œå®ƒä¼šå°†å…¥å£åˆ›å»ºä¸€ä¸ªä¾èµ–ã€‚</p>
<ol start="5">
<li>å¼€å§‹æ‰§è¡Œ<code>addEntry()</code>æ–¹æ³•ï¼Œåœ¨<code>addEntry</code>æ–¹æ³•é‡Œè°ƒç”¨<code>_addModuleChain</code>ï¼Œå°†å½“å‰å…¥å£æ–‡ä»¶åˆ›å»ºæ¨¡å—<code>moduleFactory.create</code>ï¼Œæ¨¡å—åˆ›å»ºå¥½åå¤„ç†å½“å‰æ¨¡å—çš„ä¾èµ–é¡¹<code>this.processModuleDependencies</code>. å°†ä¾èµ–åˆ›å»ºæ¨¡å—åå†ä¾æ¬¡è§£ææ¨¡å—çš„ä¾èµ–ã€‚ï¼ˆlib/Compilation.jsï¼‰</li>
</ol>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>ä¸»è¦è¿˜æ˜¯Seançš„è¯¾ç¨‹ <a href="https://frontendmasters.com/courses/webpack-plugins/" target="_blank" rel="noopener">webpack-plugins</a></p>
<p><a href="https://medium.com/webpack/the-contributors-guide-to-webpack-part-2-9fd5e658e08c" target="_blank" rel="noopener">contribute-to-webpack</a></p>
]]></content>
      <categories>
        <category>frontend</category>
        <category>bundler</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£es module</title>
    <url>/2019/05/01/es-module/</url>
    <content><![CDATA[<h2 id="æ¨¡å—ç³»ç»Ÿçš„ä½œç”¨"><a href="#æ¨¡å—ç³»ç»Ÿçš„ä½œç”¨" class="headerlink" title="æ¨¡å—ç³»ç»Ÿçš„ä½œç”¨"></a>æ¨¡å—ç³»ç»Ÿçš„ä½œç”¨</h2><p>ä¼ ç»Ÿscriptæ ‡ç­¾çš„ä»£ç åŠ è½½å®¹æ˜“å¯¼è‡´å…¨å±€ä½œç”¨åŸŸæ±¡æŸ“ï¼Œè€Œä¸”è¦ç»´ç³»ä¸€ç³»åˆ—scriptçš„ä¹¦å†™é¡ºåºï¼Œé¡¹ç›®ä¸€å¤§ï¼Œç»´æŠ¤èµ·æ¥è¶Šæ¥è¶Šå›°éš¾ã€‚æ¨¡å—ç³»ç»Ÿé€šè¿‡å£°æ˜å¼çš„æš´éœ²å’Œå¼•ç”¨æ¨¡å—ä½¿å¾—å„ä¸ªæ¨¡å—ä¹‹é—´çš„ä¾èµ–å˜å¾—æ˜æ˜¾ã€‚</p>
<h2 id="es-moduleçš„å†™æ³•"><a href="#es-moduleçš„å†™æ³•" class="headerlink" title="es moduleçš„å†™æ³•"></a>es moduleçš„å†™æ³•</h2><h3 id="named-export"><a href="#named-export" class="headerlink" title="named export"></a>named export</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> B = <span class="number">123</span>;</span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;A,B&#125; <span class="keyword">from</span> <span class="string">"a.js"</span></span><br><span class="line"><span class="comment">// è¿™é‡Œç”¨åˆ°äº†è§£æ„ destructuring</span></span><br></pre></td></tr></table></figure>
<h3 id="default-export"><a href="#default-export" class="headerlink" title="default export"></a>default export</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">import</span> B <span class="keyword">from</span> <span class="string">'./a.js'</span></span><br><span class="line"><span class="comment">// è¿™é‡Œéšä¾¿å–ä»€ä¹ˆåå­—</span></span><br></pre></td></tr></table></figure>
<h2 id="es-moduleå¦‚ä½•å·¥ä½œçš„"><a href="#es-moduleå¦‚ä½•å·¥ä½œçš„" class="headerlink" title="es moduleå¦‚ä½•å·¥ä½œçš„"></a>es moduleå¦‚ä½•å·¥ä½œçš„</h2><p>è¿™éƒ¨åˆ†æ¨èå»çœ‹<a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/" target="_blank" rel="noopener">es-modules-a-cartoon-deep-dive</a>ï¼ŒåŸæ–‡é‡Œæœ‰å›¾ï¼Œä»¥ä¸‹çš„å†…å®¹æ˜¯ä¸ªäººç†è§£æ•´ç†ã€‚</p>
<p><strong>åˆ†ä¸‰æ­¥ï¼š</strong></p>
<ol>
<li>æ„é€ ï¼Œå¯»æ‰¾å¹¶ä¸”ä¸‹è½½æ‰€æœ‰çš„æ–‡ä»¶å¹¶ä¸”è§£ææˆæ¨¡å—è®°å½•ï¼ˆModule Recordsï¼‰ï¼ˆåŒ…å«å½“å‰æ¨¡å—ä»£ç çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œå½“å‰æ¨¡å—çš„ä¾èµ–æ¨¡å—çš„ä¿¡æ¯ï¼‰ã€‚</li>
<li>å®ä¾‹åŒ–ï¼Œå°†æ¨¡å—è®°å½•å®ä¾‹åŒ–å°†å„ä¸ªæ¨¡å—ä¹‹é—´çš„importï¼Œexportéƒ¨åˆ†å¯¹åº”çš„éƒ½åœ¨å†…å­˜ä¸­æŒ‡å‘åˆ°ä¸€èµ·ï¼ˆlinkingï¼‰</li>
<li>æ‰§è¡Œï¼Œå°†import, exportå†…å­˜é‡ŒæŒ‡å‘çš„åœ°å€å¡«ä¸Šå®é™…çš„å€¼ã€‚</li>
</ol>
<a id="more"></a>
<h3 id="æ„é€ é˜¶æ®µï¼ˆConstructionï¼‰"><a href="#æ„é€ é˜¶æ®µï¼ˆConstructionï¼‰" class="headerlink" title="æ„é€ é˜¶æ®µï¼ˆConstructionï¼‰"></a>æ„é€ é˜¶æ®µï¼ˆConstructionï¼‰</h3><p>æ„é€ é˜¶æ®µè¦åšä¸‰ä»¶äº‹æƒ…ï¼š</p>
<h4 id="è§£é‡Šï¼ˆinterpretï¼‰importåçš„æ¨¡å—æŒ‡ç¤ºç¬¦ï¼ˆmodule-specifierï¼‰æˆå®é™…urlæˆ–è€…æ–‡ä»¶åœ°å€"><a href="#è§£é‡Šï¼ˆinterpretï¼‰importåçš„æ¨¡å—æŒ‡ç¤ºç¬¦ï¼ˆmodule-specifierï¼‰æˆå®é™…urlæˆ–è€…æ–‡ä»¶åœ°å€" class="headerlink" title="è§£é‡Šï¼ˆinterpretï¼‰importåçš„æ¨¡å—æŒ‡ç¤ºç¬¦ï¼ˆmodule specifierï¼‰æˆå®é™…urlæˆ–è€…æ–‡ä»¶åœ°å€"></a>è§£é‡Šï¼ˆinterpretï¼‰importåçš„æ¨¡å—æŒ‡ç¤ºç¬¦ï¼ˆmodule specifierï¼‰æˆå®é™…urlæˆ–è€…æ–‡ä»¶åœ°å€</h4><p>ä¸åŒå¹³å°æ ¹æ®è‡ªå·±å¹³å°çš„æ¨¡å—è§£æç®—æ³•ï¼ˆModule Resolution Algorithmï¼‰è§£é‡Šæ¨¡å—æŒ‡ç¤ºç¬¦ï¼Œæµè§ˆå™¨ç«¯ç›®å‰åªæ¥å—urlåšä¸ºæŒ‡ç¤ºç¬¦ã€‚ä¸è¿‡æµè§ˆå™¨å°†æ¥ä¼šåŒæ ·æ”¯æŒå†…ç½®æ¨¡å—æ¯”å¦‚<a href="https://alligator.io/js/kv-storage/" target="_blank" rel="noopener">kv-storage</a>ã€‚</p>
<h5 id="æ¨¡å—æŒ‡ç¤ºç¬¦é‡Œçš„å˜é‡"><a href="#æ¨¡å—æŒ‡ç¤ºç¬¦é‡Œçš„å˜é‡" class="headerlink" title="æ¨¡å—æŒ‡ç¤ºç¬¦é‡Œçš„å˜é‡"></a>æ¨¡å—æŒ‡ç¤ºç¬¦é‡Œçš„å˜é‡</h5><p>æ¨¡å—æŒ‡ç¤ºç¬¦é‡Œä¸èƒ½æœ‰å˜é‡ä½†æ˜¯nodeä¸­commonJSæ˜¯å¯ä»¥æœ‰çš„ï¼Œå› ä¸ºåœ¨commonJSçš„æ¨¡å—ä»£ç é‡Œï¼Œ<code>require</code>å£°æ˜å‰çš„ä»£ç æ˜¯ä¼šå…ˆæ‰§è¡Œçš„ï¼Œes moduleæ˜¯æœ€åä¸€æ­¥å†å»æ‰§è¡Œï¼Œè¿™ä¸€æ­¥æ‰çŸ¥é“å„ä¸ªå˜é‡çš„å…·ä½“å€¼æ˜¯å¤šå°‘ã€‚æ‰€ä»¥å¯ä»¥åœ¨nodeä¸­æœ‰å¦‚ä¸‹å†™æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">`<span class="subst">$&#123;path&#125;</span>/sum.js`</span>);</span><br></pre></td></tr></table></figure></p>
<p>ä¸è¿‡es moduleé‡Œæœ‰å¦ä¸€ç§å†™æ³•åŠ¨æ€å¼•å…¥<code>import()</code>å¯ä»¥æ”¯æŒåœ¨ä»£ç æ‰§è¡Œæ—¶åŠ¨æ€å¼•å…¥æ¨¡å—ï¼Œå¯ä»¥åœ¨æŒ‡ç¤ºç¬¦é‡Œæºå¸¦å˜é‡<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">`<span class="subst">$&#123;path&#125;</span>/sum.js`</span>);</span><br></pre></td></tr></table></figure></p>
<h4 id="æµè§ˆå™¨æ ¹æ®urlä¸‹è½½æ–‡ä»¶æˆ–è€…nodeæ ¹æ®æ–‡ä»¶åœ°å€å»åŠ è½½æ–‡ä»¶"><a href="#æµè§ˆå™¨æ ¹æ®urlä¸‹è½½æ–‡ä»¶æˆ–è€…nodeæ ¹æ®æ–‡ä»¶åœ°å€å»åŠ è½½æ–‡ä»¶" class="headerlink" title="æµè§ˆå™¨æ ¹æ®urlä¸‹è½½æ–‡ä»¶æˆ–è€…nodeæ ¹æ®æ–‡ä»¶åœ°å€å»åŠ è½½æ–‡ä»¶"></a>æµè§ˆå™¨æ ¹æ®urlä¸‹è½½æ–‡ä»¶æˆ–è€…nodeæ ¹æ®æ–‡ä»¶åœ°å€å»åŠ è½½æ–‡ä»¶</h4><h4 id="å°†æ–‡ä»¶è§£ææˆæ¨¡å—è®°å½•"><a href="#å°†æ–‡ä»¶è§£ææˆæ¨¡å—è®°å½•" class="headerlink" title="å°†æ–‡ä»¶è§£ææˆæ¨¡å—è®°å½•"></a>å°†æ–‡ä»¶è§£ææˆæ¨¡å—è®°å½•</h4><p>æµè§ˆå™¨è§£æå¸¸è§„jsæ–‡ä»¶æ—¶ä¼šè§£æå®Œåå†æ‰§è¡Œã€‚å’Œæ¨¡å—çš„è§£æç­–ç•¥ä¸ä¸€æ ·ï¼Œè¿™é‡Œè¦å‘Šè¯‰æµè§ˆå™¨è§£æçš„æ˜¯ä¸ªæ¨¡å—ã€‚åœ¨htmlä¸­ï¼š<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123;sum&#125; <span class="keyword">from</span> <span class="string">"./sum.js"</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>ps: åœ¨nodeä¸­å› ä¸ºæ²¡æœ‰æµè§ˆå™¨è¿™ç§ç±»ä¼¼æ‰“tagçš„å½¢å¼ï¼Œæœ‰ç§æ–¹æ¡ˆæ˜¯æ¨¡å—æ–‡ä»¶æ˜¯<code>.mjs</code>åç¼€ç»“å°¾çš„æ–¹æ¡ˆï¼Œä¸è¿‡ç›®å‰å°šæœªæ•²å®šã€‚</p>
<p>è§£ææ¨¡å—æ–‡ä»¶ä¸ºæ¨¡å—è®°å½•ï¼Œæ‰¾åˆ°ä¾èµ–çš„æ¨¡å—å†å»ä¸‹è½½æ¨¡å—ç„¶åè§£ææˆæ¨¡å—è®°å½•ï¼Œç›´åˆ°æ‰€æœ‰çš„æ¨¡å—éƒ½è§£ææˆæ¨¡å—è®°å½•ä¸ºæ­¢ã€‚æ¨¡å—è®°å½•ä¼šå­˜åœ¨å½“å‰å…¨å±€çš„ä¸€ä¸ªæ¨¡å—æ˜ å°„é‡Œï¼ˆModule Mapï¼‰,å¯ä»¥ç†è§£æˆä¸€ä¸ªç¼“å­˜ï¼Œä¸‹æ¬¡å†æœ‰ç›¸åŒurlçš„æ¨¡å—è¯·æ±‚å°±ç›´æ¥ä»æ¨¡å—æ˜ å°„é‡Œæ‹¿å‡ºæ¨¡å—è®°å½•å³å¯ã€‚</p>
<h3 id="å®ä¾‹åŒ–é˜¶æ®µ"><a href="#å®ä¾‹åŒ–é˜¶æ®µ" class="headerlink" title="å®ä¾‹åŒ–é˜¶æ®µ"></a>å®ä¾‹åŒ–é˜¶æ®µ</h3><p>å°†ä¸Šé¢å¾—åˆ°çš„æ¨¡å—è®°å½•ç±»å®ä¾‹åŒ–ã€‚<br>é¦–å…ˆåœ¨å†…å­˜ä¸­æŒ‡å®šä½ç½®ç»™å„ä¸ªæ¨¡å—çš„<code>export</code>å¯¼å‡ºçš„å˜é‡æˆ–è€…å‡½æ•°ï¼Œæ¥ç€å°†æ¨¡å—ä¸­å¯¹åº”çš„<code>import</code>éƒ¨åˆ†åŒæ ·æŒ‡å‘å¯¹åº”çš„<code>export</code>çš„å†…å­˜åœ°å€ã€‚<br>ä¸¾ä¸ªğŸŒ°<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;obj&#125; <span class="keyword">from</span> <span class="string">"./obj.js"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// obj.js</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">a</span>: <span class="number">123</span>&#125;;</span><br><span class="line"><span class="keyword">export</span> &#123;obj&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>obj.js</code>æ–‡ä»¶é‡Œå¯¼å‡ºçš„<code>obj</code>å’Œ<code>main.js</code>æ–‡ä»¶é‡Œå¼•ç”¨çš„<code>obj</code>æ˜¯æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€çš„ï¼Œè¿™ç§æ–¹æ³•å°±æ˜¯åŠ¨æ€ç»‘å®šï¼ˆlive bindingï¼‰ã€‚<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'module'</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123;obj&#125; <span class="keyword">from</span> <span class="string">"./obj.js"</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(obj);  <span class="comment">//&#123;a: 123&#125;</span></span></span><br><span class="line"><span class="javascript">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">   <span class="built_in">console</span>.log(obj)  <span class="comment">//&#123;b: 233&#125;</span></span></span><br><span class="line"><span class="undefined">  &#125;, 2000);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    a: <span class="number">123</span></span><br><span class="line">&#125;;</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    obj = &#123; <span class="attr">b</span>: <span class="number">233</span> &#125;;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"><span class="keyword">export</span> &#123; obj &#125;;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹nodeä¸­åŒæ ·çš„ä»£ç çš„æ•ˆæœã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// test1.js</span></span><br><span class="line">    <span class="keyword">var</span> obj = <span class="built_in">require</span>(<span class="string">"./test2.js"</span>);</span><br><span class="line">    <span class="built_in">console</span>.dir(obj); <span class="comment">// &#123;a: 123&#125;</span></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.dir(obj); <span class="comment">// &#123;a: 123&#125;</span></span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line"><span class="comment">// test2.js</span></span><br><span class="line">    <span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">123</span> &#125;;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    obj = &#123; <span class="attr">b</span>: <span class="number">233</span> &#125;;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    <span class="built_in">module</span>.exports = obj;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨commonJSä¸­<code>require</code>ä¸€ä¸ªå¯¹è±¡æ˜¯åœ¨å†…å­˜ä¸­å¤åˆ¶ä¸€ä»½å¯¼å‡ºæ¨¡å—çš„å¯¹è±¡ã€‚åŠ¨æ€ç»‘å®šä¸»è¦è§£å†³çš„é—®é¢˜å°±æ˜¯å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå¾ªç¯å¼•ç”¨åœ¨ä¸‹é¢çš„æ‰§è¡Œé˜¶æ®µè¿›è¡Œè§£é‡Šã€‚<br><em>æ³¨æ„ï¼š</em><br>es moduleä¸­å¯ä»¥åœ¨æ¨¡å—å¯¼å‡ºçš„éƒ¨åˆ†æ›´æ”¹å¯¼å‡ºå€¼å¦‚ä¸Šé¢ä»£ç æ‰€ç¤ºï¼Œä½†æ˜¯ä¸èƒ½åœ¨å¼•å…¥éƒ¨åˆ†æ›´æ”¹ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;obj&#125; <span class="keyword">from</span> <span class="string">"./sum.js"</span></span><br><span class="line">obj = <span class="string">'233'</span>  <span class="comment">// Uncaught TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure></p>
<p>å¦‚ä¸ŠæŠ¥é”™ä¼šæç¤ºä¸èƒ½ç»™å¸¸é‡èµ‹å€¼ï¼Œä¸è¿‡å¦‚æœæ˜¯å¯¹è±¡çš„è¯å¯ä»¥æ›´æ”¹å†…éƒ¨çš„keyï¼Œç”±äºåŠ¨æ€ç»‘å®šçš„åŸå› ï¼Œå¯¼å‡ºéƒ¨åˆ†ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">    <span class="keyword">import</span> &#123;obj&#125; <span class="keyword">from</span> <span class="string">"./obj.js"</span></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        obj.a = <span class="string">'å˜»å˜»'</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line"><span class="comment">// obj.js</span></span><br><span class="line">    <span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">123</span> &#125;;</span><br><span class="line">    <span class="built_in">console</span>.log(obj); <span class="comment">// &#123;a: 123&#125;</span></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(obj); <span class="comment">// &#123;a: "å˜»å˜»"&#125;</span></span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">    <span class="keyword">export</span> &#123; obj &#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="æ‰§è¡Œé˜¶æ®µï¼ˆevaluateï¼‰"><a href="#æ‰§è¡Œé˜¶æ®µï¼ˆevaluateï¼‰" class="headerlink" title="æ‰§è¡Œé˜¶æ®µï¼ˆevaluateï¼‰"></a>æ‰§è¡Œé˜¶æ®µï¼ˆevaluateï¼‰</h3><p>åŸæ–‡ä¸­æ˜¯evaluateï¼Œæˆ‘è¿™é‡Œç†è§£æˆäº†æ‰§è¡Œï¼Œå¦‚æœ‰ä¸å¯¹æ¬¢è¿æŒ‡å‡ºã€‚å¼•æ“å¼€å§‹æ‰§è¡Œæ¨¡å—äº†ï¼Œæ¯ä¸ªæ¨¡å—åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ã€‚åœ¨ä¸Šé¢æåˆ°è¿‡çš„module mapé‡Œçš„æ¨¡å—è®°å½•é‡Œä¼šå­˜æœ‰å½“å‰æ¨¡å—çš„çŠ¶æ€æ˜¯å®ä¾‹åŒ–ä¸­è¿˜æ˜¯å®ä¾‹å®Œæˆè¿˜æ˜¯æ‰§è¡Œå®Œæˆç­‰ã€‚å¯ä»¥é¿å…åŒä¸€ä¸ªæ¨¡å—æ–‡ä»¶è¢«å¤šæ¬¡æ‰§è¡Œã€‚</p>
<h4 id="å¾ªç¯å¼•ç”¨é—®é¢˜"><a href="#å¾ªç¯å¼•ç”¨é—®é¢˜" class="headerlink" title="å¾ªç¯å¼•ç”¨é—®é¢˜"></a>å¾ªç¯å¼•ç”¨é—®é¢˜</h4><p>å¦‚ä¸‹åœ¨<strong>node</strong>ä¸­ï¼Œä¸¤ä¸ªæ¨¡å—äº’ç›¸å¼•ç”¨ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// test1.js</span></span><br><span class="line">    <span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">"./test2"</span>).b;</span><br><span class="line">    <span class="built_in">console</span>.dir(<span class="string">"test1: "</span> + b);  <span class="comment">// 'test1: test2' ğŸ¥ˆ</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">"test1"</span>;</span><br><span class="line">    exports.a = a;</span><br><span class="line"><span class="comment">// test2.js</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">"./test1"</span>).a;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"test2: "</span> + a);  <span class="comment">// test2: undefined ğŸ¥‡</span></span><br><span class="line">    <span class="keyword">var</span> b = <span class="string">"test2"</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"test2: "</span> + a); <span class="comment">// test2: undefined ğŸ¥‰</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    exports.b = b;</span><br><span class="line"></span><br><span class="line">    node test1.js <span class="comment">// å¯åŠ¨</span></span><br></pre></td></tr></table></figure></p>
<p><em>ps: emojié‡Œè¡¨ç¤ºæ‰“å°é¡ºåº</em><br>nodeæ‰§è¡ŒæŸä¸ªæ¨¡å—æ—¶ä¼šå°†å½“å‰æ¨¡å—çš„ä»£ç æ”¾å…¥å‡½æ•°ä¸­ï¼Œå‘è¿™ä¸ªå‡½æ•°ä¼ é€’<code>module</code>, <code>module.exports</code>, <code>__dirname</code>ç­‰å‚æ•°ã€‚åˆå§‹çš„<code>module</code>å°±æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ã€‚<br>test1.jsæ‰§è¡Œé‡åˆ°<code>require(&#39;./test2)</code>æ—¶ä¼šè¿›å…¥test2æ¨¡å—å¼€å§‹æ‰§è¡Œï¼Œè¿™ä¸ªæ—¶å€™åˆç¢°åˆ°å¼•ç”¨test1æ¨¡å—çš„ä¸œè¥¿ï¼›å› ä¸ºtest1æ¨¡å—æ²¡æœ‰æ‰§è¡Œå®Œæˆï¼Œå®ƒçš„<code>module.exports</code>è¿˜æ˜¯ç©ºå¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™test2é‡Œçš„<code>a</code>æ˜¯<code>undefined</code>ã€‚å› ä¸ºcommonJSä¸æ˜¯åŠ¨æ€ç»‘å®šçš„ï¼Œsoç­‰åˆ°test1æ¨¡å—æ‰§è¡Œå®Œ<code>a</code>å˜é‡é‡Œè¿˜æ˜¯<code>undefined</code><br><strong>es module</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// es1 </span></span><br><span class="line">    <span class="keyword">import</span> &#123; b &#125; <span class="keyword">from</span> <span class="string">"./es2.js"</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"es1: "</span> + b); <span class="comment">// es1: es2 ğŸ¥ˆ</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">"es1"</span>;</span><br><span class="line">    <span class="keyword">export</span> &#123; a &#125;;</span><br><span class="line"><span class="comment">// es2</span></span><br><span class="line">    <span class="keyword">import</span> &#123; a &#125; <span class="keyword">from</span> <span class="string">"./es1.js"</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"es2: "</span> + a); <span class="comment">// es2: undefined ğŸ¥‡</span></span><br><span class="line">    <span class="keyword">var</span> b = <span class="string">"es2"</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"es2: "</span> + a); <span class="comment">// es2: es1 ğŸ¥‰</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">export</span> &#123; b &#125;;</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šä»£ç å…¥å£æ˜¯es1æ–‡ä»¶ã€‚æ ¹æ®æ‰“å°é¡ºåºæ¥çœ‹å…ˆæ˜¯æ‰§è¡Œçš„es2æ¨¡å—ï¼Œä¹‹åes1é‡Œçš„<code>a</code>å¡«å……äº†å®é™…å€¼ï¼Œç”±äºæ˜¯åŠ¨æ€ç»‘å®šes2ä¸­çš„<code>a</code>ä¸­çš„å€¼ä¹Ÿåœ¨ä¹‹åèƒ½å–åˆ°å€¼äº†ã€‚</p>
<h2 id="es-moduleçš„å¥½å¤„"><a href="#es-moduleçš„å¥½å¤„" class="headerlink" title="es moduleçš„å¥½å¤„"></a>es moduleçš„å¥½å¤„</h2><ol>
<li>åŠ¨æ€ç»‘å®šè§£å†³äº†å¾ªç¯è°ƒç”¨çš„é—®é¢˜ï¼ˆè§ä¸Šæ–‡ï¼‰</li>
<li>é™æ€åˆ†æï¼ˆstatically analysisï¼‰<br>å› ä¸ºåœ¨ä»£ç æœªæ‰§è¡Œé˜¶æ®µå°±å·²ç»çŸ¥é“å½“å‰æ¨¡å—å¯¼å…¥äº†ä»€ä¹ˆï¼Œå¯¼å‡ºäº†ä»€ä¹ˆï¼Œæ‰€ä»¥æœ‰äº›å·¥å…·å°±å¯ä»¥è¿›è¡Œé™æ€åˆ†æã€‚æ¯”å¦‚vscodeä¸­å¼•å…¥æ¨¡å—ä»£ç æ—¶ä¼šæç¤ºå½“å‰æ¨¡å—é‡Œå¯¼å‡ºçš„å†…å®¹ã€‚</li>
</ol>
<h2 id="es-moduleçš„åå¤„"><a href="#es-moduleçš„åå¤„" class="headerlink" title="es moduleçš„åå¤„"></a>es moduleçš„åå¤„</h2><ol>
<li>å…¼å®¹æ€§</li>
<li>å°šæœªæœ‰é’ˆå¯¹nodeçš„è§£å†³æ–¹æ¡ˆ</li>
</ol>
<h2 id="å¾…è§£å†³é—®é¢˜"><a href="#å¾…è§£å†³é—®é¢˜" class="headerlink" title="å¾…è§£å†³é—®é¢˜"></a>å¾…è§£å†³é—®é¢˜</h2><p>ä¸ºä»€ä¹ˆmodule recordsæ˜¯ä¸ªç±»ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰ä¸ªmodule recordsä½†æ˜¯å®ƒä¹Ÿåªæ˜¯å®ä¾‹åŒ–ä¸€ä¸ªå®ä¾‹ï¼Œé‚£ç±»çš„ä½œç”¨æ˜¯ä»€ä¹ˆã€‚è¿™éƒ¨åˆ†éœ€è¦ä»”ç»†çœ‹ä¸‹è§„èŒƒ~~</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/" target="_blank" rel="noopener">es-modules-a-cartoon-deep-dive</a></p>
<p><a href="http://2ality.com/2015/07/es6-module-exports.html" target="_blank" rel="noopener">module-exports</a></p>
<p><a href="https://tc39.github.io/ecma262/#sec-abstract-module-records" target="_blank" rel="noopener">ecma262</a></p>
]]></content>
      <categories>
        <category>frontend</category>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>module</tag>
      </tags>
  </entry>
  <entry>
    <title>webpack4 åŸºç¡€ğŸ±</title>
    <url>/2019/05/01/webpack4-fundamental/</url>
    <content><![CDATA[<p>æ ¹æ®Seanåœ¨ frontend mastersä¸Šçš„è¯¾ç¨‹åŠ ä¸Šä¸ªäººçš„ç†è§£<br>Sean æ˜¯ webpack çš„æ ¸å¿ƒè´¡çŒ®è€…å“¦ğŸ˜¯<a href="https://github.com/thelarkinn/webpack-workshop-2018" target="_blank" rel="noopener">è¯¾ç¨‹ä»£ç </a></p>
<h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨webpack"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨webpack" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨webpack"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨webpack</h2><h3 id="ä¼ ç»Ÿæ–¹æ³•åœ¨æµè§ˆå™¨ä¸­æ‰§è¡ŒJS"><a href="#ä¼ ç»Ÿæ–¹æ³•åœ¨æµè§ˆå™¨ä¸­æ‰§è¡ŒJS" class="headerlink" title="ä¼ ç»Ÿæ–¹æ³•åœ¨æµè§ˆå™¨ä¸­æ‰§è¡ŒJS"></a>ä¼ ç»Ÿæ–¹æ³•åœ¨æµè§ˆå™¨ä¸­æ‰§è¡ŒJS</h3><ol>
<li>ä¸€ä¸ªåŠŸèƒ½åŠ è½½ä¸€ä¸ªscript æ ‡ç­¾ e.g. <code>Jquery</code> , <code>Swiper</code></li>
<li>åŠ è½½ä¸€ä¸ªå·¨å¤§çš„JSæ–‡ä»¶ã€‚</li>
</ol>
<h4 id="scriptæ ‡ç­¾åŠ è½½çš„å¼Šç«¯"><a href="#scriptæ ‡ç­¾åŠ è½½çš„å¼Šç«¯" class="headerlink" title="scriptæ ‡ç­¾åŠ è½½çš„å¼Šç«¯"></a>scriptæ ‡ç­¾åŠ è½½çš„å¼Šç«¯</h4><ol>
<li>æ‰©å±•æ€§å¤ªå·®ï¼Œæ ‡ç­¾å¾ˆå¤šçš„æƒ…å†µä¸‹ç»´æŒæ ‡ç­¾çš„é¡ºåºå¾ˆç—›è‹¦ã€‚</li>
<li>å…¨å±€å˜é‡æ±¡æŸ“</li>
<li>åŠ è½½è¿‡å¤šçš„JSæ–‡ä»¶æœ‰åŠ è½½æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºæµè§ˆå™¨çš„å¹¶è¡Œè¿æ¥æ•°æœ‰é™åˆ¶ã€‚å¯ä»¥å‚è€ƒ<a href="https://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser" target="_blank" rel="noopener">html - Max parallel http connections in a browser? - Stack Overflow</a><a id="more"></a>
</li>
</ol>
<h4 id="å•ç‹¬ä¸€ä¸ªJSæ–‡ä»¶çš„å¼Šç«¯"><a href="#å•ç‹¬ä¸€ä¸ªJSæ–‡ä»¶çš„å¼Šç«¯" class="headerlink" title="å•ç‹¬ä¸€ä¸ªJSæ–‡ä»¶çš„å¼Šç«¯"></a>å•ç‹¬ä¸€ä¸ªJSæ–‡ä»¶çš„å¼Šç«¯</h4><p>è¿™é‡Œåº”è¯¥æ˜¯è¯´æ‰€æœ‰ä»£ç å†™åœ¨ä¸€èµ·ï¼Œä¸æ˜¯æŒ‰ç…§æ¨¡å—ç»„ç»‡æœ€åæ‰“åŒ…å‡ºä¸€ä¸ªæ–‡ä»¶æ¥çš„ã€‚</p>
<ol>
<li>ä¸åŒåŠŸèƒ½çš„ä½œç”¨åŸŸé—®é¢˜</li>
<li>ç”¨æˆ·éœ€è¦åŠ è½½çš„æ–‡ä»¶è¿‡å¤§ã€‚</li>
<li>ç»´æŠ¤æ€§å’Œå¯è¯»æ€§å¾ˆå·®ã€‚</li>
</ol>
<h3 id="ç«‹å³æ‰§è¡Œå‡½æ•°IIFEs"><a href="#ç«‹å³æ‰§è¡Œå‡½æ•°IIFEs" class="headerlink" title="ç«‹å³æ‰§è¡Œå‡½æ•°IIFEs"></a>ç«‹å³æ‰§è¡Œå‡½æ•°IIFEs</h3><p>Immediately invoked function expressions<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> outerScope = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> whatever = (<span class="function"><span class="keyword">function</span>(<span class="params">dataNowUsedInside</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> outerScope = <span class="number">4</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    someAttribute: <span class="string">"you want"</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(outerScope);  <span class="comment">//1</span></span><br></pre></td></tr></table></figure></p>
<p>ç«‹å³æ‰§è¡Œå‡½æ•°å¯ä»¥è§£å†³ä½œç”¨åŸŸå†²çªçš„é—®é¢˜ï¼Œå¦‚ä¸Šå› ä¸ºå‡½æ•°ä½œç”¨åŸŸçš„å­˜åœ¨ä¸ä¼šæ±¡æŸ“å¤–éƒ¨ä½œç”¨åŸŸã€‚<br>PS: å¦å¤–ä¸Šé¢çš„è¿™ä¸ªæš´éœ²å‡ºä¸€ä¸ªæ¨¡å—çš„æ¨¡å¼å«<em>Revealing Module pattern</em> å¯ä»¥å‚è€ƒ <a href="https://addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript" target="_blank" rel="noopener">Learning JavaScript Design Patterns</a></p>
<p><code>Make</code>, <code>Gulp</code>, <code>Grunt</code>, <code>Broccoli</code> ,  <code>Brunch</code> è¿™äº›å·¥å…·é€šè¿‡ä¸€ä¸ªæ–‡ä»¶å½“åšä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œå°†è¿™äº›ç«‹å³æ‰§è¡Œå‡½æ•°è¿æ¥èµ·æ¥æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<p>è¿™äº›å·¥å…·çš„å¼Šç«¯ï¼š</p>
<ol>
<li>æ¯æ¬¡æ›´æ”¹ä¸€ä¸ªæ–‡ä»¶éƒ½è¦é‡æ–°æ„å»ºæ‰€æœ‰æ–‡ä»¶</li>
<li>æ— æ³•å‰”é™¤æ²¡æœ‰ä½¿ç”¨è¿‡çš„ä»£ç ï¼Œæ¯”å¦‚å¼•å…¥<code>Lodash</code>, å°±ç”¨äº†å‡ ä¸ªå‡½æ•°ï¼Œç»“æœ500Kbçš„æ–‡ä»¶éƒ½è¢«å¼•å…¥äº†ã€‚</li>
<li>ç«‹å³æ‰§è¡Œå‡½æ•°è¿‡å¤šçš„è¯å¯èƒ½ä¼šé€ æˆæ€§èƒ½é—®é¢˜ã€‚ å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://nolanlawson.com/2016/08/15/the-cost-of-small-modules/" target="_blank" rel="noopener">The cost of small modules | Read the Tea Leaves</a>ã€‚æ–‡ç« é‡Œæåˆ°ä¸€ä¸ªæ˜¯å‡½æ•°å†…åµŒå¥—å‡½æ•°ï¼Œè¿˜æœ‰åœ¨å…³è”æ•°ç»„ä¸­æŸ¥çœ‹æ¨¡å—åœ¨æ¨¡å—è¶Šæ¥è¶Šå¤šçš„æƒ…å†µä¸‹ä¼šæš´éœ²å‡ºæ„å¤–çš„æ€§èƒ½é—®é¢˜ã€‚å¦å¤–ç«‹å³æ‰§è¡Œå‡½æ•°ä¼šå¯¼è‡´å¼•æ“ç«‹åˆ»è§£æå‡½æ•° (eager parse)ï¼Œå¤§é‡çš„ç«‹å³æ‰§è¡Œå‡½æ•°ä¹Ÿä¼šå¯¼è‡´åº”ç”¨è§£æå˜æ…¢ã€‚</li>
<li>æ²¡æ³•åšæ‡’åŠ è½½ã€‚</li>
</ol>
<h3 id="Javascriptæ¨¡å—ä¼˜ç¼ºç‚¹"><a href="#Javascriptæ¨¡å—ä¼˜ç¼ºç‚¹" class="headerlink" title="Javascriptæ¨¡å—ä¼˜ç¼ºç‚¹"></a>Javascriptæ¨¡å—ä¼˜ç¼ºç‚¹</h3><h4 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h4><p><code>node</code>é‡Œæ²¡æœ‰<code>&lt;script&gt;</code>æ ‡ç­¾ï¼Œæ€ä¹ˆåŠ è½½JSä»£ç å‘¢ï¼Œäºæ˜¯å‡ºæ¥äº†CommonJS. </p>
<ol>
<li>ä½†æ˜¯ CommonJS ä¸æ”¯æŒæµè§ˆå™¨</li>
<li>æ²¡æœ‰åŠ¨æ€ç»‘å®šï¼Œä»€ä¹ˆæ˜¯åŠ¨æ€ç»‘å®šå¯ä»¥å‚è€ƒ <a href="/2019/05/01/es-module/" title="æ·±å…¥ç†è§£es module">æ·±å…¥ç†è§£es module</a></li>
<li>CommonJSè§£æç®—æ³•æ…¢ï¼Œå› ä¸ºå®ƒæ˜¯åŒæ­¥çš„</li>
<li>æ²¡æœ‰é™æ€åˆ†æï¼Œæ²¡æ³•å‰”é™¤æ— ç”¨ä»£ç </li>
</ol>
<h4 id="æ‰“åŒ…å™¨"><a href="#æ‰“åŒ…å™¨" class="headerlink" title="æ‰“åŒ…å™¨"></a>æ‰“åŒ…å™¨</h4><p>å¼€å‘è€…ä¸æ„¿æ„ä»æŸä¸ªåº“çš„ç½‘ä¸Šä¸‹è½½JSæ–‡ä»¶ç„¶åæ”¾åˆ°é¡¹ç›®ä¸­æ¥ï¼Œä»–ä»¬æƒ³é€šè¿‡NPMåˆ†äº«æ¨¡å—ä»£ç ã€‚ä½†æ˜¯NPMä¸Šçš„æ˜¯CommonJsæ¨¡å—çš„ï¼Œæ‰€ä»¥å°±å‡ºç°äº†<code>Browserify</code> ä¹‹ç±»çš„å·¥å…·æŠŠCommonJSé£æ ¼çš„ä»£ç è§£æ<code>require</code>å£°æ˜ï¼ŒæŒ‰ç…§ä½ å¼•ç”¨çš„é¡ºåºæ‰“åŒ…æˆæµè§ˆå™¨å¯ä»¥æ‰§è¡Œçš„ä»£ç ã€‚</p>
<h4 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h4><p>é™¤äº†CommonJSè¿˜æœ‰å¾ˆå¤šæ¨¡å—åŠ è½½æ¨¡å¼ã€‚ç”šè‡³è¿˜æœ‰AMD+CommonJSçš„æ¨¡å—åŠ è½½æ¨¡å¼ã€‚</p>
<p>æ²¡æœ‰çœŸæ­£çš„æ¨¡å—ç³»ç»Ÿï¼Œæ²¡æœ‰node æµè§ˆå™¨éƒ½æ”¯æŒçš„ã€‚ç›´åˆ°<code>ESM</code>çš„å‡ºç°ã€‚</p>
<h4 id="ESM"><a href="#ESM" class="headerlink" title="ESM"></a>ESM</h4><p>ES2015å’Œæ¨¡å—æ˜¯ç‹¬ç«‹çš„ä¸¤ä¸ªéƒ¨åˆ†ã€‚æ¨¡å—æ ‡å‡†åŸåæ˜¯<em>harmony modules specification</em>ã€‚ä½ ç”šè‡³å¯ä»¥ç”¨ES3çš„è¯­æ³•æ­é…æ¨¡å—ä½¿ç”¨ã€‚<br>ESMçš„é—®é¢˜ï¼š</p>
<ol>
<li>node ä¸­çš„ESMå°šæœªå®ç°ã€‚</li>
<li>å…¼å®¹é—®é¢˜ã€‚</li>
</ol>
<h2 id="webpack-èƒ½åšä»€ä¹ˆ"><a href="#webpack-èƒ½åšä»€ä¹ˆ" class="headerlink" title="webpack èƒ½åšä»€ä¹ˆ"></a>webpack èƒ½åšä»€ä¹ˆ</h2><p>webpack æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨</p>
<ol>
<li>åº“çš„ä½œè€…ä½¿ç”¨ä»–ä»¬å–œæ¬¢çš„æ¨¡å—ç³»ç»Ÿï¼ŒAMD, CommonJS, webpack å¯ä»¥è®©ä½ ä½¿ç”¨ä»»ä½•çš„æ¨¡å—æ ¼å¼ç”šè‡³æ··åˆï¼Œå°†å®ƒä»¬æœ€ç»ˆæ‰“åŒ…æˆæµè§ˆå™¨å¯ä»¥æ‰§è¡Œçš„ä»£ç ã€‚</li>
<li>åœ¨æ„å»ºé˜¶æ®µåˆ›å»ºåŠ¨æ€æ‰“åŒ…æ¨¡å—ï¼ˆæ‡’åŠ è½½çš„æ¨¡å—ï¼‰</li>
<li>ä¸ä»…æ‰“åŒ…JSèµ„æºè¿˜åŒ…æ‹¬html, cssç”šè‡³å›¾ç‰‡</li>
</ol>
<h2 id="è°ƒè¯•webpack"><a href="#è°ƒè¯•webpack" class="headerlink" title="è°ƒè¯•webpack"></a>è°ƒè¯•webpack</h2><ol>
<li>æŒ‰ç…§è°ƒè¯•nodeçš„æ–¹æ³•<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">node --inspect --inspect-brk ./node_modules/webpack/bin/webpack.js</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>ä¹‹ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå¯ä»¥å‚è€ƒ<a href="https://nodejs.org/en/docs/guides/debugging-getting-started/" target="_blank" rel="noopener">debugger</a></p>
<ol start="2">
<li>åˆ©ç”¨vscode<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"configurations": [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"node"</span>,</span><br><span class="line">        <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"webpack"</span>,</span><br><span class="line">        <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/node_modules/webpack/bin/webpack.js"</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>å¯ä»¥å‚è€ƒä¸‹<a href="https://medium.com/@jsilvax/debugging-webpack-with-vs-code-b14694db4f8e" target="_blank" rel="noopener">debugging-webpack</a></p>
<h2 id="webpack-åŸºç¡€æ¦‚å¿µ"><a href="#webpack-åŸºç¡€æ¦‚å¿µ" class="headerlink" title="webpack åŸºç¡€æ¦‚å¿µ"></a>webpack åŸºç¡€æ¦‚å¿µ</h2><h2 id="ä»€ä¹ˆæ˜¯ä¾èµ–å›¾ï¼ˆdependency-graphï¼‰"><a href="#ä»€ä¹ˆæ˜¯ä¾èµ–å›¾ï¼ˆdependency-graphï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¾èµ–å›¾ï¼ˆdependency graphï¼‰"></a>ä»€ä¹ˆæ˜¯ä¾èµ–å›¾ï¼ˆdependency graphï¼‰</h2><p>webpackæ ¹æ®æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»é€’å½’æ„å»ºè€Œæˆ<br><a href="https://webpack.js.org/concepts/dependency-graph/" target="_blank" rel="noopener">dependency-graph</a></p>
<h2 id="entry"><a href="#entry" class="headerlink" title="entry"></a>entry</h2><p>å‘Šè¯‰webpackä»é‚£ä¸ªæ–‡ä»¶å¼€å§‹æ„å»ºå®ƒçš„ä¾èµ–å›¾ã€‚webpack4é»˜è®¤é…ç½®æ˜¯<code>src/index.js</code></p>
<h2 id="output"><a href="#output" class="headerlink" title="output"></a>output</h2><p>å‘Šè¯‰webpackæ‰“åŒ…å¥½çš„æ–‡ä»¶çš„ä½ç½®åç§°ç­‰ã€‚webpack4é»˜è®¤é…ç½®ä¼šæ‰“åŒ…åˆ°<code>dist/main.js</code></p>
<h2 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h2><p>webpackå¼€ç®±åªç†è§£jså’Œjsonæ–‡ä»¶ã€‚loaderå¯ä»¥å°†å…¶ä»–æ¨¡å—åŠ è½½è¿›æ¥è½¬æ¢æˆjs æ¨¡å—ï¼Œç„¶ååŠ è½½åˆ°ä¾èµ–å›¾é‡Œã€‚webpacké»˜è®¤ä½¿ç”¨çš„æ˜¯<a href="https://github.com/acornjs/acorn" target="_blank" rel="noopener">acorn</a> è§£æjsæ–‡ä»¶ï¼Œacorné»˜è®¤åªä¼šå¤„ç†stage4çš„ææ¡ˆã€‚æ‰€ä»¥æ¯”è¾ƒæ–°çš„ç‰¹æ€§webpackæ˜¯å¤„ç†ä¸äº†çš„ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å€ŸåŠ©<a href="https://babeljs.io/" target="_blank" rel="noopener">babel</a><br>è¿™é‡Œä¸¾ä¸¤ä¸ªloader</p>
<h3 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">            use: &#123;</span><br><span class="line">                loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    presets: [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>babel-loader8.xéœ€è¦é…åˆä½¿ç”¨çš„æ˜¯@babel-coreä»¥åŠ@babel/preset-env</em><br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -D babel-loader @babel/core @babel/preset-env</span><br></pre></td></tr></table></figure></p>
<p><strong>babel-loader:</strong> webpackå’Œbabelä¹‹é—´çš„æ¡¥æ¢<br><strong>@babel/core:</strong> è§£ææ–‡ä»¶å¹¶ä¸”ç”Ÿæˆæ–‡ä»¶<br><strong>@babel/preset-env:</strong> ç›¸åº”çš„è½¬æ¢è§„åˆ™</p>
<h3 id="css-loader"><a href="#css-loader" class="headerlink" title="css loader"></a>css loader</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -D css-loader style-loader</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    loaders: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>loaderè§£æé¡ºåºæ˜¯ä»å³å‘å·¦å¯ä»¥ å¯ä»¥ç†è§£æˆè¿™æ ·<code>styleLoader(cssLoader())</code> ä¸€ä¸ªæ–¹æ³•çš„è¾“å‡ºæ˜¯å¦ä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ã€‚<br><strong>css-loader:</strong> è´Ÿè´£å°†cssæ–‡ä»¶è½¬æ¢æˆjs<br><strong>style-loader:</strong> å°†csså†…å®¹æ’å…¥<code>&lt;style&gt;</code>æ ‡ç­¾ä¸­<br><em>ps:æˆ‘åœ¨å®‰è£…äº†ç›¸å…³loaderä¹‹å, åœ¨vscodeé‡Œå»å°è¯•ä»node_modulesç›®å½•é‡Œæ‰¾å‘ç°æ€ä¹ˆä¹Ÿæ‰¾ä¸åˆ°ç›¸å…³loader o(â•¯â–¡â•°)oï¼Œæœ€åæˆ‘ç›´æ¥æ‰“å¼€äº†æ–‡ä»¶ç›®å½•æ‰¾åˆ°äº†ã€‚ã€‚ã€‚</em></p>
<h3 id="å¦‚ä½•å†™ä¸€ä¸ªloader"><a href="#å¦‚ä½•å†™ä¸€ä¸ªloader" class="headerlink" title="å¦‚ä½•å†™ä¸€ä¸ªloader"></a>å¦‚ä½•å†™ä¸€ä¸ªloader</h3><p><a href="https://webpack.js.org/contribute/writing-a-loader/" target="_blank" rel="noopener">write-a-loader</a><br>æ€»ç»“ä¸‹å°±æ˜¯loaderæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨webpacké…ç½®é‡Œå¯ä»¥é…ç½®loaderçš„åˆ«åï¼Œä»¥åŠä½ è‡ªå·±å†™çš„loaderçš„è§£æä½ç½®ã€‚<br>å‡½æ•°çš„å‚æ•°å°±æ˜¯ä¸Šä¸€ä¸ªloaderå¤„ç†å¥½åçš„å­—ç¬¦ä¸²ã€‚loaderä¹Ÿåˆ†åŒæ­¥å’Œå¼‚æ­¥çš„ï¼Œbabel-loaderå°±æ˜¯å¼‚æ­¥çš„ã€‚</p>
<h2 id="plugin"><a href="#plugin" class="headerlink" title="plugin"></a>plugin</h2><p>pluginå¯ä»¥åœ¨webpackçš„æ„å»ºçš„ä»»æ„æ—¶åˆ»æ‰§è¡Œä¸€äº›ç‰¹å®šä»»åŠ¡ï¼Œæ¯”å¦‚æ‰“åŒ…ä¼˜åŒ–ï¼Œæ’å…¥ç¯å¢ƒå˜é‡ç­‰ã€‚<br>webpackæºç æœ‰å¾ˆå¤§éƒ¨åˆ†éƒ½æ˜¯æ’ä»¶å†™çš„ï¼Œå…·ä½“ä¼šå†å‡ºä¸€ç¯‡è¯¦ç»†è®²ä¸‹webpackæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¿™é‡Œå°±ç®€å•ä»‹ç»ä¸‹ã€‚</p>
<h3 id="å¦‚ä½•å†™ä¸€ä¸ªæ’ä»¶"><a href="#å¦‚ä½•å†™ä¸€ä¸ªæ’ä»¶" class="headerlink" title="å¦‚ä½•å†™ä¸€ä¸ªæ’ä»¶"></a>å¦‚ä½•å†™ä¸€ä¸ªæ’ä»¶</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myFirstWebpackPlugin</span> </span>&#123;</span><br><span class="line">    apply(compiler)&#123;</span><br><span class="line">        compiler.hooks.done.tapAsync(<span class="string">'myFirstWebpackPlugin'</span>,(stats, cb)=&gt;&#123;</span><br><span class="line">            cb();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = myFirstWebpackPlugin</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç æ˜¯åŸºäºwebpack4çš„ï¼Œ3.xçš„ç‰ˆæœ¬æ˜¯å¦‚ä¸‹<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myFirstWebpackPlugin</span> </span>&#123;</span><br><span class="line">    apply(compiler)&#123;</span><br><span class="line">        compiler.plugin(<span class="string">"done"</span>,(stats)=&gt;&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = myFirstWebpackPlugin</span><br></pre></td></tr></table></figure></p>
<p>3.xç‰ˆæœ¬çš„hookæ˜¯å­—ç¬¦ä¸²å½¢å¼ï¼Œéœ€è¦äººä¸ºå»è®°å¿†ï¼Œåœ¨webpack4ä¸­å°†å…¶ä½œä¸ºå˜é‡çš„å±æ€§ï¼Œæ–‡æ¡£åŒ–ååœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥ä¼šæœ‰æç¤ºï¼Œç›®å‰å°šæœªæ–‡æ¡£åŒ–å®Œæˆã€‚4.xç‰ˆæœ¬çš„hookæä¾›ä¸€ä¸ªå¯é€‰å‚æ•°å‘Šè¯‰å½“å‰æŒ‚è½½è¿›å»çš„æ–¹æ³•åï¼Œå¯ä»¥ç”¨äºè°ƒè¯•ã€‚</p>
<p>æ’ä»¶å¯ä»¥åœ¨webpackæ„å»ºçš„ä»»æ„æ—¶åˆ»æ‰§è¡Œï¼Œå’Œé’©å­å‡½æ•°ä¸€æ ·ï¼Œæå‰åœ¨è¿™äº›æ—¶é—´ç‚¹æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œæ’ä»¶çš„é’©å­åŒæ ·å¯ä»¥æ˜¯åŒæ­¥æˆ–è€…å¼‚æ­¥çš„ã€‚ä¸Šé¢çš„å®ä¾‹æ˜¯åœ¨æ„å»ºå®Œæˆåæ‰§è¡Œï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°é‡ŒåŒ…æ‹¬ä¸€ç³»åˆ—ç»Ÿè®¡æ•°æ®ï¼Œæ„å»ºå¼€å§‹æ—¶é—´ç»“æŸæ—¶é—´ç­‰ã€‚</p>
<h2 id="webpackä»£ç æ‹†åˆ†ï¼ˆcode-splittingï¼‰"><a href="#webpackä»£ç æ‹†åˆ†ï¼ˆcode-splittingï¼‰" class="headerlink" title="webpackä»£ç æ‹†åˆ†ï¼ˆcode splittingï¼‰"></a>webpackä»£ç æ‹†åˆ†ï¼ˆcode splittingï¼‰</h2><p>ä»£ç æ‹†åˆ†çš„ç”¨é€”ï¼š</p>
<ol>
<li>ä¸éœ€è¦åœ¨é¦–å±åŠ è½½çš„æ¯”è¾ƒå¤§çš„ç¬¬ä¸‰æ–¹åº“æ¯”å¦‚three.js</li>
<li>æ¨¡æ€æ¡†æç¤ºæ¡†ç­‰ç”¨æˆ·å¯èƒ½ä¸ä¼šå»ç‚¹å‡»çš„</li>
<li>è·¯ç”±ç»„ä»¶</li>
</ol>
<p>ä»£ç æ‹†åˆ†çš„å¥½å¤„ï¼š</p>
<ol>
<li>æå‡é¦–å±åŠ è½½é€Ÿåº¦ï¼Œæå‡ç”¨æˆ·ä½“éªŒç‰¹åˆ«æ˜¯ç§»åŠ¨ç«¯</li>
<li>æœ‰åŠ©äºæå‡SEOï¼Œgoogleä¼šé™ä½åŠ è½½æ…¢çš„ç½‘ç«™çš„æƒé‡</li>
</ol>
<p>webpackä¼šå°†<code>import()</code>å¼•ç”¨çš„æ¨¡å—æ‰“åŒ…åˆ°å•ç‹¬æ‰“åŒ…åˆ°è¾“å‡ºç›®å½•ä¸‹ï¼Œwebpackå†…ç½®çš„<code>acorn</code>è§£æå™¨é»˜è®¤æ˜¯åªè§£æstage4çš„ï¼Œ<code>import()</code>ä»ç„¶åœ¨stage3ï¼Œ<a href="https://github.com/tc39/proposals" target="_blank" rel="noopener">proposals</a>ã€‚è¿™æ˜¯å› ä¸ºwebpackå¼•ç”¨äº†<code>acorn-dynamic-import</code>å¯ä»¥æ”¯æŒåœ¨ä¸ä½¿ç”¨babelçš„æƒ…å†µä¸‹è§£æ<code>import()</code>è¯­æ³•ã€‚å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨äº†<code>babel-loader</code>éœ€è¦å†é…ç½®<code>@babel/plugin-syntax-dynamic-import</code>ï¼Œå¦åˆ™babelä¼šæŠ¥é”™ï¼Œå› ä¸ºbabelä¹Ÿæ˜¯éœ€è¦å°†ä»£ç è§£æè½¬æ¢æˆæŠ½è±¡è¯­æ³•æ ‘çš„ã€‚<br>webpackä»£ç æ‹†åˆ†åˆ†ä¸ºé™æ€å’ŒåŠ¨æ€ä»£ç æ‹†åˆ†ï¼Œä½†æ˜¯æ— è®ºå“ªç§ï¼Œéƒ½æ˜¯å°†å¼‚æ­¥è¯·æ±‚çš„æ¨¡å—æå‰æ‰“åŒ…åˆ°è¾“å‡ºç›®å½•ä¸­ã€‚</p>
<p><em>ps:chromeä¸­å¯ä»¥æŸ¥çœ‹code coverageæŸ¥çœ‹å½“å‰é¡µé¢çš„ä»£ç ä½¿ç”¨ç‡</em></p>
<h3 id="é™æ€ä»£ç æ‹†åˆ†ï¼ˆstatic-code-splittingï¼‰"><a href="#é™æ€ä»£ç æ‹†åˆ†ï¼ˆstatic-code-splittingï¼‰" class="headerlink" title="é™æ€ä»£ç æ‹†åˆ†ï¼ˆstatic code splittingï¼‰"></a>é™æ€ä»£ç æ‹†åˆ†ï¼ˆstatic code splittingï¼‰</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">    <span class="keyword">const</span> getFooter = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./footer'</span>);</span><br><span class="line">    button.addEventListener(<span class="string">'click'</span>,e=&gt;&#123;</span><br><span class="line">        getFooter().then(<span class="function"><span class="params">m</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">document</span>.body.appendChild(m.footer)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="comment">// footer.js</span></span><br><span class="line"><span class="keyword">const</span> footer = <span class="built_in">document</span>.createElement(<span class="string">"footer"</span>);</span><br><span class="line"><span class="keyword">export</span> &#123; footer &#125;;</span><br></pre></td></tr></table></figure>
<p><code>import()</code>è¿”å›çš„æ˜¯ä¸€ä¸ª<code>promise</code></p>
<h3 id="åŠ¨æ€ä»£ç æ‹†åˆ†ï¼ˆdynamic-code-splittingï¼‰"><a href="#åŠ¨æ€ä»£ç æ‹†åˆ†ï¼ˆdynamic-code-splittingï¼‰" class="headerlink" title="åŠ¨æ€ä»£ç æ‹†åˆ†ï¼ˆdynamic code splittingï¼‰"></a>åŠ¨æ€ä»£ç æ‹†åˆ†ï¼ˆdynamic code splittingï¼‰</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> setButtonStyle = <span class="function"><span class="params">color</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">`./button-style/<span class="subst">$&#123;color&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„<code>./button-style</code>æ˜¯éƒ¨åˆ†åœ°å€ï¼Œwebpackä¼šå°†è¿™ä¸ªåœ°å€ä¸‹é¢çš„æ‰€æœ‰jsæ¨¡å—è¿›è¡Œå•ç‹¬æ‰“åŒ…ã€‚è¿™ä¸ªå¯ä»¥ç”¨åœ¨å½“è¿™ä¸ªç›®å½•ä¸‹æœ‰å¾ˆå¤šæ–‡ä»¶éœ€è¦ä»£ç æ‹†åˆ†çš„æ—¶å€™ã€‚</p>
<h3 id="é­”æ³•æ³¨é‡Šï¼ˆmagic-commentï¼‰"><a href="#é­”æ³•æ³¨é‡Šï¼ˆmagic-commentï¼‰" class="headerlink" title="é­”æ³•æ³¨é‡Šï¼ˆmagic commentï¼‰"></a>é­”æ³•æ³¨é‡Šï¼ˆmagic commentï¼‰</h3><p>å†…è”æ³¨é‡Šæ§åˆ¶webpackåŠ¨æ€æ‰“åŒ…è¡Œä¸ºï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿå› ä¸ºè¿™æ ·ä¸ä¼šå¢åŠ æ–°è¯­æ³•ï¼Œä¸å’ŒåŠ¨æ€importä»¥åŠ<a href="https://github.com/whatwg/loader" target="_blank" rel="noopener">loader</a>è§„èŒƒå†²çªã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>(</span><br><span class="line">    <span class="comment">/* webpackMode: "lazy-once" */</span></span><br><span class="line">    <span class="string">`./button-style/<span class="subst">$&#123;color&#125;</span>`</span>);</span><br></pre></td></tr></table></figure></p>
<p>æ¯”å¦‚ä¸Šé¢è¿™ä¸ª<code>webpackMode</code>é»˜è®¤æ˜¯<code>lazy</code>å®ƒä¼šå°†<code>./button-style</code>ä¸‹çš„æ‰€æœ‰æ¨¡å—éƒ½å•ç‹¬æ‰“åŒ…ï¼›<code>lazy-once</code>åˆ™ä¼šå°†å…¶ä¸‹é¢çš„æ‰€æœ‰æ¨¡å—æ‰“æˆä¸€ä¸ªåŒ…å¸¸ç”¨äºå¼€å‘ç¯å¢ƒå‡å°‘æ‰“åŒ…æ¬¡æ•°ã€‚<br>æ›´å¤šæ³¨é‡Šé€‰é¡¹è¯·å‚è€ƒå®˜ç½‘<a href="https://webpack.js.org/api/module-methods/#magic-comments" target="_blank" rel="noopener">magic-comments</a></p>
<h3 id="æµè¡Œåº“ä¸­çš„ä»£ç æ‹†åˆ†"><a href="#æµè¡Œåº“ä¸­çš„ä»£ç æ‹†åˆ†" class="headerlink" title="æµè¡Œåº“ä¸­çš„ä»£ç æ‹†åˆ†"></a>æµè¡Œåº“ä¸­çš„ä»£ç æ‹†åˆ†</h3><p><a href="https://medium.com/js-dojo/3-code-splitting-patterns-for-vuejs-and-webpack-b8fff1ea0ba4" target="_blank" rel="noopener">vue-code-splitting-pattern</a><br><a href="https://github.com/jamiebuilds/react-loadable" target="_blank" rel="noopener">react-loadable</a></p>
]]></content>
      <categories>
        <category>frontend</category>
        <category>bundler</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‡’åŠ è½½</title>
    <url>/2019/04/30/lazy-load/</url>
    <content><![CDATA[<h3 id="æ‡’åŠ è½½çš„å¥½å¤„"><a href="#æ‡’åŠ è½½çš„å¥½å¤„" class="headerlink" title="æ‡’åŠ è½½çš„å¥½å¤„"></a>æ‡’åŠ è½½çš„å¥½å¤„</h3><ol>
<li>å‡å°‘èµ„æºè¯·æ±‚ï¼Œå‡å°‘ç”¨æˆ·æµé‡æµªè´¹</li>
<li>å›¾ç‰‡è§†é¢‘ä¸‹è½½ä¸‹æ¥åï¼Œæµè§ˆå™¨è¿˜è¦è°ƒç”¨ç³»ç»Ÿèµ„æºè¿›è¡Œè§£ç ï¼Œæ‡’åŠ è½½åå¯ä»¥å‡å°‘è¿™éƒ¨åˆ†æ—¶é—´åŠèµ„æºçš„æµªè´¹ã€‚</li>
</ol>
<h3 id="æ‡’åŠ è½½å®ç°"><a href="#æ‡’åŠ è½½å®ç°" class="headerlink" title="æ‡’åŠ è½½å®ç°"></a>æ‡’åŠ è½½å®ç°</h3><h4 id="åŸç”Ÿå®ç°"><a href="#åŸç”Ÿå®ç°" class="headerlink" title="åŸç”Ÿå®ç°"></a>åŸç”Ÿå®ç°</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"celebration.jpg"</span> <span class="attr">loading</span>=<span class="string">"lazy"</span> <span class="attr">alt</span>=<span class="string">"..."</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡è¿˜æ—©çš„å¾ˆï¼Œè¯´æ˜¯chrome 75ç‰ˆæœ¬æ”¯æŒï¼Œæˆ‘æ‹¿76è¯•äº†ä¸‹è¿˜æ˜¯ä¸è¡ŒğŸ˜¶<br>ä»¥ä¸‹çš„æ–¹æ³•ä¸»è¦æ˜¯åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨è§†çª—å†…</p>
<h4 id="Intersection-Observer"><a href="#Intersection-Observer" class="headerlink" title="Intersection Observer"></a>Intersection Observer</h4><a id="more"></a>
<img src="/2019/04/30/lazy-load/D035F71E-21AE-4FF1-81F0-8756340D2AE6.png">
<p>å…¼å®¹æ€§å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæœ‰polyfillç‰ˆæœ¬<a href="https://github.com/w3c/IntersectionObserver/tree/master/polyfill" target="_blank" rel="noopener">polyfill IntersectionObserver</a><br>åˆ›å»ºä¸€ä¸ª<code>intersection Observer</code>å®ä¾‹<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> io = <span class="keyword">new</span> IntersectionObserver(<span class="function"><span class="keyword">function</span>(<span class="params">entries, observer</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// entriesæ˜¯ä¸ªæ•°ç»„</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// å¼€å§‹è§‚å¯ŸæŸä¸ªå…ƒç´ </span></span><br><span class="line">io.observe(element);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœæ­¢è§‚å¯ŸæŸä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">// io.unobserve(element);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰€æœ‰çš„è§‚å¯Ÿéƒ½å¤±æ•ˆ</span></span><br><span class="line"><span class="comment">// io.disconnect();</span></span><br></pre></td></tr></table></figure></p>
<p>å›è°ƒå‡½æ•°çš„<code>entry.isIntersecting</code>å¯ä»¥åˆ¤æ–­å½“å‰è¢«è§‚å¯Ÿçš„å…ƒç´ æ˜¯å¦å’Œè§†çª—ç›¸äº¤ä¹Ÿå°±æ˜¯æ˜¯å¦åœ¨è§†çª—å†…ã€‚é»˜è®¤é…ç½®æ˜¯å½“ä¸€ä¸ªå…ƒç´ åªè¦æœ‰ä¸€ä¸ªåƒç´ åœ¨è§†çª—å†…<code>entry.isIntersecting</code>å°±ä¸º<code>true</code>ã€‚å¯ä»¥é…ç½®æ•´ä¸ªå…ƒç´ æ‰€æœ‰åƒç´ éƒ½å¯è§æ‰ç®—æ•°ï¼Œæˆ–è€…ç™¾åˆ†ä¹‹å¤šå°‘æ‰ç®—æ•°ã€‚å¯ä»¥åœ¨å›è°ƒé‡Œåˆ¤æ–­è¿›å…¥è§†çª—åè°ƒç”¨<code>unobserve(element)</code> å–æ¶ˆç›‘å¬ã€‚</p>
<h5 id="ä¼˜åŠ¿å’ŒåŠ£åŠ¿"><a href="#ä¼˜åŠ¿å’ŒåŠ£åŠ¿" class="headerlink" title="ä¼˜åŠ¿å’ŒåŠ£åŠ¿"></a>ä¼˜åŠ¿å’ŒåŠ£åŠ¿</h5><p>æ€§èƒ½å¥½ï¼Œä¸ç”¨ç›‘å¬<code>scroll</code>, <code>resize</code>, <code>orientationchange</code> ç­‰äº‹ä»¶ã€‚<br>åŠ£åŠ¿å°±æ˜¯å…¼å®¹é—®é¢˜ï¼Œä¸è¿‡å¯ä»¥åˆ©ç”¨polyfill.</p>
<h4 id="getBoundingClientRect"><a href="#getBoundingClientRect" class="headerlink" title="getBoundingClientRect"></a>getBoundingClientRect</h4><p>è·å–å…ƒç´ åœ¨å½“å‰è§†çª—å†…çš„å¤§å°ä½ç½®ï¼Œä½ç½®æ˜¯è·ç¦»é¡¶éƒ¨çš„è·ç¦»ï¼Œå¯ä»¥å’Œ<code>innerHeight</code>ç­‰é…åˆåˆ¤æ–­æ˜¯å¦åœ¨é¡µé¢ä¸­ã€‚</p>
<h5 id="ä¼˜åŠ¿å’ŒåŠ£åŠ¿-1"><a href="#ä¼˜åŠ¿å’ŒåŠ£åŠ¿-1" class="headerlink" title="ä¼˜åŠ¿å’ŒåŠ£åŠ¿"></a>ä¼˜åŠ¿å’ŒåŠ£åŠ¿</h5><p><code>Intersection Observer</code>çš„ä¼˜åŠ¿å°±æ˜¯å®ƒçš„åŠ£åŠ¿ï¼ŒåŠ£åŠ¿å°±æ˜¯å®ƒçš„ä¼˜åŠ¿â•®(â•¯_â•°)â•­</p>
<h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="https://css-tricks.com/native-lazy-loading/" target="_blank" rel="noopener">Native Lazy Loading | CSS-Tricks</a><br><a href="https://developers.google.com/web/fundamentals/performance/lazy-loading-guidance/images-and-video/" target="_blank" rel="noopener">Lazy Loading Images and Video  |  Web Fundamentals       |  Google Developers</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" target="_blank" rel="noopener">Intersection Observer API - Web APIs | MDN</a></p>
]]></content>
      <categories>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>performance</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•£åˆ—è¡¨ï¼ˆhash tableï¼‰åŸºç¡€</title>
    <url>/2019/04/29/hash-table/</url>
    <content><![CDATA[<h2 id="æ•£åˆ—è¡¨æ˜¯ä»€ä¹ˆ"><a href="#æ•£åˆ—è¡¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ•£åˆ—è¡¨æ˜¯ä»€ä¹ˆ"></a>æ•£åˆ—è¡¨æ˜¯ä»€ä¹ˆ</h2><p>æ•£åˆ—è¡¨åŸºæœ¬æ€æƒ³æ˜¯å°†keyæŒ‰ç…§ä¸€å®šæ–¹æ³•ï¼ˆhash functionï¼‰æ˜ å°„åˆ°æ•°ç»„çš„indexï¼Œæ•°ç»„æŒ‰ç…§indexè®¿é—®æ˜¯å¯ä»¥å®ç°å¸¸æ•°çº§çš„å¤æ‚åº¦ã€‚æ•£åˆ—è¡¨æ˜¯ç»å…¸çš„æ—¶é—´å’Œç©ºé—´çš„tradeoff. å¦‚æœç©ºé—´æ— é™åˆ™å¯ä»¥é¿å…ä¸‹é¢å‡ºç°çš„å†²çªé—®é¢˜ï¼Œå¦‚æœæ—¶é—´æ— é™ï¼Œæ¯æ¬¡éå†å‚¨å­˜ç»“æ„å³å¯ã€‚åœ¨javaä¸­æœ‰<code>java.util.HashMap</code>, <code>java.util.IdentityHashMap</code>è¿™äº›æ•°æ®ç»“æ„çš„åº”ç”¨ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¦ç”¨æ•£åˆ—è¡¨"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨æ•£åˆ—è¡¨" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨æ•£åˆ—è¡¨"></a>ä¸ºä»€ä¹ˆè¦ç”¨æ•£åˆ—è¡¨</h2><p>çº¢é»‘æ ‘çš„æŸ¥æ‰¾å’Œæ’å…¥ä»¥åŠåˆ é™¤é¡¹ç›®å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯å¯¹æ•°çº§çš„ï¼Œæ•£åˆ—è¡¨åœ¨æŸäº›æ¡ä»¶ä¸‹æ¯”çº¢é»‘æ ‘è¡¨ç°æ›´å¥½ï¼Œå¯ä»¥å®ç°å¹³å‡å¸¸æ•°çº§çš„æŸ¥æ‰¾å’Œæ’å…¥ï¼š</p>
<ol>
<li>ä¸å…³å¿ƒæ•°æ®æ˜¯å¦æ˜¯æŒ‰ç…§é¡ºåºå­˜å‚¨çš„ï¼Œçº¢é»‘æ ‘ä¸­æ•°æ®éƒ½æ˜¯æŒ‰ç…§ä¸€å®šé¡ºåºå­˜å‚¨çš„</li>
<li>æ•£åˆ—å‡½æ•°ä¸å¤ªå¤æ‚çš„æƒ…å†µä¸‹<br>ä¸è¿‡çº¢é»‘æ ‘èƒ½å¤Ÿä¿è¯æ€§èƒ½ï¼Œæ•£åˆ—è¡¨çš„æ€§èƒ½è¡¨ç°æ˜¯æœ‰å‰æçš„ã€‚</li>
</ol>
<h2 id="æ•£åˆ—è¡¨éœ€è¦è§£å†³çš„é—®é¢˜"><a href="#æ•£åˆ—è¡¨éœ€è¦è§£å†³çš„é—®é¢˜" class="headerlink" title="æ•£åˆ—è¡¨éœ€è¦è§£å†³çš„é—®é¢˜"></a>æ•£åˆ—è¡¨éœ€è¦è§£å†³çš„é—®é¢˜</h2><ol>
<li>æ•£åˆ—å‡½æ•°ï¼ˆhash functionï¼‰</li>
<li>è§£å†³å†²çªé—®é¢˜ã€‚ä¸ºä»€ä¹ˆä¼šæœ‰å†²çªé—®é¢˜ï¼šç»Ÿè®¡å­¦è¯•éªŒè¡¨æ˜ï¼Œå¦‚æœæƒ³è¦ä¸å†²çªå°±éœ€è¦æŒ‡æ•°çº§çš„å­˜å‚¨ç©ºé—´ã€‚ç°å®ç”Ÿæ´»ä¸­æˆ‘ä»¬çš„èµ„æºéƒ½æ˜¯æœ‰é™çš„ï¼Œso~<a id="more"></a>
<h2 id="æ•£åˆ—å‡½æ•°ï¼ˆhash-functionï¼‰"><a href="#æ•£åˆ—å‡½æ•°ï¼ˆhash-functionï¼‰" class="headerlink" title="æ•£åˆ—å‡½æ•°ï¼ˆhash functionï¼‰"></a>æ•£åˆ—å‡½æ•°ï¼ˆhash functionï¼‰</h2>æ•£åˆ—å‡½æ•°è¦èƒ½æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</li>
<li>keyä¸è¦å¤ªå¤æ‚ä¾¿äºè®¡ç®—hash</li>
<li>æ•£åˆ—è¡¨çš„æ¯ä¸ªindexå¯¹äºä»»æ„æ’å…¥è¡¨çš„keyéƒ½æœ‰åŒç­‰çš„å¯èƒ½æ€§ã€‚æ¯”å¦‚æœ‰Mä¸ªkeyï¼Œæ•£åˆ—å‡½æ•°è¦èƒ½å°†è¿™Mä¸ªå€¼å‡åŒ€çš„æ•£å¸ƒåœ¨0~M-1çš„æ•°ç»„indexä¸Šã€‚å°±å¥½åƒMath.random()å®ƒç”Ÿæˆçš„æ•°å…¶å®ä¸æ˜¯çœŸæ­£æ„ä¹‰çš„éšæœºï¼Œç”Ÿæˆæ¯ä¸ªæ•°çš„å¯èƒ½æ€§ä¸å°½ç›¸åŒã€‚<br>è‡³äºä¸ºä»€ä¹ˆè¦å‡åŒ€æ•£å¸ƒå‘¢ï¼Ÿæˆ‘è§‰å¾—åº”è¯¥æ˜¯æ›´é«˜æ•ˆçš„åˆ©ç”¨ç©ºé—´ï¼Œå¦åˆ™å†²çªå°±ä¼šæ›´æå‰å‘ç”Ÿã€‚</li>
</ol>
<h3 id="hashCode"><a href="#hashCode" class="headerlink" title="hashCode"></a>hashCode</h3><p>hashCodeçš„ä½œç”¨æ˜¯å°†æ•°æ®ç±»å‹è½¬åŒ–ä¸ºæ•°ç»„ï¼Œæ–¹ä¾¿è¿›è¡Œæ•£åˆ—è®¡ç®—ã€‚</p>
<h4 id="javaçš„hashCodeå®ç°"><a href="#javaçš„hashCodeå®ç°" class="headerlink" title="javaçš„hashCodeå®ç°"></a>javaçš„hashCodeå®ç°</h4><p>javaçš„å†…ç½®æ•°æ®ç±»å‹éƒ½ç»§æ‰¿äº†ä¸€ä¸ªæ–¹æ³•<code>hashCode</code>,å®ƒè¿”å›ä¸€ä¸ª32-bit<code>ini</code>ã€‚æ¯”å¦‚<code>Integer</code>å°±ç›´æ¥è¿”å›æ•°å€¼æœ¬èº«ï¼Œ<code>Boolean</code>è¿”å›ä¸¤ä¸ªç‰¹å®šçš„<code>int</code>ã€‚<code>String</code>çš„å®ç°ç”¨åˆ°äº†ä¸€ä¸ª<em>Hornerâ€™s method</em>. <code>s[i]</code>è¿™è¾¹æ˜¯ä»£è¡¨é‚£ä¸ªå­—ç¬¦çš„Unicode.<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> hash = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length(); i++)</span><br><span class="line">   hash = s[i] + (<span class="number">31</span> * hash);</span><br><span class="line">   <span class="keyword">return</span> hash;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="è‡ªå®šä¹‰ç±»å‹çš„hashCodeå®ç°"><a href="#è‡ªå®šä¹‰ç±»å‹çš„hashCodeå®ç°" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹çš„hashCodeå®ç°"></a>è‡ªå®šä¹‰ç±»å‹çš„hashCodeå®ç°</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸¾ä¾‹ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> hash = <span class="number">17</span>;</span><br><span class="line">    hash = <span class="number">31</span>*hash + who.hashCode();</span><br><span class="line">    hash = <span class="number">31</span>*hash + when.hashCode();</span><br><span class="line">    hash = <span class="number">31</span>*hash + ((Double) amount).hashCode();</span><br><span class="line">    <span class="keyword">return</span> hash;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„who, when, amount æ˜¯ä¸¾ä¾‹ç”¨æˆ·ç±»å‹é‡Œçš„å„ç§ç±»å‹çš„å€¼ï¼Œè¦ä¿è¯æ¯ä¸ªå€¼éƒ½å‚ä¸è¿ç®—ã€‚<br>javaè®¾è®¡æ¸…å•ï¼š</p>
<ol>
<li>æ¯ä¸ªå…³é”®å­—æ®µè¦å‚ä¸è¿ç®—å¯ä»¥è€ƒè™‘31x + yè¿™ç§è§„åˆ™ã€‚ä¸ºä»€ä¹ˆæ˜¯31ï¼Ÿ</li>
<li>å¦‚æœå­—æ®µæ˜¯åŸºæœ¬ç±»å‹ï¼Œéœ€è¦ç”¨åˆ°wrapperå†è°ƒç”¨<code>hashCode</code></li>
<li>å¦‚æœå­—æ®µæ˜¯nullï¼Œåˆ™è¿”å›0</li>
<li>å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™è°ƒç”¨<code>hashCode</code></li>
<li>å¦‚æœå­—æ®µæ˜¯ä¸ªæ•°ç»„ï¼Œæ•°ç»„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ï¼Œå¼•ç”¨ç±»å‹å°±é€’å½’è°ƒç”¨ <code>Array.deepHashCode()</code></li>
</ol>
<p>å¦å¤–å®ç°çš„æ—¶å€™ä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™å°†ç»“æœç¼“å­˜åœ¨å±€éƒ¨å˜é‡å†…ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨ç›´æ¥è¿”å›è¿™ä¸ªå±€éƒ¨å˜é‡</p>
<h3 id="é™¤ç•™ä½™æ•°æ³•ï¼ˆmodularï¼‰"><a href="#é™¤ç•™ä½™æ•°æ³•ï¼ˆmodularï¼‰" class="headerlink" title="é™¤ç•™ä½™æ•°æ³•ï¼ˆmodularï¼‰"></a>é™¤ç•™ä½™æ•°æ³•ï¼ˆmodularï¼‰</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="keyword">return</span> (key.hashCode() &amp; <span class="number">0x7fffffff</span>) % M; &#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºhashCodeè¿”å›çš„æ˜¯<code>int</code>ï¼Œå¯èƒ½æ˜¯è´Ÿæ•°ï¼Œå› ä¸ºæ˜ å°„çš„æ˜¯æ•°ç»„çš„indexï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç ä¼šè®²ä¸€ä¸ª32ä½æ•´æ•°å˜ä¸ºä¸€ä¸ªéè´Ÿæ•´æ•°ï¼›å¦å¤–Mä¸€èˆ¬ä¼šé€‰ç´ æ•°ï¼ˆprimeï¼‰ã€‚å› ä¸ºå¦‚æœä¸æ˜¯ç´ æ•°çš„æ¯”å¦‚100ï¼Œé‚£ä¹ˆ212, 612çš„ä½™æ•°éƒ½æ˜¯12ã€‚è€Œå¦‚æœé‡‡ç”¨äº†Mä¸º97åˆ™åˆ†åˆ«ä½™æ•°æ˜¯18å’Œ30ã€‚ç´ æ•°æ›´èƒ½æœ‰æ•ˆåˆ©ç”¨æ‰€æœ‰æ•°ã€‚</p>
<h3 id="å†²çªè§£å†³æ–¹æ¡ˆï¼ˆcollisionï¼‰"><a href="#å†²çªè§£å†³æ–¹æ¡ˆï¼ˆcollisionï¼‰" class="headerlink" title="å†²çªè§£å†³æ–¹æ¡ˆï¼ˆcollisionï¼‰"></a>å†²çªè§£å†³æ–¹æ¡ˆï¼ˆcollisionï¼‰</h3><p>ä»‹ç»ä¸€ä¸ªç»Ÿè®¡å­¦æ¨¡å‹</p>
<h4 id="çƒå’Œçƒç­’æ¨¡å‹-Balls-and-Bins-model"><a href="#çƒå’Œçƒç­’æ¨¡å‹-Balls-and-Bins-model" class="headerlink" title="çƒå’Œçƒç­’æ¨¡å‹ (Balls and Bins model)"></a>çƒå’Œçƒç­’æ¨¡å‹ (Balls and Bins model)</h4><p>çƒå¯¹åº”ç€å³å°†æ’å…¥æ•£åˆ—è¡¨çš„key, ç­’å¯¹åº”ç€æ•£åˆ—è¡¨çš„æ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸ªindexå°±æ˜¯ä¸€ä¸ªç­’ã€‚<br>å°†çƒéšæœºå‡åŒ€çš„æ‰”å…¥å„ä¸ªç­’ä¸­å¼€å§‹è¯•éªŒï¼Œæœ€åå¾—å‡ºçš„ç»“è®ºæ˜¯ï¼š</p>
<ol>
<li>è¦æƒ³ä¸¤ä¸ªçƒä¸åŒå…¥åŒä¸€ä¸ªç­’ä¸­ï¼Œä½ éœ€è¦å¾ˆå¤§çš„æŒ‡æ•°çº§çš„ç­’ã€‚</li>
<li>å†²çªï¼ˆä¸åŒçƒæŠ•å…¥åŒä¸€ä¸ªç­’ä¸­ï¼‰æ˜¯å‡åŒ€åˆ†å¸ƒçš„ã€‚</li>
</ol>
<h4 id="æ–¹æ¡ˆä¸€æ‹‰é“¾æ³•ï¼ˆseparate-chainingï¼‰"><a href="#æ–¹æ¡ˆä¸€æ‹‰é“¾æ³•ï¼ˆseparate-chainingï¼‰" class="headerlink" title="æ–¹æ¡ˆä¸€æ‹‰é“¾æ³•ï¼ˆseparate chainingï¼‰"></a>æ–¹æ¡ˆä¸€æ‹‰é“¾æ³•ï¼ˆseparate chainingï¼‰</h4><p>æœ‰Nä¸ªkeyï¼Œtableé•¿åº¦æ˜¯Mã€‚ç›®çš„æ˜¯æŠŠNä¸ªkeyæ”¾å…¥0~M-1ä¸­å»ã€‚æ‹‰é“¾æ³•è¿ç”¨äº†é“¾è¡¨ï¼Œtableçš„æ¯ä¸ªä½ç½®éƒ½æ˜¯æ”¾ç½®çš„ä¸€ä¸ªé“¾è¡¨ã€‚<br>æ ¹æ®ä¸Šé¢çš„æ¨¡å‹æ¥çœ‹ï¼Œå¹³å‡æ¯ä¸ªé“¾è¡¨çš„é•¿åº¦éƒ½æ˜¯N/Mã€‚<br>æ’å…¥æ—¶ï¼šæ ¹æ®keyç®—å‡ºhashå€¼ï¼ˆ0~M-1ï¼‰åï¼Œæ”¾å…¥é‚£ä¸ªä½ç½®é“¾è¡¨çš„æœ€å‰é¢ã€‚</p>
<p>æœç´¢æ—¶ï¼šæ ¹æ®keyç®—æ³•hashå€¼ï¼ˆ0~M-1ï¼‰åï¼Œéå†é‚£ä¸ªä½ç½®çš„é“¾è¡¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SeparateChainingHashST</span>&lt;<span class="title">Key</span>, <span class="title">Value</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> M = <span class="number">97</span>; <span class="comment">// number of chains ä»…ä»…è¡¨ç¤ºä¸¾ä¾‹</span></span><br><span class="line">    <span class="keyword">private</span> Node[] st = <span class="keyword">new</span> Node[M]; <span class="comment">// array of chains</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Object key;</span><br><span class="line">        <span class="keyword">private</span> Object val;</span><br><span class="line">        <span class="keyword">private</span> Node next;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="keyword">return</span> (key.hashCode() &amp; <span class="number">0x7fffffff</span>) % M; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = hash(key);</span><br><span class="line">        <span class="keyword">for</span> (Node x = st[i]; x != <span class="keyword">null</span>; x = x.next)</span><br><span class="line">        <span class="keyword">if</span> (key.equals(x.key)) <span class="keyword">return</span> (Value) x.val;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = hash(key);</span><br><span class="line">        <span class="keyword">for</span> (Node x = st[i]; x != <span class="keyword">null</span>; x = x.next)</span><br><span class="line">        <span class="keyword">if</span> (key.equals(x.key)) &#123; x.val = val; <span class="keyword">return</span>; &#125;</span><br><span class="line">        st[i] = <span class="keyword">new</span> Node(key, val, st[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ‹‰é“¾æ³•åˆ†æ"><a href="#æ‹‰é“¾æ³•åˆ†æ" class="headerlink" title="æ‹‰é“¾æ³•åˆ†æ"></a>æ‹‰é“¾æ³•åˆ†æ</h5><p>æ¯”è¾ƒæ¬¡æ•°ï¼ˆæ¯”è¾ƒå¯ä»¥è°ƒç”¨<code>equals</code>ï¼Œå¦‚æœkeyç›¸åŒçš„æƒ…å†µè¦†ç›–ï¼‰æ˜¯å’ŒN/Mæˆæ¯”ä¾‹çš„ã€‚<br>å¦‚æœMè¿‡å¤§å°±ä¼šå¯¼è‡´å¾ˆå¤šç©ºé“¾ï¼ŒMè¿‡å°ä¼šå¯¼è‡´é“¾è¡¨è¿‡é•¿ï¼Œå…¸å‹çš„é€‰æ‹©æ˜¯å¤§æ¦‚5å€å…³ç³»ã€‚å½“ç„¶è¿™äº›å‰ææ˜¯åœ¨æ•£åˆ—æ–¹æ³•å‡åŒ€æ•£åˆ—ã€‚</p>
<h4 id="æ–¹æ¡ˆäºŒçº¿æ€§æ¢æµ‹æ³•ï¼ˆlinear-probingï¼‰"><a href="#æ–¹æ¡ˆäºŒçº¿æ€§æ¢æµ‹æ³•ï¼ˆlinear-probingï¼‰" class="headerlink" title="æ–¹æ¡ˆäºŒçº¿æ€§æ¢æµ‹æ³•ï¼ˆlinear probingï¼‰"></a>æ–¹æ¡ˆäºŒçº¿æ€§æ¢æµ‹æ³•ï¼ˆlinear probingï¼‰</h4><p>çº¿æ€§æ¢æµ‹æ³•å½’å±äºå¼€æ”¾åœ°å€æ³•ï¼ˆOpen addressingï¼‰å’Œä¸Šé¢çš„æ–¹æ¡ˆä¸€æ ·éƒ½æ˜¯æ—©åœ¨1953å¹´è¢«å‘æ˜çš„ã€‚<br>å‡è®¾æœ‰Nä¸ªkeyç­‰å¾…æ’å…¥ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯Mï¼Œçº¿æ€§æ¢æµ‹æ³•ä¸åˆ©ç”¨é¢å¤–ç©ºé—´ï¼Œåªç”¨åˆ°ä¸€ä¸ªæ•°ç»„ã€‚<br>æ’å…¥æ—¶ï¼šhashçš„ä½ç½®æ²¡æœ‰å€¼æ—¶ç›´æ¥æ’å…¥ï¼›æœ‰å€¼æ—¶åˆ™å¾€æ•°ç»„çš„ä¸‹ä¸€ä¸ªä½ç½®æ¢æµ‹ï¼Œæ²¡æœ‰å€¼åˆ™æ’å…¥ï¼Œæœ‰å€¼åˆ™ç»§ç»­æ¢æµ‹ç›´åˆ°æœ‰ä½ç½®å¯ä»¥æ’å…¥ï¼Œåˆ°è¾¾æ•°ç»„æœ€åä¸€ä½æ—¶ä»æ•°ç»„indexä¸º0çš„ä½ç½®å†ç»§ç»­ã€‚<br>æœç´¢æ—¶ï¼šhashçš„ä½ç½®çš„é”®å’Œè¢«æŸ¥æ‰¾çš„é”®ç›¸åŒï¼›hashçš„ä½ç½®ä¸ºç©ºè¡¨ç¤ºæ²¡æœ‰è¿™ä¸ªé”®å­˜åœ¨ï¼›hashçš„ä½ç½®çš„é”®å’Œè¢«æŸ¥æ‰¾çš„ä¸ä¸€è‡´åˆ™ç»§ç»­æŸ¥æ‰¾å¦‚æœæ‰¾åˆ°ä¸€ä¸ªç©ºä½ç½®åˆ™ä»£è¡¨å¾…æœç´¢çš„é”®ä¸å­˜åœ¨ã€‚</p>
<p>javaå®ç°å¦‚ä¸‹<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinearProbingHashST</span>&lt;<span class="title">Key</span>, <span class="title">Value</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">int</span> M = <span class="number">30001</span>;</span><br><span class="line"> <span class="keyword">private</span> Value[] vals = (Value[]) <span class="keyword">new</span> Object[M];</span><br><span class="line"> <span class="keyword">private</span> Key[] keys = (Key[]) <span class="keyword">new</span> Object[M];</span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Key key)</span> </span>&#123; <span class="comment">/* as before */</span> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value val)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = hash(key); keys[i] != <span class="keyword">null</span>; i = (i+<span class="number">1</span>) % M)</span><br><span class="line">    <span class="keyword">if</span> (keys[i].equals(key))</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    keys[i] = key;</span><br><span class="line">    vals[i] = val;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = hash(key); keys[i] != <span class="keyword">null</span>; i = (i+<span class="number">1</span>) % M)</span><br><span class="line">    <span class="keyword">if</span> (key.equals(keys[i]))</span><br><span class="line">    <span class="keyword">return</span> vals[i];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç”¨åˆ°ä¸¤ä¸ªæ•°ç»„ä¸€ä¸ªæ¥å­˜æ”¾keyï¼Œä¸€ä¸ªç”¨æ¥å­˜æ”¾å€¼ã€‚ä¸Šé¢çš„ä»£ç çœç•¥äº†resizeéƒ¨åˆ†ï¼Œå…¶ä¿è¯æ•°ç»„ä¸æ»¡ã€‚</p>
<h5 id="çº¿æ€§æ¢æµ‹æ³•çš„æ€§èƒ½"><a href="#çº¿æ€§æ¢æµ‹æ³•çš„æ€§èƒ½" class="headerlink" title="çº¿æ€§æ¢æµ‹æ³•çš„æ€§èƒ½"></a>çº¿æ€§æ¢æµ‹æ³•çš„æ€§èƒ½</h5><p>æ—©æœŸå†…å­˜å¼€é”€å¾ˆé‡è¦ï¼Œç ”ç©¶è€…ä»¬æƒ³è¦å……åˆ†åˆ©ç”¨å†…å­˜ä»–ä»¬å°±å»ç ”ç©¶çº æ­£ä»€ä¹ˆæ•°ç»„æ»¡åˆ°ä»€ä¹ˆæƒ…å†µä¸‹èƒ½ä¿è¯æŸ¥æ‰¾å’Œæ’å…¥çš„æ€§èƒ½ä¸å·®ã€‚<br>é”®ç°‡ï¼ˆclusterï¼‰ï¼š<br>æ•°ç»„æœ‰012345ä¸ªä½ç½®ï¼ŒkeyA,keyB,keyCéƒ½hashåˆ°ä½ç½®0ï¼ŒæŒ‰ç…§A,B,Cé¡ºåºæ’å…¥ï¼Œåˆ™æœ€ç»ˆAè½åœ¨äº†ä½ç½®0ï¼ŒBè½åœ¨äº†ä½ç½®1ï¼ŒCè½åœ¨äº†ä½ç½®2ã€‚<br>012ä¸‰ä¸ªä½ç½®å°±ç»„æˆäº†ä¸€ä¸ªé”®ç°‡ï¼Œå› ä¸ºä»–ä»¬ä¹‹é—´æ˜¯æ’å…¥ä¸äº†å…¶ä»–keyçš„æ–°æ¥çš„ä¸ç®¡æ˜¯hashåˆ°0è¿˜æ˜¯1è¿˜æ˜¯2ä½ç½®éƒ½è¦åœ¨è¿™ä¸ªç°‡åé¢æ’å…¥ã€‚ã€‚è§£é‡Šçš„æœ‰ç‚¹ç”Ÿç¡¬å¯ä»¥å‚è€ƒ<a href="https://www.coursera.org/learn/algorithms-part1/lecture/He696/linear-probing" target="_blank" rel="noopener">linear-probing</a>çš„è§†é¢‘ã€‚<br>éšç€æ’å…¥æ¬¡æ•°è¶Šæ¥è¶Šå¤šï¼Œclusterè¶Šæ¥è¶Šé•¿ï¼Œä¸åŒçš„clusterç”šè‡³ä¼šèåˆã€‚æƒ³è¦ä¿è¯æ€§èƒ½å¹³å‡çš„clusterå°±ä¸èƒ½è¿‡é•¿ã€‚<br>æ ¹æ®æ•°å­¦å®¶Knuthçš„åˆ†ææœ‰ä¸€ä¸ªå…¬å¼ï¼Œå…¬å¼æ¯”è¾ƒå¤æ‚å°±ä¸åˆ—äº†ã€‚å‡è®¾æœ‰N=aM  Nä¸ªkey, æ•°ç»„é•¿åº¦æ˜¯Mã€‚<br>aè¶Šæ¥è¿‘äº1åˆ™æ¢æµ‹ï¼ˆprobï¼‰æ¬¡æ•°è¶Šå¤šï¼Œæ„å‘³ç€clusterè¶Šå¤§ã€‚åœ¨aç­‰äº1/2æ—¶ï¼Œå¹³å‡æŸ¥æ‰¾éœ€è¦æ¢æµ‹3æ¬¡ï¼Œæ’å…¥éœ€è¦æ¢æµ‹5æ¬¡ã€‚</p>
<h5 id="çº¿æ€§æ¢æµ‹æ³•çš„æ€»ç»“"><a href="#çº¿æ€§æ¢æµ‹æ³•çš„æ€»ç»“" class="headerlink" title="çº¿æ€§æ¢æµ‹æ³•çš„æ€»ç»“"></a>çº¿æ€§æ¢æµ‹æ³•çš„æ€»ç»“</h5><p>åœ¨æ•£åˆ—æ–¹æ³•å‡åŒ€æ•£åˆ—çš„æƒ…å†µä¸‹ï¼Œä¿è¯æ•°ç»„é•¿åº¦æ˜¯è¦æ’å…¥çš„é”®çš„ä¸¤å€å¯ä»¥å¾—åˆ°å¸¸æ•°çº§çš„æ—¶é—´å¤æ‚åº¦ã€‚</p>
<h2 id="æ•£åˆ—è¡¨åœ¨å®é™…ç”Ÿæ´»ä¸­"><a href="#æ•£åˆ—è¡¨åœ¨å®é™…ç”Ÿæ´»ä¸­" class="headerlink" title="æ•£åˆ—è¡¨åœ¨å®é™…ç”Ÿæ´»ä¸­"></a>æ•£åˆ—è¡¨åœ¨å®é™…ç”Ÿæ´»ä¸­</h2><h3 id="ç®—æ³•å¤æ‚åº¦æ”»å‡»ï¼ˆalgorithmic-complexity-attacksï¼‰"><a href="#ç®—æ³•å¤æ‚åº¦æ”»å‡»ï¼ˆalgorithmic-complexity-attacksï¼‰" class="headerlink" title="ç®—æ³•å¤æ‚åº¦æ”»å‡»ï¼ˆalgorithmic complexity attacksï¼‰"></a>ç®—æ³•å¤æ‚åº¦æ”»å‡»ï¼ˆalgorithmic complexity attacksï¼‰</h3><p>å› ä¸ºä¸Šé¢æåˆ°çš„å¸¸æ•°æ—¶é—´å¤æ‚åº¦æ˜¯æœ‰ä¸ªå‰ææ˜¯åœ¨æ•£åˆ—æ–¹æ³•å‡åŒ€æ•£åˆ—çš„æƒ…å†µä¸‹ã€‚æœ‰äº›æ”»å‡»è€…é€šè¿‡é˜…è¯»javaçš„Stringçš„APIï¼Œå°†å¾ˆå¤šhashCodeå€¼ä¸€æ ·çš„å­—ç¬¦ä¸²å¡ç»™ä½ ã€‚ä¼šå¯¼è‡´ä½ çš„æ•£åˆ—è¡¨æ¯”å¦‚ä¸Šé¢çš„æ¢æµ‹æ³•é‡Œçš„clusterè¶Šæ¥è¶Šé•¿ã€‚</p>
<h3 id="å•å‘æ•£åˆ—ï¼ˆone-way-hash-functionï¼‰"><a href="#å•å‘æ•£åˆ—ï¼ˆone-way-hash-functionï¼‰" class="headerlink" title="å•å‘æ•£åˆ—ï¼ˆone-way hash functionï¼‰"></a>å•å‘æ•£åˆ—ï¼ˆone-way hash functionï¼‰</h3><p>å°†ä¸€æ®µé•¿åº¦çš„å­—ç¬¦ä¸²æ•£åˆ—æˆå›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œäººä»¬å¾ˆéš¾å»å¾—åˆ°åŸå…ˆå€¼ã€‚å¸¸ç”¨è¯­ç”µå­æŒ‡çº¹ï¼Œä¿¡æ¯æ‘˜è¦ï¼Œå¯†ç å­˜å‚¨ã€‚<br>å¸¸è§çš„æœ‰MD4, MD5, SHA-0, SHA-1è¿™äº›ï¼Œä¸è¿‡å®ƒä»¬ä¹Ÿä¸æ˜¯ç»å¯¹å®‰å…¨çš„ã€‚</p>
]]></content>
      <categories>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>hash table</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆæ¶‰gridå¸ƒå±€ğŸ±ï¼ˆäºŒï¼‰</title>
    <url>/2019/04/25/understanding-grid-2/</url>
    <content><![CDATA[<p>ä¸Šä¸€ç¯‡åœ¨è¿™ï¼Œé¡¹ç›®åŸºæœ¬ç»“æ„ä¸å˜<br><a href="/2019/04/25/understanding-grid-1/" title="åˆæ¶‰gridå¸ƒå±€ğŸ±ï¼ˆä¸€ï¼‰">åˆæ¶‰gridå¸ƒå±€ğŸ±ï¼ˆä¸€ï¼‰</a></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item1"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item2"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item3"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item4"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    .item&#123;</span></span><br><span class="line"><span class="undefined">        border: 5px solid rgba(0, 0, 0, 0.03); </span></span><br><span class="line"><span class="undefined">        border-radius: 3px;</span></span><br><span class="line"><span class="undefined">        font-size: 35px;</span></span><br><span class="line"><span class="undefined">        background-color: #ffc600;</span></span><br><span class="line"><span class="undefined">    &#125;		 </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="åŸºäºåˆ†å‰²çº¿æ”¾ç½®å•ä¸ªé¡¹ç›®-item"><a href="#åŸºäºåˆ†å‰²çº¿æ”¾ç½®å•ä¸ªé¡¹ç›®-item" class="headerlink" title="åŸºäºåˆ†å‰²çº¿æ”¾ç½®å•ä¸ªé¡¹ç›® (item)"></a>åŸºäºåˆ†å‰²çº¿æ”¾ç½®å•ä¸ªé¡¹ç›® (item)</h3><p><code>grid-column-start</code> , <code>grid-column-end</code><br>è¿™ä¸¤ä¸ªå±æ€§æ˜¯è®¾ç½®çš„itemä¸Šçš„ï¼Œä¸æ˜¯containerä¸Šã€‚<br>è¿™ä¸¤ä¸ªå±æ€§å¯ä»¥æŒ‡å®šåˆ†å‰²çº¿çš„æ•°å€¼ã€‚</p>
<h4 id="åˆ†å‰²çº¿æ•°å€¼"><a href="#åˆ†å‰²çº¿æ•°å€¼" class="headerlink" title="åˆ†å‰²çº¿æ•°å€¼"></a>åˆ†å‰²çº¿æ•°å€¼</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item1</span>&#123;</span><br><span class="line">    <span class="attribute">grid-column-start</span>: <span class="number">2</span>;</span><br><span class="line">    <span class="attribute">grid-column-end</span>:<span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2019/04/25/understanding-grid-2/E17AAA9F-8B5C-493C-A60F-FE491BABA82D.png">
<p><code>grid-column-start</code> å’Œ <code>grid-column-end</code>å¯ä»¥ç¼©å†™ä¸º<br><code>grid-column</code><br>grid-column: 1 / -1 è¡¨ç¤ºå æ®100%çš„gridçš„å®½åº¦ï¼ˆæ³¨æ„gridçš„å®½åº¦ä¸ä¸€å®šç­‰äºå®¹å™¨çš„å®½åº¦å“¦ï¼‰</p>
<h4 id="span"><a href="#span" class="headerlink" title="span"></a>span</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item1</span>&#123;</span><br><span class="line">    <span class="attribute">grid-column-start</span>: <span class="number">2</span>;</span><br><span class="line">    <span class="attribute">grid-column-end</span>: span <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2019/04/25/understanding-grid-2/829C3E79-6659-4EEC-988E-473377A81F87.png">
<p>spanè¡¨ç¤ºè·¨åº¦ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼Œitemå¼€å§‹çš„åœ°æ–¹åœ¨ç¬¬äºŒæ¡çº¿ä¸Šè·¨åº¦äº†ä¸¤ä¸ªå•å…ƒã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item1</span>&#123;</span><br><span class="line">    <span class="attribute">grid-column-start</span>: span <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®è§„èŒƒä¸Šæ‰€è¯´ï¼Œä¸ªäººæ„Ÿè§‰åº”è¯¥æ˜¯æ¯”å¦‚ç¬¬ä¸€ä¸ªitemå®ƒæ˜¯1,2, ä½†æ˜¯å› ä¸ºå®ƒå¼€å§‹çš„éƒ¨åˆ†æ˜¯<code>span 2</code>,æ‰€ä»¥å®ƒçš„åˆå§‹ä½åˆ°3äº†ï¼Œè€Œæ­¤æ—¶ç»“æŸä½è¿˜åœ¨2,æ ¹æ®è§„èŒƒè¦è¿›è¡Œäº¤æ¢ã€‚</p>
<blockquote>
<p>If the placement for a grid item contains two lines, and the start line is further end-ward than the end line, swap the two lines. If the start line is equal to the end line, remove the end line.</p>
</blockquote>
<h3 id="è‡ªåŠ¨åˆ›å»ºè¡Œåˆ—å¡«å……"><a href="#è‡ªåŠ¨åˆ›å»ºè¡Œåˆ—å¡«å……" class="headerlink" title="è‡ªåŠ¨åˆ›å»ºè¡Œåˆ—å¡«å……"></a>è‡ªåŠ¨åˆ›å»ºè¡Œåˆ—å¡«å……</h3><p>å½“æˆ‘ä»¬ä¸çŸ¥é“å®¹å™¨å®½åº¦çš„æ—¶å€™æƒ³åŠ¨æ€çš„åˆ›å»º <code>grid-template-columns</code>æ—¶å¯ä»¥ç”¨ <code>auto-fit</code> å’Œ<code>auto-fill</code>è¿™ä¸¤ä¸ªå±æ€§ã€‚<br><code>grid-template-columns: repeat(auto-fit, 150px);</code><br>ä¸è€ƒè™‘gapçš„æƒ…å†µä¸‹ï¼Œå½“å®¹å™¨åªæœ‰300pxçš„æ—¶å€™å°±ä¼šåˆ›å»ºä¸¤åˆ—ï¼Œæœ‰450pxå®½çš„æ—¶å€™å°±ä¼šåˆ›å»ºä¸‰åˆ—ã€‚</p>
<p>å…³äºè¿™ä¸¤ä¸ªåŒºåˆ«å¯ä»¥å‚è€ƒ<br><a href="https://css-tricks.com/auto-sizing-columns-css-grid-auto-fill-vs-auto-fit/" target="_blank" rel="noopener">Auto-Sizing Columns in CSS Grid: <code>auto-fill</code> vs <code>auto-fit</code> | CSS-Tricks</a></p>
<h3 id="åŒºåŸŸ-area"><a href="#åŒºåŸŸ-area" class="headerlink" title="åŒºåŸŸ  (area)"></a>åŒºåŸŸ  (area)</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>I'm Sidebar #1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore, sed.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum d<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>I'm Sidebar #2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item footer"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>I'm the footer<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="undefined">    display: grid;</span></span><br><span class="line"><span class="undefined">    grid-gap: 20px;</span></span><br><span class="line"><span class="undefined">    grid-template-columns: 1fr 10fr 1fr;</span></span><br><span class="line"><span class="undefined">    grid-template-rows: 150px 150px 100px;</span></span><br><span class="line"><span class="undefined">    grid-template-areas:</span></span><br><span class="line"><span class="undefined">      "sidebar-1  content   sidebar-2"</span></span><br><span class="line"><span class="undefined">      "sidebar-1  content   sidebar-2"</span></span><br><span class="line"><span class="undefined">      "footer     footer    ."</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.footer</span> &#123;</span></span><br><span class="line"><span class="undefined">    grid-area: footer;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.item1</span> &#123;</span></span><br><span class="line"><span class="undefined">    grid-area: sidebar-1;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.item2</span> &#123;</span></span><br><span class="line"><span class="undefined">    grid-area: content;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.item3</span> &#123;</span></span><br><span class="line"><span class="undefined">    grid-area: sidebar-2;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/2019/04/25/understanding-grid-2/C325D24F-B438-4DAA-A85A-BFF466C0687D.png">
<p><code>grid-template-areas</code> è®¾ç½®å¯¹åº”æ ¼å­(cell) çš„åç§°ï¼Œæ¯ä¸ªåå­—å¯ä»¥å ç”¨å¤šä¸ªæ ¼å­ã€‚ â€œ.â€ è¡¨ç¤ºæ­»åŒºï¼Œfooteråªç”¨äº†ä¸¤ä¸ªæ ¼å­ï¼Œçœç•¥ä¸å†™çš„è¯ä¼šæŠ¥é”™ã€‚<br>å…¶ä¸­ç‚¹å¼€ <code>grid-area</code> ä¼šå‘ç°<br><img src="/2019/04/25/understanding-grid-2/A23EF2DA-DF01-479E-8109-12930B78689D.png"><br>è¿™é‡Œæˆ‘ç†è§£çš„æ˜¯å„ä¸ªareaæ‰€ä»£è¡¨çš„è¾¹ç•Œã€‚</p>
<h3 id="å±…ä¸­"><a href="#å±…ä¸­" class="headerlink" title="å±…ä¸­"></a>å±…ä¸­</h3><h4 id="justify-items-and-align-items"><a href="#justify-items-and-align-items" class="headerlink" title="justify-items and align-items"></a>justify-items and align-items</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">justify-items</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2019/04/25/understanding-grid-2/0040FB61-B3E3-4170-9D03-397DBADE1342.png">
<p>å¦‚å›¾æ‰€ç¤º <code>justify-items</code> å’Œ <code>align-items</code> å¯ä»¥å°†é¡¹ç›®åœ¨å•å…ƒæ ¼å†…å±…ä¸­ï¼Œè€Œä¸”ä¼šä½¿å¾—é¡¹ç›®çš„å®½åº¦æ˜¯å®ƒæœ¬èº«çš„å®½åº¦ï¼Œè€Œä¸ä¼šå æ»¡å•å…ƒæ ¼ã€‚å’Œflexï¼Œæ²¡æœ‰è®¾ç½®<code>align-items</code> å¾ˆåƒï¼Œä¸è®¾ç½®çš„æ—¶å€™ä¼šè‡ªåŠ¨è¢«å¡«æ»¡ã€‚<br><code>place-items</code> å¯ä»¥å°†è¿™ä¸¤ä¸ªå±æ€§åˆèµ·æ¥å†™ã€‚</p>
<h4 id="justify-content-and-align-content"><a href="#justify-content-and-align-content" class="headerlink" title="justify-content and align-content"></a>justify-content and align-content</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-content</span>: center;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2019/04/25/understanding-grid-2/71CCF494-7D86-4A85-8B70-E7ADAF011059.png">
<p>å¦‚å›¾æ‰€ç¤ºï¼Œæ˜¯å°†containerå†…éƒ¨çš„æ•´ä½“è¿›è¡Œå±…ä¸­ã€‚</p>
<h4 id="align-self-and-justify-self"><a href="#align-self-and-justify-self" class="headerlink" title="align-self and justify-self"></a>align-self and justify-self</h4><p> <code>justify-items</code> å’Œ <code>align-items</code> éƒ½æ˜¯ä½œç”¨äºæ‰€æœ‰çš„é¡¹ç›®ä¸Šï¼Œè¿™ä¸ªå¯ä»¥è®¾ç½®å•ä¸ªé¡¹ç›®çš„æ’åˆ—æ–¹å¼ã€‚<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">justify-items</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item1</span>&#123;</span><br><span class="line">    <span class="attribute">justify-self</span>: start;</span><br><span class="line">    <span class="attribute">align-self</span>: start;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<img src="/2019/04/25/understanding-grid-2/D22D06E5-690C-4864-B8E8-5B03E38AF291.png">
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a href="https://css-tricks.com/snippets/css/complete-guide-grid/" target="_blank" rel="noopener">A Complete Guide to Grid | CSS-Tricks</a><br> <a href="https://www.w3.org/TR/css-grid-1/" target="_blank" rel="noopener">https://www.w3.org/TR/css-grid-1/</a> </p>
]]></content>
      <categories>
        <category>frontend</category>
        <category>css</category>
      </categories>
      <tags>
        <tag>grid</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆæ¶‰gridå¸ƒå±€ğŸ±ï¼ˆä¸€ï¼‰</title>
    <url>/2019/04/25/understanding-grid-1/</url>
    <content><![CDATA[<p>ä¸€ç›´è§‰å¾—grid æ˜¯ä¸ªç¦»æˆ‘å¾ˆé¥è¿œçš„æŠ€æœ¯ï¼Œä»¥ä¸ºå…¼å®¹æ€§å·®ï¼Œç›´åˆ°æœ€è¿‘æŸ¥çœ‹äº† <a href="https://caniuse.com/#search=grid" target="_blank" rel="noopener">https://caniuse.com/#search=grid</a> </p>
<img src="/2019/04/25/understanding-grid-1/CC870F6C-ECE9-4DA6-A367-D31D1B0FC7DB.png">
<p>å‘ç°å…¶å®å…¼å®¹æ€§å·²ç»å¾ˆå¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åŸºäº<a href="https://cssgrid.io/" target="_blank" rel="noopener">Wes Bosçš„gridè¯¾ç¨‹</a>ï¼Œä»¥åŠç›¸å…³æŠ€æœ¯æ–‡ç« æ•´ç†è€Œæˆã€‚<br>ç›¸å…³å±æ€§çš„å–å€¼å¯èƒ½æœ‰å¤šä¸ªï¼Œéœ€è¦è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£ğŸ˜¯</p>
<h3 id="å¼€å‘æµè§ˆå™¨é€‰æ‹©"><a href="#å¼€å‘æµè§ˆå™¨é€‰æ‹©" class="headerlink" title="å¼€å‘æµè§ˆå™¨é€‰æ‹©"></a>å¼€å‘æµè§ˆå™¨é€‰æ‹©</h3><p>æ¨èä½¿ç”¨ç«ç‹æµè§ˆå™¨å¼€å‘è€…ç‰ˆæœ¬ <a href="https://www.mozilla.org/en-US/firefox/developer/" target="_blank" rel="noopener">Firefox Developer Edition</a> ï¼Œå¯¹css gridè°ƒè¯•å¾ˆæœ‰å¸®åŠ©ï¼Œç›¸å…³å¥½å¤„ä¸‹æ–‡æœ‰æåˆ°ã€‚<br><a id="more"></a></p>
<h3 id="æœ¯è¯­"><a href="#æœ¯è¯­" class="headerlink" title="æœ¯è¯­"></a>æœ¯è¯­</h3><h4 id="å®¹å™¨-grid-container"><a href="#å®¹å™¨-grid-container" class="headerlink" title="å®¹å™¨ (grid container)"></a>å®¹å™¨ (grid container)</h4><p>å°±æ˜¯è¿ç”¨<code>display: grid</code>çš„å…ƒç´ ï¼Œå¯¹å…¶å†…éƒ¨çš„ç›´æ¥å­å…ƒç´ è¿›è¡Œå¸ƒå±€ã€‚</p>
<h4 id="é¡¹ç›®-grid-item"><a href="#é¡¹ç›®-grid-item" class="headerlink" title="é¡¹ç›® (grid item)"></a>é¡¹ç›® (grid item)</h4><p>å®¹å™¨çš„ç›´æ¥å­å…ƒç´ ï¼Œä¸‹é¢ä»£ç ä¸­çš„<code>.item</code> ,ä¸åŒ…æ‹¬ <code>.sub-item</code><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"sub-item"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="åˆ†å‰²çº¿-grid-line"><a href="#åˆ†å‰²çº¿-grid-line" class="headerlink" title="åˆ†å‰²çº¿ (grid line)"></a>åˆ†å‰²çº¿ (grid line)</h4><p>åˆ†å‰²gridå†…è¡Œå’Œåˆ—çš„çº¿ã€‚<br>æ‰“å¼€ç«ç‹å¼€å‘è€…ç‰ˆçš„å¼€å‘è€…å·¥å…·æ›´ç›´è§‚ç‚¹ã€‚å°†éœ€è¦è°ƒè¯•çš„grid å®¹å™¨å‹¾ä¸Šï¼Œå³è¾¹å‹¾é€‰ä¸Šæ˜¾ç¤ºåˆ†å‰²çº¿æ•°å­—ã€‚<br><img src="/2019/04/25/understanding-grid-1/5CD70B16-D50E-440E-97D3-619D978B1DF2.png"><br>å¦‚ä¸‹å›¾æ‰€ç¤ºå¯ä»¥çœ‹åˆ°åˆ†å‰²çº¿çš„åºå·äº†ã€‚</p>
<img src="/2019/04/25/understanding-grid-1/59D74D20-5580-4AE1-8482-FCE7DE810E16.png">
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ps: å¦‚æœå¯¹ <code>fr</code> æœ‰ç–‘é—®çš„å¯ä»¥åœ¨ä¸‹æ–‡ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†å±•ç¤ºç«ç‹çš„å¼€å‘è€…å·¥å…·ã€‚</p>
<h4 id="å•å…ƒæ ¼-grid-cell"><a href="#å•å…ƒæ ¼-grid-cell" class="headerlink" title="å•å…ƒæ ¼ (grid cell)"></a>å•å…ƒæ ¼ (grid cell)</h4><p>ä¸Šå›¾æ‰€ç¤ºæœ‰ä¸€è¡Œå››åˆ—ã€‚è¢«åˆ†å‰²å‡ºæ¥4ä¸ªå•å…ƒæ ¼ã€‚</p>
<hr>
<p>æ­£æ–‡éƒ¨åˆ†å¼€å§‹ï¼Œæ²¡æœ‰ç”³æ˜html ç»“æ„çš„ä»£ç éƒ¨åˆ†éƒ½æ˜¯é‡‡ç”¨ä»¥ä¸‹<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item1"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item2"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item3"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item4"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.item</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border</span>: 5<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">rgba</span>(0, 0, 0, 0<span class="selector-class">.03</span>); </span></span><br><span class="line"><span class="undefined">        border-radius: 3px;</span></span><br><span class="line"><span class="undefined">        font-size: 35px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#ffc600</span>;</span></span><br><span class="line"><span class="undefined">    &#125;		 </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="1ã€grid-åŸºç¡€"><a href="#1ã€grid-åŸºç¡€" class="headerlink" title="1ã€grid åŸºç¡€"></a>1ã€grid åŸºç¡€</h3><img src="/2019/04/25/understanding-grid-1/8CCD3D09-553A-4CC7-8CE7-A057D4DCD8A5.png">
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">50px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="number">50px</span> <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çŸ¥è¯†ç‚¹ï¼š</p>
<ol>
<li><code>grid-template-columns</code> å®šä¹‰åˆ—ã€‚ <code>grid-template-rows</code> å®šä¹‰è¡Œã€‚<br><code>grid-gap</code> å®šä¹‰åˆ—è¡Œä¹‹é—´çš„é—´éš”ã€‚</li>
<li>åˆ†å‰²çº¿çºµå‘æœ‰3æ¡ï¼Œæ¨ªå‘åŒæ ·æœ‰3æ¡ã€‚æ¯æ¡åˆ†å‰²çº¿çš„æ•°å­—æ ‡ç¤ºå¯ä»¥æœ‰æ­£æ•°å’Œè´Ÿæ•°ï¼Œ-1 è¡¨ç¤ºæœ€åä¸€æ¡çº¿ã€‚</li>
<li>4ä¸ªé¡¹ç›®æ”¾å…¥gridä¸­çš„æ—¶å€™ä¼šè¢«æ‹‰ä¼¸æ”¾å¤§ã€‚å½“å‰æ ·å¼ä¸­æ²¡æœ‰è®¾ç½®.item çš„å¤§å°ï¼Œä¼šè¢«è‡ªåŠ¨æ‹‰ä¼¸ã€‚å¦‚æœè®¾ç½®äº†å¤§å°<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>åˆ™å¦‚ä¸‹å›¾æ‰€ç¤º<br><img src="/2019/04/25/understanding-grid-1/B04A072A-1436-463E-99C0-89B96998928C.png"><br>æ²¡æœ‰è¶…å‡ºå®¹å™¨çš„èŒƒå›´</p>
<ol start="4">
<li>gridè¾¹ç•Œåœ¨è°ƒè¯•å·¥å…·ä¸‹æ˜¯å®ç°ã€‚åˆ’åˆ†è¡Œåˆ—çš„çº¿æ˜¯è™šçº¿ï¼›gapä¸­å¡«å……çš„æ˜¯æ–œçº¿ã€‚</li>
<li><code>grid-template-columns: 50px 100px;</code> å’Œ <code>grid-template-rows: 50px 80px;</code> å¯ä»¥è¢«ç®€å†™æˆ <code>grid-template: 50px 80px/50px 100px;</code></li>
</ol>
<h3 id="2ã€æ˜ç¡®å’Œéæ˜ç¡®çš„grid-explicit-implicit-grid"><a href="#2ã€æ˜ç¡®å’Œéæ˜ç¡®çš„grid-explicit-implicit-grid" class="headerlink" title="2ã€æ˜ç¡®å’Œéæ˜ç¡®çš„grid ( explicit implicit grid )"></a>2ã€æ˜ç¡®å’Œéæ˜ç¡®çš„grid ( explicit implicit grid )</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">50px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2019/04/25/understanding-grid-1/8F27B740-C828-43C6-B2A8-8702CBE1EC34.png">
<ol>
<li>æˆ‘ä»¬ç”¨<code>grid-template-columns</code>åˆ›å»ºäº†ä¸¤åˆ—ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æŒ‡å®šè¡Œ, grid é»˜è®¤æƒ…å†µä¸‹ä¼šå¸®æˆ‘ä»¬åˆ›å»ºæ–°çš„åˆ†å‰²çº¿å’Œè¡Œã€‚</li>
<li>æ˜ç¡®çš„grid (explicit grid)  e.g. <code>grid-template-columns</code>ï¼Œ<code>grid-template-rows</code> åˆ›å»ºçš„åœ¨å¼€å‘è€…å·¥å…·ä¸Šæ˜¯è™šçº¿ï¼Œè€Œéæ˜ç¡®åˆ›å»ºçš„çœ‹å›¾ä¸Š1ã€3ï¼Œ2ã€4ä¹‹é—´çš„æ˜¯ç‚¹çº¿ã€‚</li>
<li>è‡ªåŠ¨åˆ›å»ºçš„è¡Œçš„é«˜åº¦æ˜¯itemæœ¬èº«çš„é«˜åº¦ã€‚å¦‚æœåŒä¸€è¡Œçš„ä¸¤ä¸ªitemé«˜åº¦ä¸ä¸€è‡´åˆ™ä¼šé‡‡ç”¨é«˜åº¦é«˜çš„itemä½œä¸ºå½“å‰è¡Œçš„é«˜åº¦ã€‚ <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.item3</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<img src="/2019/04/25/understanding-grid-1/B7AAF5EE-56E9-4F3C-87B9-EDF3EE9A264B.png">
<ol start="4">
<li><code>grid-auto-rows</code> å¯ä»¥å®šä¹‰è‡ªåŠ¨æ·»åŠ çš„rowåˆ†é…çš„é«˜åº¦<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">50px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">grid-auto-rows</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<img src="/2019/04/25/understanding-grid-1/3FCE0762-9539-45F6-9277-1BCF011AC720.png">
<p>ç«ç‹ä¸­ç›®å‰åªèƒ½æ˜¯å•ä¸ªå€¼ï¼›è°·æ­Œå¯ä»¥æ˜¯ä¸¤ä¸ªå€¼ã€‚<br><img src="/2019/04/25/understanding-grid-1/21E91189-4015-48C9-BC32-987767AD451C.png"><br>ï¼ˆç«ç‹ï¼‰<br><img src="/2019/04/25/understanding-grid-1/ABEAAEE7-96F8-4726-A55E-8472BDDA1A80.png"><br>ï¼ˆè°·æ­Œï¼‰</p>
<h3 id="3ã€grid-auto-flow"><a href="#3ã€grid-auto-flow" class="headerlink" title="3ã€grid-auto-flow"></a>3ã€grid-auto-flow</h3><p>é»˜è®¤æƒ…å†µä¸‹gridä¼šåœ¨å½“å‰è¡Œæ”¾ä¸ä¸‹æ–°çš„itemæ—¶ä¼šåˆ›å»ºæ–°çš„è¡Œï¼Œé€šè¿‡<code>grid-auto-flow: column</code>å¯ä»¥æ›´æ”¹è¿™ä¸ªé»˜è®¤è¡Œä¸ºã€‚<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">50px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">grid-auto-flow</span>: column;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<img src="/2019/04/25/understanding-grid-1/05BA7A5B-332D-4004-8520-39459846D31B.png">
<ol>
<li>gridä¼šåˆ›å»ºéæ˜ç¡®çš„åˆ—ï¼Œæ³¨æ„çœ‹è™šçº¿ã€‚</li>
<li>åˆ›å‡ºæ˜ç¡®gridçš„itemçš„å®½åº¦åœ¨ä¸æŒ‡å®šå®½åº¦çš„æƒ…å†µä¸‹ä¼šå‡åˆ†å‰©ä¸‹çš„ç©ºé—´ç±»ä¼¼æˆ‘ä»¬å³å°†è¦ä»‹ç»çš„<code>fr</code>å•ä½ã€‚è‡ªåŠ¨åˆ›å»ºçš„è¡Œçš„é«˜åº¦æ˜¯itemè‡ªèº«çš„é«˜ï¼Œæœ‰ç‚¹åƒä¸€ä¸ªdivçš„é»˜è®¤å®½åº¦å°±æ˜¯å®¹å™¨çš„å®½åº¦ï¼Œé«˜åº¦æ˜¯divå†…å®¹çš„é«˜åº¦ã€‚</li>
<li>å¯ä»¥é€šè¿‡<code>grid-auto-columns</code>æŒ‡å®šéæ˜ç¡®åˆ›ç«‹çš„åˆ—ã€‚<h3 id="4ã€è®¾ç½®è¡Œã€åˆ—çš„å¤§å°"><a href="#4ã€è®¾ç½®è¡Œã€åˆ—çš„å¤§å°" class="headerlink" title="4ã€è®¾ç½®è¡Œã€åˆ—çš„å¤§å°"></a>4ã€è®¾ç½®è¡Œã€åˆ—çš„å¤§å°</h3>é™¤äº†ä¸Šé¢è®¾ç½®<code>grid-template-columns: 50px 100px</code> è¿™ç§å›ºå®šå¤§å°è¿˜æœ‰å…¶ä»–å•ä½å¯ä»¥ç”¨ã€‚<code>auto</code>, <code>fr</code>, <code>%</code>; ç”šè‡³è¿˜å¯ä»¥åº”ç”¨å‡½æ•°<code>repeat()</code>, <code>minmax()</code><h4 id="ç™¾åˆ†æ•°"><a href="#ç™¾åˆ†æ•°" class="headerlink" title="ç™¾åˆ†æ•°"></a>ç™¾åˆ†æ•°</h4><code>grid-template-columns: 200px 50%</code><img src="/2019/04/25/understanding-grid-1/FD4BD050-43E9-41A4-AA95-6D38C2DE58A5.png">
å¦‚å›¾æ‰€ç¤ºï¼Œåˆ†æˆä¸¤åˆ—ç¬¬äºŒåˆ—çš„å®½åº¦æ˜¯containerå®½çš„50%ã€‚å¦‚æœå±å¹•å®½åº¦å†å°çš„è¯å°±ä¼šå‡ºç°å¦‚ä¸‹å›¾æ‰€ç¤º<img src="/2019/04/25/understanding-grid-1/B0E65BAB-D479-4552-924D-C7C3B4391FBF.png">
gridè¶…å‡ºäº†containerçš„èŒƒå›´ï¼Œå†å°çš„è¯å°±ä¼šå‡ºç°æ»šåŠ¨æ¡äº†ã€‚<h4 id="fr"><a href="#fr" class="headerlink" title="fr"></a>fr</h4>fræ˜¯fractional. å¯ä»¥è€ƒè™‘æˆfree space. ä»–ä¼šå°†å‰©ä¸‹ç©ºé—´è¿›è¡Œåˆ’åˆ†ï¼Œå¹¶ä¸”å…¼é¡¾åˆ°grid-gap.æœ‰ç‚¹åƒflexboxçš„<code>flex</code>ä¼šè‡ªåŠ¨å¡«æ»¡å‰©ä½™ç©ºé—´ä¸€æ ·ã€‚<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<img src="/2019/04/25/understanding-grid-1/fr.gif">
<h4 id="auto"><a href="#auto" class="headerlink" title="auto"></a>auto</h4><p>ä¸ªäººæ€»ç»“å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¦‚æœæ²¡æœ‰frä¹‹ç±»çš„å•ä½ï¼Œæ¯”å¦‚ px autoçš„ç»„åˆï¼Œautoåœ¨è¿™é‡Œä¼šæ‰®æ¼”ç±»ä¼¼frçš„è§’è‰²ï¼Œä¼šè‡ªåŠ¨å¡«å……ï¼›å¦‚æœå…¨æ˜¯autoåˆ™ç±»ä¼¼ã€‚<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">50px</span> auto auto;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<img src="/2019/04/25/understanding-grid-1/E973B318-CBE3-4FB5-B555-D0B847279CFA.png">
<ol start="2">
<li>å¦‚æœæœ‰frï¼Œåˆ™autoå°±æ˜¯å½“åˆ—æœ€å®½çš„å®½åº¦ä½œä¸ºåˆ—å®½ã€‚frè´Ÿè´£å¡«å……<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr auto;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item2</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item4</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<img src="/2019/04/25/understanding-grid-1/D5965548-1028-4923-8EA9-BE35BE357C47.png">
<ol start="3">
<li>å¦‚æœitemæœ‰ min-widthçš„æ—¶å€™ï¼Œautoåˆ—æ˜¯ä¸ä¼šæ¯”è¿™ä¸ªmin-widthè¦å°çš„ã€‚</li>
</ol>
<h4 id="repeat"><a href="#repeat" class="headerlink" title="repeat ()"></a>repeat ()</h4><p><code>grid-template-columns: 1fr 1fr 1fr</code> å¯ä»¥å†™æˆ <code>grid-tempalte-columns: repeat(3,1fr)</code><br>repeatå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¹Ÿå¯ä»¥ä¸ºå¤šä¸ªå•ä½ã€‚æ¯”å¦‚ <code>repeat(2,1fr 100px)</code></p>
<h4 id="minmax"><a href="#minmax" class="headerlink" title="minmax()"></a>minmax()</h4><p>è¡¨ç¤ºä¸€ä¸ªå–å€¼èŒƒå›´ï¼›<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:grid;</span><br><span class="line">    <span class="attribute">grid-template-columns </span>: <span class="built_in">minmax</span>(100px, 1fr)  <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœæœ€å¤§å€¼æ¯”æœ€å°å€¼å°çš„æƒ…å†µä¸‹ç›´æ¥è¿”å›æœ€å°å€¼, åœ¨å½“å‰å®¹å™¨æ˜¯1fr 1fr 1frä¸”å•ä¸ªfrçš„å€¼å¤§äº100pxçš„æ—¶å€™æ‰ä¼šè¿ç”¨frï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯100px</p>
<a href="/2019/04/25/understanding-grid-2/" title="åˆæ¶‰gridå¸ƒå±€ğŸ±ï¼ˆäºŒï¼‰">åˆæ¶‰gridå¸ƒå±€ğŸ±ï¼ˆäºŒï¼‰</a>]]></content>
      <categories>
        <category>frontend</category>
        <category>css</category>
      </categories>
      <tags>
        <tag>grid</tag>
      </tags>
  </entry>
  <entry>
    <title>å°ç™½çœ¼ä¸­çš„httpsğŸ‘€</title>
    <url>/2019/04/15/understanding-https/</url>
    <content><![CDATA[<h3 id="httpsçš„ä½œç”¨"><a href="#httpsçš„ä½œç”¨" class="headerlink" title="httpsçš„ä½œç”¨"></a>httpsçš„ä½œç”¨</h3><p>å°†SSLå¼•å…¥httpï¼Œåœ¨ä¸¤ä¸ªç³»ç»Ÿï¼ˆæ¯”å¦‚å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼‰ä¸­å¯ä»¥ä¼ è¾“ä¿¡æ¯çš„åŒæ—¶ä¿è¯å®‰å…¨æ€§ï¼Œå³ä½¿ä¼ è¾“è¿‡ç¨‹ä¸­è¢«åˆ«äººæˆªèƒ¡ï¼Œåˆ«äººä¹Ÿçœ‹ä¸å‡ºä»€ä¹ˆï¼Œå› ä¸ºä¼ è¾“çš„ä¿¡æ¯éƒ½è¢«åŠ å¯†äº†ã€‚</p>
<h4 id="å’Œhttpçš„åŒºåˆ«"><a href="#å’Œhttpçš„åŒºåˆ«" class="headerlink" title="å’Œhttpçš„åŒºåˆ«"></a>å’Œhttpçš„åŒºåˆ«</h4><ol>
<li>åŠ å¯†å’Œä¸åŠ å¯†çš„æ–‡æœ¬ä¼ è¾“</li>
<li>httpé»˜è®¤ç«¯å£80 httpsé»˜è®¤ç«¯å£443</li>
<li>ç½‘å€å¼€å¤´ä¸ä¸€æ ·</li>
<li>æ•°æ®ä¼ è¾“æ›´å¿«å› ä¸ºä¿¡æ¯è¢«åŠ å¯†åå‡å°äº†ä½“ç§¯<a id="more"></a>
<h3 id="å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†"><a href="#å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†" class="headerlink" title="å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†"></a>å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†</h3>å¯¹ç§°åŠ å¯†ï¼šåŒæ–¹æ¡æœ‰åŒä¸€ä¸ªkey,å¯ä»¥äº‹å…ˆåŒæ–¹åå®šå¥½ã€‚è¿™ä¸ªkeyå¯ä»¥åŒæ—¶ç”¨æ¥åŠ å¯†å’Œè§£å¯†ã€‚</li>
</ol>
<p>éå¯¹ç§°åŠ å¯†ï¼š ä¸€å¯¹ğŸ”‘ï¼Œå…¬é’¥å’Œç§é’¥ï¼› å…¬é’¥å¯ä»¥è§£å¯†ç§é’¥åŠ å¯†çš„ä¿¡æ¯ï¼Œç§é’¥ä¹Ÿå¯ä»¥è§£å¯†å…¬é’¥çš„ä¿¡æ¯ï¼Œå…¬é’¥å¯ä»¥åˆ†äº«ç»™ä»»ä½•äººã€‚æœ‰çš„æ—¶å€™æ¯”å¦‚ç¬¬ä¸€æ¬¡æ²Ÿé€šï¼ŒåŒæ–¹æ— æ³•è§é¢çš„æƒ…å†µä¸‹å°±è¦ç”¨åˆ°éå¯¹ç§°åŠ å¯†ã€‚</p>
<h4 id="ä¸¾ä¾‹åˆ©ç”¨éå¯¹ç§°åŠ å¯†å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„è¯·æ±‚å®‰å…¨ã€‚"><a href="#ä¸¾ä¾‹åˆ©ç”¨éå¯¹ç§°åŠ å¯†å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„è¯·æ±‚å®‰å…¨ã€‚" class="headerlink" title="ä¸¾ä¾‹åˆ©ç”¨éå¯¹ç§°åŠ å¯†å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„è¯·æ±‚å®‰å…¨ã€‚"></a>ä¸¾ä¾‹åˆ©ç”¨éå¯¹ç§°åŠ å¯†å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„è¯·æ±‚å®‰å…¨ã€‚</h4><ol>
<li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¿æ¥è¯·æ±‚ã€‚</li>
<li>æœåŠ¡ç«¯å°†å…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯ï¼ŒåŒæ—¶ä¿ç•™ä¸€ä»½ç§é’¥ã€‚</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ°å…¬é’¥åå°†å¾…å‘é€çš„ä¿¡æ¯åˆ©ç”¨å…¬é’¥åŠ å¯†å‘ç»™æœåŠ¡ç«¯ã€‚</li>
<li>æœåŠ¡ç«¯åˆ©ç”¨ç§é’¥å°†å®¢æˆ·ç«¯å‘æ¥çš„ä¿¡æ¯è¿›è¡Œè§£å¯†ã€‚</li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸ºäº†ä¿è¯å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„ä¿¡æ¯ä¸è¢«æ‹¦æˆªã€‚é»‘å®¢å¦‚æœåœ¨ç¬¬ä¸‰éƒ¨æ‹¦æˆªçš„è¯ï¼Œä»–æ²¡æœ‰ç§é’¥è§£å¯†ä¸äº†ä¿¡æ¯ã€‚ä½†æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœç¬¬äºŒéƒ¨è¢«é»‘å®¢æ‹¦æˆªäº†ï¼Œé»‘å®¢å°†è‡ªå·±çš„å…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ç„¶åå°±ä¼šå°†è‡ªå·±çš„ä¿¡æ¯ç”¨é»‘å®¢çš„å…¬é’¥åŠ å¯†å‘é€çš„æ—¶å€™å†è¢«é»‘å®¢æ‹¦æˆªä¿¡æ¯å°±è¢«é»‘å®¢çŸ¥é“äº†ã€‚</p>
<h3 id="è¯ä¹¦çš„ä½œç”¨"><a href="#è¯ä¹¦çš„ä½œç”¨" class="headerlink" title="è¯ä¹¦çš„ä½œç”¨"></a>è¯ä¹¦çš„ä½œç”¨</h3><p>è¦èƒ½ä¿è¯æˆ‘æ”¶åˆ°çš„å…¬é’¥æ˜¯è¦èƒ½å’Œæˆ‘æƒ³æ²Ÿé€šçš„äººå¯¹çš„ä¸Šã€‚æ‰€ä»¥å°±ä¼šæƒ³åˆ°åœ¨è¿™ä¸ªå…¬é’¥ä¸ŠåŠ ä¸Šç­¾åï¼Œè¡¨æ˜è¿™ä¸ªäººçš„èº«ä»½ã€‚ä½†æ˜¯å°±æ¯”å¦‚è¯´ä½ æƒ³å’Œå°æ˜æ²Ÿé€šä¸Šã€‚å½“ä½ ç¬¬ä¸€æ¬¡å’Œå°æ˜æ²Ÿé€šçš„æ—¶å€™ï¼Œä½ æ— æ³•ç¡®è®¤ä½ æ”¶åˆ°çš„ç­¾åæ˜¯ä¸æ˜¯å°æ˜ç­¾çš„ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸èƒ½ç¡®è®¤æ˜¯å°æ˜ï¼šå°æ˜çš„ç­¾åé‡Œè¯´æˆ‘å°±æ˜¯å°æ˜ã€‚é‚£å°é»‘ä¹Ÿå¯ä»¥å‘ä¸ªç­¾åè¯´æˆ‘æ˜¯å°é»‘ã€‚</p>
<p>æ€ä¹ˆåšï¼šå¼•å…¥ç¬¬ä¸‰æ–¹æœºæ„è¯æ˜å°æ˜å°±æ˜¯å°æ˜ï¼›å°±å¥½åƒèº«ä»½è¯ä¸€æ ·ï¼Œè¿™æ˜¯å›½å®¶æœºæ„è¯æ˜ä½ çš„ä¸ªäººèº«ä»½ã€‚</p>
<h4 id="ä¼ªé€ è¯ä¹¦"><a href="#ä¼ªé€ è¯ä¹¦" class="headerlink" title="ä¼ªé€ è¯ä¹¦"></a>ä¼ªé€ è¯ä¹¦</h4><p>ä¼ªé€ è¯ä¹¦æœ¬èº«æ˜¯ä¸å›°éš¾ï¼›ä½†æ˜¯æµè§ˆå™¨åªèƒ½ä¿¡ä»»æŸäº›æƒå¨æœºæ„ç­¾å‘çš„è¯ä¹¦ã€‚è¿™äº›æƒå¨æœºæ„çš„ç®—æ³•å¾ˆå¤æ‚ï¼Œä¿è¯äº†ä¸ä¼šè¢«è½»æ˜“ä¼ªé€ ç­¾åã€‚</p>
<h3 id="SSLå…·ä½“å¦‚ä½•å·¥ä½œ"><a href="#SSLå…·ä½“å¦‚ä½•å·¥ä½œ" class="headerlink" title="SSLå…·ä½“å¦‚ä½•å·¥ä½œ"></a>SSLå…·ä½“å¦‚ä½•å·¥ä½œ</h3><p>ssl  Secure Socket Layer . å®ƒæ˜¯ä¸€ä¸ªä¼ è¾“åŠ å¯†çš„æœºåˆ¶ï¼Œä¿¡æ¯åœ¨ä¸¤ä¸ªç³»ç»Ÿä¹‹é—´ä¼ è¾“æ—¶å®ƒæ¥ä¿è¯ä¼ è¾“çš„å®‰å…¨æ€§ï¼Œæ¯”å¦‚ä»€ä¹ˆç”¨æˆ·ä¿¡æ¯ï¼Œé“¶è¡Œå¡è´¦å·å¯†ç ã€‚<br>sslé€šè®¯ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤</p>
<ol>
<li>ssl æ¡æ‰‹</li>
<li>å®é™…æ•°æ®ä¼ è¾“</li>
</ol>
<h4 id="sslæ¡æ‰‹"><a href="#sslæ¡æ‰‹" class="headerlink" title="sslæ¡æ‰‹"></a>sslæ¡æ‰‹</h4><p>æ¡æ‰‹é˜¶æ®µæ˜¯éå¯¹ç§°åŠ å¯†ï¼Œå®é™…æ•°æ®ä¼ è¾“è¿‡ç¨‹æ˜¯å¯¹ç§°åŠ å¯†ã€‚</p>
<ol>
<li>å®¢æˆ·ç«¯å‘é€å®¢æˆ·ç«¯çš„sslç‰ˆæœ¬å·ï¼Œå¯†ç è®¾ç½®(cipher settings)ç»™åˆ°æœåŠ¡å™¨</li>
<li>æœåŠ¡å™¨åº”ç­”æœåŠ¡å™¨çš„sslç‰ˆæœ¬å·ï¼Œå¯†ç è®¾ç½®ã€‚ssl è¯ä¹¦ï¼ˆé‡Œé¢åŒ…å«æœ‰å…¬é’¥ï¼‰</li>
<li>å®¢æˆ·ç«¯åœ¨CAå¤„éªŒè¯sslè¯ä¹¦ã€‚éªŒè¯æˆåŠŸåå¾€ä¸‹èµ°ï¼ŒéªŒè¯å¤±è´¥åˆ™æŠ›é”™</li>
<li>å®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªsession keyã€‚ä»¥åˆšåˆšéªŒè¯è¿‡çš„å…¬é’¥åŠ å¯†å‘é€ç»™æœåŠ¡å™¨ã€‚</li>
<li>æœåŠ¡å™¨ç”¨å¯¹åº”çš„ç§é’¥è§£å¯†å‡ºsession key.å¹¶ä¸”ç”¨session key åŠ å¯†åçš„ä¿¡æ¯å‘ŠçŸ¥å®¢æˆ·ç«¯ã€‚ keyæ˜¯ç”¨äºåç»­ä¼ è¾“æ•°æ®çš„å¯¹ç§°åŠ å¯†çš„keyã€‚éå¯¹ç§°åŠ å¯†çš„å…¬é’¥å’Œç§é’¥è¿™ä¸ªæ—¶å€™å°±ä¸ä½¿ç”¨äº†ã€‚</li>
</ol>
<h4 id="å®é™…æ•°æ®ä¼ è¾“"><a href="#å®é™…æ•°æ®ä¼ è¾“" class="headerlink" title="å®é™…æ•°æ®ä¼ è¾“"></a>å®é™…æ•°æ®ä¼ è¾“</h4><p>ç”¨ä¸Šé¢å¾—åˆ°çš„session key å¯¹ç§°åŠ å¯†è¿›è¡Œä¼ è¾“ã€‚</p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p> <a href="https://medium.freecodecamp.org/https-explained-with-carrier-pigeons-7029d2193351" target="_blank" rel="noopener">https://medium.freecodecamp.org/https-explained-with-carrier-pigeons-7029d2193351</a> </p>
<p><a href="https://www.tutorialsteacher.com/https" target="_blank" rel="noopener">Learn Https</a></p>
]]></content>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆæ¢HTTPç¼“å­˜ğŸ‘€</title>
    <url>/2019/04/15/understand-http-cache/</url>
    <content><![CDATA[<h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p>æµè§ˆå™¨ï¼ˆå’Œä»£ç†ï¼‰åˆ©ç”¨ç¼“å­˜å‡å°‘httpæ•°é‡æˆ–è€…æ˜¯å‡å°‘ç›¸åº”æ–‡ä»¶å¤§å°ï¼Œå¢åŠ é¡µé¢åŠ è½½é€Ÿåº¦ã€‚</p>
<h2 id="ç¼“å­˜æ–¹æ³•"><a href="#ç¼“å­˜æ–¹æ³•" class="headerlink" title="ç¼“å­˜æ–¹æ³•"></a>ç¼“å­˜æ–¹æ³•</h2><h3 id="expires-header"><a href="#expires-header" class="headerlink" title="expires header"></a>expires header</h3><p> æµè§ˆå™¨ä¼šå°†è¿‡æœŸæ—¶é—´å’Œç›¸åº”çš„urlç¼“å­˜èµ·æ¥ï¼Œè¯·æ±‚åŒä¸€ä¸ªèµ„æºæ—¶æŸ¥çœ‹æ˜¯å¦è¿‡æœŸï¼Œæ²¡æœ‰è¿‡æœŸå°±ç›´æ¥ä»ç¼“å­˜é‡Œå–å‡ºï¼Œä¸ç”¨å‘é€è¯·æ±‚äº†ã€‚è¿‡æœŸä¹‹åçš„ç­–ç•¥è¯·çœ‹æœ€ä¸‹é¢çš„<strong>ç¼“å­˜æœ‰æ•ˆæ€§ç¡®è®¤</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">res.setHeader(â€œExpiresâ€, <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() + <span class="number">2592000000</span>).toUTCString());</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>ä¼˜ç‚¹ï¼š<br>æ²¡æœ‰é¢å¤–è¯·æ±‚ <code>200 OK (from memory cache)</code></p>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>å› ä¸ºæ˜¯ä¸€ä¸ªå…·ä½“æ—¶é—´ï¼Œéœ€è¦æœåŠ¡ç«¯å’Œå®¢æœç«¯çš„æ—¶é—´ä¸€è‡´</li>
<li>éœ€è¦ç›‘æµ‹è¿™ä¸ªèµ„æºï¼Œå½“æ—¶é—´ç‚¹åˆ°äº†çš„æ—¶å€™è¦æ›´æ–°è¿‡æœŸæ—¶é—´</li>
</ol>
<h3 id="Cache-Control-Max-Age"><a href="#Cache-Control-Max-Age" class="headerlink" title="Cache-Control Max-Age"></a>Cache-Control Max-Age</h3><p>ä½¿ç”¨äº†åç§»æ—¶é—´ï¼Œåº”è¯¥æ˜¯æŠŠèµ„æºåˆ›å»ºæ—¶é—´å’Œèµ„æºä»¥åŠåç§»æ—¶é—´ä¸€èµ·å­˜åˆ°ç¼“å­˜é‡Œäº†ã€‚æ¯æ¬¡è®¿é—®èµ„æºçš„æ—¶å€™ï¼ŒæŸ¥çœ‹èµ„æºåˆ›å»ºçš„æ—¶é—´å¹¶ä¸”åŠ ä¸Šåç§»æ—¶é—´å’Œç°åœ¨æ—¶é—´è¿›è¡Œæ¯”è¾ƒã€‚å’Œ<code>Expires</code>ä¸€æ ·éƒ½æ˜¯ä¸å‘é€è¯·æ±‚äº†ã€‚<br>åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šç®€å•æµ‹äº†ä¸‹ï¼Œ500KBçš„ä¹Ÿå¯ä»¥ç¼“å­˜ã€‚<br>åŒæ—¶æœ‰<code>Expires</code> å’Œ <code>Cache-Control</code> çš„è¯åè€…ä¼šè¦†ç›–å‰è€…<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">res.setHeader(<span class="string">"Cache-Control"</span>, <span class="string">"public, max-age=2592000"</span>);</span><br></pre></td></tr></table></figure></p>
<h4 id="server-cache-control"><a href="#server-cache-control" class="headerlink" title="server cache-control"></a>server cache-control</h4><p>ä¸Šé¢çš„æ˜¯serverç«¯çš„</p>
<h4 id="client-cache-control"><a href="#client-cache-control" class="headerlink" title="client cache-control"></a>client cache-control</h4><p>æµè§ˆå™¨ä¼šå°†<code>html</code>æ–‡ä»¶çš„è¯·æ±‚å¤´é‡Œå¸¦ä¸Š<code>Cache-Control:max-age=0</code> è¡¨ç¤ºå³ä½¿æœ‰ç¼“å­˜ï¼Œä¹Ÿä¼šé‡æ–°è®¿é—®ä¸‹æœåŠ¡å™¨éªŒè¯ä¸‹ã€‚serverå¯ä»¥æ ¹æ®æ”¹å˜æ—¥æœŸ(å‚è€ƒæœ€ä¸‹é¢çš„<strong>ç¼“å­˜æœ‰æ•ˆæ€§ç¡®è®¤</strong>)å¯ä»¥è¿”å›<code>304</code>,è¿™æ ·æµè§ˆå™¨å°±ç›´æ¥ç”¨ç¼“å­˜äº†ã€‚</p>
<p>ä¼˜ç‚¹ï¼š<br>å’Œ<code>Expires</code> ä¸€æ ·</p>
<p>ç¼ºç‚¹ï¼š<br><code>http1.1</code>å¼•å…¥ï¼Œå°½ç®¡å¾ˆå°‘é‡çš„æµè§ˆå™¨ä»ç„¶ä½¿ç”¨1.0ã€‚ æœ‰äº›æ’ä»¶å¯ä»¥å¸®åŠ©ä½ è®¾ç½®ï¼Œä¸€ç§å†™æ³•åŒæ—¶å†™<code>Expires</code> å’Œ<code>Cache-Control</code></p>
<h2 id="ç¼“å­˜æœ‰æ•ˆæ€§ç¡®è®¤"><a href="#ç¼“å­˜æœ‰æ•ˆæ€§ç¡®è®¤" class="headerlink" title="ç¼“å­˜æœ‰æ•ˆæ€§ç¡®è®¤"></a>ç¼“å­˜æœ‰æ•ˆæ€§ç¡®è®¤</h2><p>è¿‡æœŸäº†ä¼šåšä¸ªä¸€ä¸ª<strong>conditional get request</strong>(æ¡ä»¶GETè¯·æ±‚ï¼‰ã€‚å¦‚æœè¿‡æœŸäº†ï¼Œä¼šè¿›è¡Œæœ‰æ•ˆæ€§æ£€éªŒï¼Œå¦‚æœè¿”å›<code>304</code> åˆ™ç›´æ¥æ‹¿ç¼“å­˜é‡Œçš„ï¼Œå¦åˆ™è¯·æ±‚æ–°çš„è¿”å›200å“åº”ã€‚<br>æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥æŸ¥çœ‹ç¼“å­˜çš„æœ‰æ•ˆæ€§</p>
<h3 id="æ¯”è¾ƒæœ€æ–°ä¿®æ”¹æ—¥æœŸ"><a href="#æ¯”è¾ƒæœ€æ–°ä¿®æ”¹æ—¥æœŸ" class="headerlink" title="æ¯”è¾ƒæœ€æ–°ä¿®æ”¹æ—¥æœŸ"></a>æ¯”è¾ƒæœ€æ–°ä¿®æ”¹æ—¥æœŸ</h3><p>server: Last-Modified<br>client: If-Modified-Since<br>æµè§ˆå™¨å°†æœåŠ¡å™¨è¿”å›çš„ <code>Last-Modified</code> çš„æ—¶é—´å’Œå¯¹åº”èµ„æºå­˜å…¥ç¼“å­˜ï¼Œå†è¯·æ±‚çš„æ—¶å€™å°†è¿™ä¸ªæ—¶é—´å†™å…¥è¯·æ±‚å¤´çš„ <code>If-Modified-Since</code> å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨åˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸåˆ™è¿”å›200éœ€è¦é‡æ–°ä¸‹è½½ï¼›å¦åˆ™å°±è¿”å›304ï¼Œæ— éœ€è¿”å›èµ„æºæ‰€æœ‰å†…å®¹ã€‚</p>
<h3 id="ETag-Entity-Tags-å®ä½“æ ‡ç­¾"><a href="#ETag-Entity-Tags-å®ä½“æ ‡ç­¾" class="headerlink" title="ETag (Entity Tags) å®ä½“æ ‡ç­¾"></a>ETag (Entity Tags) å®ä½“æ ‡ç­¾</h3><p>ç±»ä¼¼æŒ‡çº¹ï¼Œå¯ä»¥ç†è§£ä¸ºèµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¸€å®šä¼šå‘ç”Ÿå˜åŒ–ã€‚<br>server: ETag<br>client: If-None-Match<br>ç¼ºç‚¹ï¼šåšæœåŠ¡å™¨é›†ç¾¤æ—¶ï¼Œå‘ä¸åŒæœåŠ¡å™¨è¯·æ±‚çš„èµ„æºæ—¶åŒä¸€ä¸ªèµ„æºæ—¶ï¼Œå¯èƒ½è¿”å›çš„ETagåè€Œä¸åŒï¼Œæ²¡æ³•å……åˆ†åˆ©ç”¨ç¼“å­˜ï¼Œæµªè´¹å¸¦å®½ã€‚ã€Šé«˜æ€§èƒ½ç½‘ç«™å»ºè®¾æŒ‡å—ã€‹æ˜¯ä¸å»ºè®®ä½¿ç”¨ <code>Etag</code> æˆ–è€…è¦ç‰¹æ®Šé…ç½® <code>ETag</code> æ¨èä½¿ç”¨ <code>Last-Modified</code></p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol>
<li><p><a href="https://stackoverflow.com/questions/1046966/whats-the-difference-between-cache-control-max-age-0-and-no-cache" target="_blank" rel="noopener">http - Whatâ€™s the difference between Cache-Control: max-age=0 and no-cache? - Stack Overflow</a></p>
</li>
<li><p>ã€Šé«˜æ€§èƒ½ç½‘ç«™å»ºè®¾æŒ‡å—ã€‹</p>
</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag</a></li>
</ol>
]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•ç†è§£vueçš„keyå±æ€§</title>
    <url>/2019/04/12/vue-key/</url>
    <content><![CDATA[<h3 id="key"><a href="#key" class="headerlink" title="key"></a>key</h3><p>å¦‚æœæ²¡æœ‰è¿™ä¸ªå±æ€§çš„æ—¶å€™vueåº”ç”¨ in-place patchï¼ˆå°±åœ°å¤ç”¨ï¼‰ç­–ç•¥ã€‚åˆ—è¡¨é‡Œçš„é¡ºåºå‘ç”Ÿæ”¹å˜çš„æ—¶å€™æ¯”å¦‚shuffleï¼ˆåˆ—è¡¨æ‰“ä¹±ï¼‰çš„æ—¶å€™ï¼Œvueä¸ºäº†æå‡æ€§èƒ½ï¼Œä¸ä¼šç§»åŠ¨domå…ƒç´ ï¼Œåªæ˜¯æ›´æ–°ç›¸åº”å…ƒç´ çš„å†…å®¹èŠ‚ç‚¹ã€‚</p>
<h3 id="å°±åœ°å¤ç”¨çš„å¼Šç«¯"><a href="#å°±åœ°å¤ç”¨çš„å¼Šç«¯" class="headerlink" title="å°±åœ°å¤ç”¨çš„å¼Šç«¯"></a>å°±åœ°å¤ç”¨çš„å¼Šç«¯</h3><blockquote>
<p>è¿™ä¸ªé»˜è®¤çš„æ¨¡å¼æ˜¯é«˜æ•ˆçš„ï¼Œä½†æ˜¯åªé€‚ç”¨äºä¸ä¾èµ–å­ç»„ä»¶çŠ¶æ€æˆ–ä¸´æ—¶ DOM çŠ¶æ€ (ä¾‹å¦‚ï¼šè¡¨å•è¾“å…¥å€¼) çš„åˆ—è¡¨æ¸²æŸ“è¾“å‡ºã€‚</p>
</blockquote>
<a id="more"></a>
<p>å¦‚ä¸Šå¼•ç”¨è‡ªå®˜ç½‘ï¼Œè¿™ä¸ªæ¨¡å¼å°±æ˜¯ä¸Šé¢çš„â€œå°±åœ°å¤ç”¨â€ç­–ç•¥ã€‚é‚£ä¹ˆæ˜¯ä¸æ˜¯ä¾èµ–å­ç»„ä»¶çŠ¶æ€çš„åˆ—è¡¨æ¸²æŸ“é‡‡ç”¨ä¸Šé¢çš„æ¨¡å¼å°±å‡ºé—®é¢˜äº†å‘¢ã€‚å¦‚ä¸‹æµ‹è¯•ä»£ç ï¼š<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; item.des &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tweet-component</span>&gt;</span><span class="tag">&lt;/<span class="name">tweet-component</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  Vue.component(<span class="string">"tweet-component"</span>, &#123;</span></span><br><span class="line"><span class="undefined">    template: `</span></span><br><span class="line"><span class="javascript">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"tweet"</span>&gt;</span></span><br><span class="line"><span class="javascript">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line"><span class="undefined">          &#123;&#123;xixi&#125;&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="undefined">    `,</span></span><br><span class="line"><span class="undefined">    data() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        xixi: <span class="built_in">Math</span>.random()</span></span><br><span class="line"><span class="undefined">      &#125;;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el: <span class="string">"#app"</span>,</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="undefined">      items: [</span></span><br><span class="line"><span class="javascript">        &#123; <span class="attr">title</span>: <span class="string">"nihao1"</span>, <span class="attr">des</span>: <span class="string">"xiexie1"</span> &#125;,</span></span><br><span class="line"><span class="javascript">        &#123; <span class="attr">title</span>: <span class="string">"nihao2"</span>, <span class="attr">des</span>: <span class="string">"xiexie2"</span> &#125;,</span></span><br><span class="line"><span class="javascript">        &#123; <span class="attr">title</span>: <span class="string">"nihao3"</span>, <span class="attr">des</span>: <span class="string">"xiexie3"</span> &#125;</span></span><br><span class="line"><span class="undefined">      ]</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods: &#123;</span></span><br><span class="line"><span class="undefined">      shuffle() &#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">// lodashçš„shuffleæ–¹æ³•</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.items = _.shuffle(<span class="keyword">this</span>.items);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æ“ä½œå¦‚ä¸‹ï¼š</p>
<p>é—®é¢˜å‡ºç°äº†ï¼šå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå­ç»„ä»¶<em>æ²¡æœ‰æ›´æ–°</em>ã€‚<br><img src="/2019/04/12/vue-key/shuffle_array.gif"></p>
<p>ps: æµ‹è¯•ä¸´æ—¶ DOM çŠ¶æ€ (ä¾‹å¦‚ï¼šè¡¨å•è¾“å…¥å€¼)å¯ä»¥å‚è€ƒè¿™ä¸ªé“¾æ¥ <a href="https://css-tricks.com/list-rendering-and-vues-v-for-directive/" target="_blank" rel="noopener">List Rendering and Vueâ€™s v-for Directive</a></p>
<h3 id="keyçš„ä½œç”¨"><a href="#keyçš„ä½œç”¨" class="headerlink" title="keyçš„ä½œç”¨"></a>keyçš„ä½œç”¨</h3><p>è¿™ä¸ªæ—¶å€™å¼•å…¥ <code>key</code> å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<code>key</code> çš„ä½œç”¨æ˜¯ç»™äºˆä¸€ä¸ªèŠ‚ç‚¹å”¯ä¸€çš„èº«ä»½è¯†åˆ«ï¼Œæœ‰ç›¸åŒçˆ¶å…ƒç´ çš„å­å…ƒç´ å¿…é¡»æœ‰ç‹¬ç‰¹çš„ <code>key</code> ã€‚è¿™æ ·å®ƒå¯ä»¥å‰åå¯¹æ¯”ï¼Œç®—å‡ºå“ªäº›èŠ‚ç‚¹æ˜¯è¦é‡å¤ä½¿ç”¨æˆ–è€…è°ƒæ•´é¡ºåºã€‚æ¯”å¦‚åŸå…ˆçš„ <code>key</code> çš„é¡ºåºæ˜¯<code>i1,i2,i3</code>ï¼Œä¹‹åå˜æˆäº†<code>i2,i1,i3</code>è¿™ä¸ªæ—¶å€™åªè¦i3ä¿æŒä¸å˜ï¼ŒæŠŠi2<code>insertBefore</code>åˆ°i1èŠ‚ç‚¹å‰å°±è¡Œäº†ï¼ˆä»¥ä¸Šæ˜¯ä¸¾ä¾‹ï¼Œvueå…·ä½“æ€ä¹ˆæ“ä½œçš„éœ€è¦å»ç ”ç©¶æºç ï¼‰ã€‚å¦‚æœæ˜¯åˆ©ç”¨æ•°ç»„çš„<code>index</code>æ¥ä½œä¸º <code>key</code> åˆ™ä¸¤æ¬¡å¯¹æ¯”æ²¡æœ‰åŒºåˆ«ï¼Œå°±ä¼šå‡ºç°ä¸Šé¢åŠ¨å›¾é‡Œå‡ºç°çš„å­ç»„ä»¶æ²¡æœ‰æ›´æ–°çš„æƒ…å†µã€‚</p>
<p>å¯ä»¥é€šè¿‡æŸ¥çœ‹ä¸‹é¢ä¸¤ä¸ªåŠ¨å›¾æŸ¥çœ‹domèŠ‚ç‚¹çš„å˜åŒ–ã€‚ç¬¬ä¸€ä¸ªgifæ˜¯æ²¡æœ‰ä½¿ç”¨ <code>key</code> ,ç¬¬äºŒä¸ªæ˜¯ä½¿ç”¨äº† <code>key</code>ã€‚å¯ä»¥çœ‹åˆ°æˆ‘ç‚¹äº†æŒ‰é’®åï¼Œç¬¬ä¸€ä¸ªåªæ˜¯æ›´æ–°<code>&lt;p&gt;</code>æ ‡ç­¾çš„å†…å®¹èŠ‚ç‚¹ã€‚ç¬¬äºŒä¸ªæ˜¯ç§»åŠ¨äº†æŸä¸€é¡¹çš„<code>&lt;li&gt;</code>æ ‡ç­¾ã€‚<br><img src="/2019/04/12/vue-key/no-key-shuffle.gif"><br><img src="/2019/04/12/vue-key/has-key-shuffle.gif"></p>
<p>ps: å¦å¤–å¯ä»¥é€šè¿‡chromeçš„domæ–­ç‚¹åŠŸèƒ½æŸ¥çœ‹å­å…ƒç´ çš„æ’å…¥åˆ é™¤ã€‚</p>
<p><a href="https://developers.google.com/web/tools/chrome-devtools/javascript/breakpoints#dom" target="_blank" rel="noopener">DOM æ›´æ”¹æ–­ç‚¹</a></p>
<h3 id="keyçš„å…¶ä»–ç”¨é€”"><a href="#keyçš„å…¶ä»–ç”¨é€”" class="headerlink" title="keyçš„å…¶ä»–ç”¨é€”"></a>keyçš„å…¶ä»–ç”¨é€”</h3><p>keyä¸æ˜¯åªèƒ½ç”¨åœ¨v-forä¸Šè¿˜å¯ä»¥ç”¨åœ¨å…¶ä»–å…ƒç´ ä¸Šã€‚å¦‚ä¸‹ä»£ç <br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"toggle"</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span>Goodbye<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>åˆ‡æ¢toggleæ—¶ï¼Œå®ƒä¹Ÿæ˜¯åˆ‡æ¢divã€‚å¦‚æœä½ æƒ³ç”¨ä¸Šenter/leave animationsæ—¶ï¼Œå³èŠ‚ç‚¹æ’å…¥å’Œåˆ é™¤çš„æ—¶å€™çš„åŠ¨ç”»æ—¶å°±è¦æ‰“ç ´è¿™ä¸ªå¤ç”¨ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"toggle"</span> <span class="attr">key</span>=<span class="string">"1"</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span> <span class="attr">key</span>=<span class="string">"2"</span>&gt;</span>Goodbye<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¦‚æœä½ çš„åˆ—è¡¨ä¸å‘ç”Ÿå˜åŒ–ï¼Œæˆ–è€…ä½ åªæ˜¯å¾€åˆ—è¡¨æœ€åä¸€é¡¹æ·»åŠ å…ƒç´ åˆ™çœ‹ä¼¼ä¸å¿…è¦å¢åŠ <code>key</code>å­—æ®µã€‚ä½†æ˜¯ä½ çš„é¡¹ç›®ä¸­æœ‰å¾ˆå¤šåˆ—è¡¨çš„æ—¶å€™ï¼Œä½ æœ‰çš„éœ€è¦åŠ <code>key</code>ï¼Œæœ‰çš„ä¸éœ€è¦åŠ ã€‚è¿˜ä¸å¦‚æ‰€æœ‰çš„éƒ½åŠ ä¸Šå‘¢é¿å…åˆ«äººç†è§£å›°éš¾(^._.^)ï¾‰ã€‚</p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a href="https://vuejs.org/v2/guide/list.html#key" target="_blank" rel="noopener">https://vuejs.org/v2/guide/list.html#key</a></p>
<p><a href="https://vuejs.org/v2/api/#key" target="_blank" rel="noopener">https://vuejs.org/v2/api/#key</a></p>
<p><a href="https://forum.vuejs.org/t/simple-clarification-of-when-using-key-with-v-for-is-appropriate-and-why/28966/5" target="_blank" rel="noopener">https://forum.vuejs.org/t/simple-clarification-of-when-using-key-with-v-for-is-appropriate-and-why/28966/5</a></p>
]]></content>
      <categories>
        <category>frontend</category>
        <category>framework</category>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vueé¡¹ç›®å¦‚ä½•å…¨å±€å¼•å…¥scss/sassæ–‡ä»¶</title>
    <url>/2019/04/10/vue-global-sass/</url>
    <content><![CDATA[<p>é¡¹ç›®ä¸­æˆ‘ä»¬ä¼šå®šä¹‰å¾ˆå¤šå…¨å±€å˜é‡ï¼ˆå¦‚ä¸‹ï¼‰ï¼Œä¸ºäº†æ›´å¥½çš„ä»£ç å¤ç”¨ï¼Œé¿å…å†™é¢æ¡ä»£ç ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- src</span><br><span class="line">  - styles</span><br><span class="line">    - _colors.scss</span><br><span class="line">    - _fonts.scss</span><br><span class="line">    - _mixins.scss</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure></p>
<p>é—®é¢˜çš„å…³é”®æ˜¯æ€ä¹ˆåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­å¼•å…¥è¿™äº›æ–‡ä»¶ã€‚<br><a id="more"></a></p>
<h3 id="æ–¹æ³•1"><a href="#æ–¹æ³•1" class="headerlink" title="æ–¹æ³•1"></a>æ–¹æ³•1</h3><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;style lang="scss"&gt;</span><br><span class="line">  @<span class="keyword">import</span> <span class="string">"./styles/_colors.scss"</span>;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ¯ä¸ªå•æ–‡ä»¶ç»„é‡Œå¼•å…¥ä¸Šè¿°ä»£ç ã€‚è¿™ä¸ªæ–¹æ³•çš„ç¼ºç‚¹æ˜¯ï¼Œå¦‚æœæ›´æ”¹äº†æ–‡ä»¶çš„ä½ç½®ï¼Œä½ æ¯ä¸ªç»„ä»¶é‡Œçš„ä»£ç éƒ½å¾—ä¿®æ”¹ã€‚å½“ç„¶ä½ å¯ä»¥åˆ©ç”¨ <code>webpack</code> çš„ <code>alias</code> åŠŸèƒ½å†™æˆè¿™ç§å½¢å¼  <code>@import &quot;styles/_colors.scss&quot;;</code>  ä½†ä¸‡ä¸€ä¿®æ”¹äº†æ–‡ä»¶åå‘¢ï¼Œä½ è¿˜æ˜¯å¾—è¦ä¸€ä¸ªä¸ªä¿®æ”¹ã€‚å…¶å®è¿™ä¸ç¬¦åˆ<a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" target="_blank" rel="noopener">DRY</a>åŸåˆ™ï¼Œæ²¡æœ‰åšå¥½ä»£ç å¤ç”¨ã€‚</p>
<h3 id="æ–¹æ³•2"><a href="#æ–¹æ³•2" class="headerlink" title="æ–¹æ³•2"></a>æ–¹æ³•2</h3><p>å¯ä»¥åˆ©ç”¨<a href="https://github.com/webpack-contrib/sass-loader#environment-variables" target="_blank" rel="noopener">sass-loader</a> çš„ä¸€ä¸ªç‰¹æ€§ã€‚å¯ä»¥å°†ä¸€æ®µä»£ç æ’å…¥åœ¨æ¯ä¸ªscssæ–‡ä»¶å¤´éƒ¨ã€‚</p>
<blockquote>
<p>vue 2.x é…ç½®å¦‚ä¸‹<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  loader: <span class="string">'sass-loader'</span>,</span><br><span class="line">  options: &#123;</span><br><span class="line">    data: <span class="string">`</span></span><br><span class="line"><span class="string">      @import "@/styles/_colors.scss";</span></span><br><span class="line"><span class="string">      @import "@/styles/_mixins.scss";</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>vue 3.x é…ç½®å¦‚ä¸‹,å¯ä»¥å‚è€ƒ <a href="https://cli.vuejs.org/config/#css-loaderoptions" target="_blank" rel="noopener">vue-cli3é…ç½®</a><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">css: &#123;</span><br><span class="line">  loaderOptions: &#123;</span><br><span class="line">    sass: &#123;</span><br><span class="line">      data: <span class="string">`@import "@/styles/_colors.scss";`</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>é‡‡ç”¨ç¬¬äºŒç§æ–¹æ³•çš„æ—¶å€™è¦æ³¨æ„å› ä¸ºå®ƒä¼šåœ¨æ‰€æœ‰ <code>sass</code> æ–‡ä»¶é‡Œæ·»åŠ ç›¸åŒçš„ä»£ç ã€‚å¦‚æœæ·»åŠ çš„ä¸æ˜¯å˜é‡, <code>mixin</code> ä¹‹ç±»çš„ï¼Œè€Œæ˜¯ç±»ä¼¼ä¸‹é¢çš„ä»£ç çš„è¯ã€‚å‡è®¾ä½ æœ‰20ä¸ªscssæ–‡ä»¶çš„è¯ï¼Œä¸‹é¢è¿™æ®µä»£ç å°±ä¼šå‡ºç°åœ¨ä½ æœ€ç»ˆæ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶20æ¬¡ã€‚<br><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h4><p> <a href="https://css-tricks.com/how-to-import-a-sass-file-into-every-vue-component-in-an-app/" target="_blank" rel="noopener">https://css-tricks.com/how-to-import-a-sass-file-into-every-vue-component-in-an-app/</a> </p>
<p> <a href="https://vueschool.io/articles/vuejs-tutorials/globally-load-sass-into-your-vue-js-applications/" target="_blank" rel="noopener">https://vueschool.io/articles/vuejs-tutorials/globally-load-sass-into-your-vue-js-applications/</a> </p>
]]></content>
      <categories>
        <category>frontend</category>
        <category>framework</category>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
</search>
